var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,c=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&o(e,s,t[s]);if(a)for(var s of a(t))i.call(t,s)&&o(e,s,t[s]);return e},l=(e,a)=>t(e,s(a));import{q as u,f as n,o as d,t as p,v as b,a as f,w as m,U as y,az as v,av as j,b as w}from"./vue.89ed3d48.js";import{m as _}from"./index.5003068f.js";import{D as O}from"./DetailsHeader.dc89d7cd.js";import{K as x}from"./KzAddArticle.c5a333bf.js";import{x as g,E as h,F as P,t as k}from"./website.0bcef33f.js";import{w as q}from"./index.eaa6bc8d.js";import"./index.fdca730b.js";import"./login.6de82fdd.js";import"./request.aa9790cc.js";import"./Edit.8fc5be14.js";const D={class:"add_article"},E={class:"fsc"},z={class:"btns"},A=y("稍后编辑"),C=y("提交"),F=u({setup(e){_();const t=v(),s=j(),a=t.query.id;a&&(async()=>{const{status:e,body:t}=await g({id:a});if(1==e){if(3==t.status)return q("请下线文章后再编辑"),void s.replace("/website/newsdetails?id="+a);r.value.setForm({title:t.title,article_type:t.article_type,text:t.text,thumb_url:t.thumb_url,source:t.source})}})();const r=n(),i=n(1),o=async e=>{i.value=e,r.value.submit()},u=async e=>{const t={content:e.text,source_url:e.source_url,type_id:e.article_type,thumb_url:e.thumb_url,title:e.title},{status:r}=a?await h(l(c({},t),{status:i.value,id:a})):await P(l(c({},t),{status:i.value}));1==r&&s.replace("/website/news")},y=n({});return(async()=>{const e=await k();1==e.status&&(y.value=e.body.map((e=>({label:e.name,value:e.id}))))})(),(e,t)=>{const s=w("el-button");return d(),p("div",D,[b("div",E,[f(O),b("div",z,[f(s,{class:"bdc_btn",onClick:t[0]||(t[0]=e=>o(1))},{default:m((()=>[A])),_:1}),f(s,{type:"primary",onClick:t[1]||(t[1]=e=>o(2))},{default:m((()=>[C])),_:1})])]),f(x,{ref_key:"addRef",ref:r,needimg:"",needtype:"",needsource:1,onSuccess:u,types:y.value},null,8,["types"])])}}});export{F as default};
