var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,c=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&o(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&o(e,a,t[a]);return e},n=(e,s)=>t(e,a(s));import{G as l,g as u,o as p,H as d,I as m,a as b,w as y,a1 as f,az as j,av as v,b as _}from"./vue.73bee448.js";import{m as w}from"./index.46ed79dd.js";import{D as O}from"./DetailsHeader.159e29ee.js";import{K as g}from"./KzAddArticle.7c88c03c.js";import{n as x,m as h,o as P,p as k}from"./website.05756264.js";import"./index.aefc30ce.js";import"./tinymce.5416ef76.js";import"./login.857dc837.js";import"./request.65081ce8.js";import"./index.6c11e008.js";const D={class:"add_article"},K={class:"fsc"},q={class:"btns"},z=f("稍后编辑"),A=f("提交"),C=l({setup(e){const t=w(),a=j(),s=v(),r=a.query.id,i=async()=>{const{status:e,body:t}=await x({id:r});1===e&&o.value.setForm({title:t.title,article_type:Number(t.type_id),text:t.content,thumb_url:t.thumb_url})};r&&i();const o=u(),l=u(1),f=async e=>{l.value=e,o.value.submit()},C=async e=>{const a={content:e.text,type_id:e.article_type,thumb_url:e.thumb_url,title:e.title};1===(1===l.value?await h(n(c({},a),{id:r})):await P(n(c({},a),{id:r}))).status&&(t.setKeepList([]),s.replace("/website/inform/notice"))},H=u([]);return(async()=>{const e=await k();1===e.status&&(H.value=e.body.map((e=>({label:e.name,value:e.id}))),r&&i())})(),(e,t)=>{const a=_("el-button");return p(),d("div",D,[m("div",K,[b(O),m("div",q,[b(a,{class:"bdc_btn",onClick:t[0]||(t[0]=e=>f(1))},{default:y((()=>[z])),_:1}),b(a,{type:"primary",onClick:t[1]||(t[1]=e=>f(2))},{default:y((()=>[A])),_:1})])]),b(g,{ref_key:"addRef",ref:o,needimg:"",needtype:"",types:H.value,needsource:0,onSuccess:C},null,8,["types"])])}}});export{C as default};
