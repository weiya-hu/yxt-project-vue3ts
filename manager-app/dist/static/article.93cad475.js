var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&o(e,t,a[t]);return e},c=(e,l)=>a(e,t(l));import{f as i}from"./date.23847c74.js";import{s as d}from"./Search.2792c96f.js";import{M as m}from"./MyEmpty.c87e98e1.js";import{M as n}from"./MyPage.088b462f.js";import{M as p}from"./MyDialog.e1451ef4.js";import{a as f,b as y}from"./myWork.dcebe850.js";import{_ as v,a as b,E as _}from"./index.547c0c45.js";import{q as w,f as k,_ as j,o as g,t as h,a as C,w as x,u as O,I as M,v as N,U as V,V as P,L as S,S as U,aw as z,ax as D,b as I}from"./vue.89ed3d48.js";import"./empty.f131d8fb.js";import"./request.356cbcf4.js";const T=e=>(z("data-v-3df3b10a"),e=e(),D(),e),E={class:"tel_data"},q={class:"mytable"},B=["src"],$={class:"fcs"},L={class:"staus"},R={key:0,class:"fcs"},W=V("详情"),A={key:1,class:"fcs"},F=V("通过"),G=T((()=>N("div",{class:"line"},null,-1))),H=V("驳回"),J={key:2,class:"fcs"},K=V("驳回原因");var Q=v(w(c(u({},{name:"我的作品库——软文"}),{setup(e){const a=k([]),t=k(1),l=k(0),s=k(10),r=k(!1),o=k(""),v=j({userName:"",status:"",create_time:""}),w=()=>{t.value=1,D()},z=()=>{v.userName="",v.status="",v.create_time="",D()},D=async()=>{const e=await f(c(u({size:s.value,current:t.value},v),{startTime:v.create_time[0],endTime:v.create_time[1]}));1==e.status&&(a.value=e.body.records,l.value=e.body.total)};D();const T=k([]),Q=e=>{T.value=e},X=e=>{const a=k();switch(Number(e)){case 2:a.value={text:"待审核",className:"cred"};break;case 3:a.value={text:"已通过",className:"cdf"};break;case 4:a.value={text:"被驳回",className:"cyellow "};break;default:a.value={text:"草稿",className:"cbbb"}}return a.value};return(e,u)=>{const c=I("el-option"),f=I("el-table-column"),k=I("el-link"),j=I("el-table"),T=I("el-card");return g(),h("div",E,[C(d,{onSearch:w,onReset:z,modelValue:O(v),"onUpdate:modelValue":u[0]||(u[0]=e=>M(v)?v.value=e:v=e)},{default:x((()=>[C(c,{label:"待审核",value:"2"}),C(c,{label:"已通过",value:"3"}),C(c,{label:"被驳回",value:"4"})])),_:1},8,["modelValue"]),C(T,{class:"mycard mt20"},{default:x((()=>[N("div",q,[C(j,{data:a.value,style:{width:"100%"},border:"",onSelectionChange:Q},{empty:x((()=>[C(m)])),default:x((()=>[C(f,{property:"id",label:"ID"}),C(f,{property:"uname",label:"账户名"}),C(f,{property:"cname",label:"客户名称"}),C(f,{property:"thumb_url",label:"封面图片"},{default:x((({row:e})=>[N("img",{src:e.thumb_url,alt:"",class:"firstimg"},null,8,B)])),_:1}),C(f,{label:"标题","show-overflow-tooltip":!0},{default:x((({row:a})=>[C(k,{type:"primary",onClick:t=>e.$router.push("/cms/myworkdet?id="+a.id)},{default:x((()=>[V(P(a.title),1)])),_:2},1032,["onClick"])])),_:1}),C(f,{property:"create_time",label:"创建日期"},{default:x((({row:e})=>[N("div",null,P(O(i)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1}),C(f,{property:"status",label:"状态"},{default:x((({row:e})=>[N("div",$,[N("div",{class:S(["dot",X(e.status).className])},null,2),N("div",L,P(X(e.status).text),1)])])),_:1}),C(f,{label:"操作"},{default:x((({row:a})=>[3==a.status?(g(),h("div",R,[C(k,{type:"primary",onClick:t=>e.$router.push("/cms/myworkdet?id="+a.id)},{default:x((()=>[W])),_:2},1032,["onClick"])])):U("",!0),2==a.status?(g(),h("div",A,[C(k,{type:"primary",onClick:e=>(async e=>{await y({id:e,status:3,fail_reason:""}),D()})(a.id)},{default:x((()=>[F])),_:2},1032,["onClick"]),G,C(k,{type:"primary",onClick:e=>{return t=a.id,void b.prompt("驳回原因","提示",{confirmButtonText:"确认",cancelButtonText:"取消"}).then((async({value:e})=>{await y({fail_reason:e,status:4,id:t}),D()})).catch((()=>{_({type:"info",message:"取消驳回"})}));var t}},{default:x((()=>[H])),_:2},1032,["onClick"])])):U("",!0),4==a.status?(g(),h("div",J,[C(k,{type:"primary",onClick:e=>{o.value=a.fail_reason,r.value=!0}},{default:x((()=>[K])),_:2},1032,["onClick"])])):U("",!0)])),_:1})])),_:1},8,["data"])]),C(n,{total:l.value,page:t.value,"onUpdate:page":u[1]||(u[1]=e=>t.value=e),onChange:D,size:s.value,"onUpdate:size":u[2]||(u[2]=e=>s.value=e)},null,8,["total","page","size"])])),_:1}),C(p,{modelValue:r.value,"onUpdate:modelValue":u[3]||(u[3]=e=>r.value=e),msg:o.value,title:"驳回原因",btn:1},null,8,["modelValue","msg"])])}}})),[["__scopeId","data-v-3df3b10a"]]);export{Q as default};
