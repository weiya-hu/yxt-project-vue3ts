import{i as e}from"./login.df5d82cd.js";import{e as a}from"./index.3ae96932.js";import{_ as s,j as l,p as o}from"./index.e7872df1.js";import{G as i,g as t,b as d,o as u,c as n,w as c,I as r,H as m,a as p,C as v,a2 as f,W as y,V as b,a1 as x,a0 as h}from"./vue.73bee448.js";const _={class:"upbox"},g={key:0,class:"upvideo up_lt"},k=["src"],L={class:"fcc fc"},V={class:"file_name"},j={class:"upbox"},w={class:"up_rt"},z=["innerHTML"],S={key:0,class:"up_tip dfcolor fcs"},I=x("下载模板示例"),M={key:1,class:"up_tip dfcolor"};var O=s(i({props:{modelValue:{default:""},exnameList:{default:()=>[".zip",".rar",".7z"]},downLink:null,msg:null,type:null,maxSize:{default:4}},emits:["update:modelValue","change","error","success","changeName"],setup(s,{expose:i,emit:O}){const R=s,U=t(),C=t({}),H=t(""),A=t(""),F=t(""),N=t(""),T=e=>{U.value.clearFiles(),U.value.handleStart(e[0])},D=t(),G=(e,a)=>{if(!e.name)return;D.value=e;const s=e.name.lastIndexOf("."),l=e.name.substring(s);R.exnameList.indexOf(l)<0?O("change","type"):e.size&&e.size/1024/1024>R.maxSize?O("change","size"):(O("change",""),O("update:modelValue",e.name),A.value=l,"video"==R.type&&(!N.value&&O("changeName",e.name.substring(0,s)),N.value=URL.createObjectURL(e.raw)))},K=(e,a)=>{O("success",F.value)},P=(e,a,s)=>{W(),O("error",e)},W=()=>{U.value.clearFiles(),O("update:modelValue",""),URL.revokeObjectURL(N.value),N.value=""},$=()=>{};return i({submit:()=>{e({site:"video"==R.type?"official_video":"dmp_excel"}).then((e=>new Promise(((a,s)=>{1==e.status?(H.value=e.body.host,C.value={key:e.body.dir+"/"+e.body.uuid+A.value,OSSAccessKeyId:e.body.accessid,success_action_status:200,policy:e.body.policy,signature:e.body.signature,"Content-Disposition":"attachment; filename="+encodeURIComponent(R.modelValue)},a(e.body.host+"/"+e.body.dir+"/"+e.body.uuid+A.value)):s(e.message)})))).then((e=>{F.value=e,U.value.submit()})).catch((e=>{O("error",e)}))},clear:W,doAbort:()=>{U.value.abort(D.value),a("取消上传")}}),(e,a)=>{const i=d("el-icon"),t=d("el-link"),O=d("el-upload");return u(),n(O,{drag:"",action:H.value,"auto-upload":!1,limit:1,multiple:!1,"show-file-list":!1,data:C.value,"on-exceed":T,"on-change":G,"on-success":K,"on-error":P,ref_key:"upload",ref:U,accept:s.exnameList.join(","),class:"my_upload"},{default:c((()=>[r("div",_,["video"==s.type&&s.modelValue?(u(),m("div",g,[r("video",{src:N.value},null,8,k)])):(u(),m("div",{key:1,class:y(["fcc up_lt",s.modelValue?"hasfile":""])},[r("div",L,[p(i,null,{default:c((()=>[s.modelValue?(u(),n(v(l),{key:0})):(u(),n(v(o),{key:1}))])),_:1}),r("div",V,f(s.modelValue||"拖拽/点击上传"),1)])],2))])])),tip:c((()=>[r("div",j,[b(e.$slots,"default",{},(()=>[r("div",w,[r("div",{innerHTML:s.msg||"可适当描述所处的行业现状，以及公司目前采取的运营、渠道、推广等多种获客方式，以便运营人员进一步了解熟悉您的所处的行业及需求，同时也为您提供更好的客户服务。"},null,8,z),s.downLink?(u(),m("div",S,[p(t,{type:"primary",href:s.downLink,onClick:$,download:"模板.xlsx"},{default:c((()=>[I])),_:1},8,["href"]),x("（上传附件大小不超过"+f(s.maxSize)+"M）",1)])):h("",!0),s.downLink||"video"==s.type?h("",!0):(u(),m("div",M,"附件支持 "+f(s.exnameList.join(" "))+"，大小不超过"+f(s.maxSize)+"M",1))])]),!0)])])),_:3},8,["action","data","accept"])}}}),[["__scopeId","data-v-c152e664"]]);export{O as M};
