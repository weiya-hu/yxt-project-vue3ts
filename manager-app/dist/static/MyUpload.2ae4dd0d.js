import{i as e}from"./login.6de82fdd.js";import{e as a}from"./index.eaa6bc8d.js";import{_ as s,n as l,p as o}from"./index.fdca730b.js";import{q as i,f as t,b as d,o as u,c as n,w as c,v as r,t as m,a as p,u as v,V as f,L as y,K as b,U as x,S as h}from"./vue.89ed3d48.js";const _={class:"upbox"},g={key:0,class:"upvideo up_lt"},k=["src"],L={class:"fcc fc"},V={class:"file_name"},w={class:"upbox"},z={class:"up_rt"},j=["innerHTML"],S={key:0,class:"up_tip dfcolor fcs"},O=x("下载模板示例"),U={key:1,class:"up_tip dfcolor"};var M=s(i({props:{modelValue:{default:""},exnameList:{default:()=>[".zip",".rar",".7z"]},downLink:null,msg:null,type:null,maxSize:{default:4}},emits:["update:modelValue","change","error","success","changeName"],setup(s,{expose:i,emit:M}){const R=s,I=t(),C=t({}),A=t(""),F=t(""),H=t(""),K=t(""),N=e=>{I.value.clearFiles(),I.value.handleStart(e[0])},T=t(),q=(e,a)=>{if(!e.name)return;T.value=e;const s=e.name.lastIndexOf("."),l=e.name.substring(s);R.exnameList.indexOf(l)<0?M("change","type"):e.size&&e.size/1024/1024>R.maxSize?M("change","size"):(M("change",""),M("update:modelValue",e.name),F.value=l,"video"==R.type&&(!K.value&&M("changeName",e.name.substring(0,e.name.indexOf("."))),K.value=URL.createObjectURL(e.raw)))},D=(e,a)=>{M("success",H.value)},P=(e,a,s)=>{$(),M("error",e)},$=()=>{I.value.clearFiles(),M("update:modelValue",""),URL.revokeObjectURL(K.value),K.value=""},B=()=>{};return i({submit:()=>{e({site:"video"==R.type?"official_video":"dmp_excel"}).then((e=>new Promise(((a,s)=>{1==e.status?(A.value=e.body.host,C.value={key:e.body.dir+"/"+e.body.uuid+F.value,OSSAccessKeyId:e.body.accessid,success_action_status:200,policy:e.body.policy,signature:e.body.signature,"Content-Disposition":"attachment; filename="+encodeURIComponent(R.modelValue)},a(e.body.host+"/"+e.body.dir+"/"+e.body.uuid+F.value)):s(e.message)})))).then((e=>{H.value=e,I.value.submit()})).catch((e=>{M("error",e)}))},clear:$,doAbort:()=>{I.value.abort(T.value),a("取消上传")}}),(e,a)=>{const i=d("el-icon"),t=d("el-link"),M=d("el-upload");return u(),n(M,{action:A.value,"auto-upload":!1,limit:1,multiple:!1,"show-file-list":!1,data:C.value,"on-exceed":N,"on-change":q,"on-success":D,"on-error":P,ref_key:"upload",ref:I,accept:s.exnameList.join(","),class:"my_upload"},{default:c((()=>[r("div",_,["video"==s.type&&s.modelValue?(u(),m("div",g,[r("video",{src:K.value},null,8,k)])):(u(),m("div",{key:1,class:y(["fcc up_lt",s.modelValue?"hasfile":""])},[r("div",L,[p(i,null,{default:c((()=>[s.modelValue?(u(),n(v(l),{key:0})):(u(),n(v(o),{key:1}))])),_:1}),r("div",V,f(s.modelValue||"点击上传"),1)])],2))])])),tip:c((()=>[r("div",w,[b(e.$slots,"default",{},(()=>[r("div",z,[r("div",{innerHTML:s.msg||"可适当描述所处的行业现状，以及公司目前采取的运营、渠道、推广等多种获客方式，以便运营人员进一步了解熟悉您的所处的行业及需求，同时也为您提供更好的客户服务。"},null,8,j),s.downLink?(u(),m("div",S,[p(t,{type:"primary",href:s.downLink,onClick:B,download:"模板.xlsx"},{default:c((()=>[O])),_:1},8,["href"]),x("（上传附件大小不超过"+f(s.maxSize)+"M）",1)])):h("",!0),s.downLink||"video"==s.type?h("",!0):(u(),m("div",U,"附件支持 "+f(s.exnameList.join(" "))+"，大小不超过"+f(s.maxSize)+"M",1))])]),!0)])])),_:3},8,["action","data","accept"])}}}),[["__scopeId","data-v-53e64355"]]);export{M};
