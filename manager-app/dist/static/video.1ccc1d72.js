var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,u=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e},i=(e,t)=>a(e,l(t));import{s as d}from"./Search.28fa84ea.js";import{M as p}from"./MyPage.5c5e696e.js";import{M as m}from"./MyDataTable.4a310865.js";import{M as n}from"./MyDialog.01ba78d4.js";import{M as c}from"./MyEmpty.10b8ccba.js";import{M as v}from"./MyUpload.578c2e22.js";import{R as y}from"./Refuse.2f5a6245.js";import{e as f,l as b}from"./index.2f69722d.js";import{a as _,b as w,d as h,g as j,v as k}from"./custom.529828dd.js";import{_ as g}from"./index.1bbbc36a.js";import{G as V,g as C,j as x,o as M,H as O,a as U,w as P,C as z,k as S,_ as D,c as I,P as E,aa as R,I as T,a0 as q,a1 as N,b as G,ae as H}from"./vue.73bee448.js";import"./date.23847c74.js";import"./index.1d8a12f4.js";import"./login.176baa88.js";import"./request.68f2d717.js";import"./findb.cb73d1ee.js";import"./empty.f131d8fb.js";const A={class:"mytable"},B={class:"fcs"},F=N("编辑"),J=N("驳回原因"),K=N("详情"),L={key:3},Q=N("下载附件"),W=N("通过"),X=N("驳回"),Y={key:0,class:"img-dialog"},Z=["src","onClick"],$={class:"dialog-footer"},ee=N("确认"),ae={class:"fcs btns fjend mt20"},le=N("取消"),te=N("提交");var oe=g(V(i(u({},{name:"CustomVideo"}),{setup(e){const a=C([{type:"text",lable:"需求ID",prop:"id",width:120},{type:"text",lable:"账户名",prop:"user_name",width:120},{type:"text",lable:"客户名称",prop:"company_name",width:180},{type:"text",lable:"标题",prop:"title",width:150},{type:"text-tooltip",lable:"描述",prop:"detail",width:120},{type:"date",lable:"创建日期",prop:"create_time",width:110},{type:"status",lable:"状态",prop:"status",width:100}]),l=C(!1),t=C(!1),o=[".mp4"],s=C(0),r=C(10),g=C(1),V=C([]),N=C(!1),oe=C(""),se=x({userName:"",status:"",create_time:""}),re=()=>{se.userName="",se.status="",se.create_time="",je()},ue=e=>{g.value=1,je()},ie=C(!1),de=C(),pe=async e=>{const a={id:de.value,fail_reason:e},{status:l,body:t}=await w(a);l&&(ie.value=!1,je())},me=C(!1),ne=C([]),ce=C(""),ve=C(!1),ye=x({url:""}),fe=C(),be=e=>{f(e),l.value=!1},_e=()=>{t.value=!1,fe.value.clear(),ve.value=!1,je()},we=async e=>{ye.url=e,await j({order_id:ce.value,url:ye.url}),t.value=!1,_e(),je()},he=async()=>{t.value=!0,fe.value.submit()},je=async()=>{l.value=!0;const e=await k(i(u({size:r.value,current:g.value},se),{startTime:se.create_time?se.create_time[0]:null,endTime:se.create_time?se.create_time[1]:null}));l.value=!1,1==e.status&&(s.value=e.body.total,V.value=e.body.records)};return je(),(e,u)=>{const i=G("el-option"),f=G("el-link"),w=G("el-table-column"),j=G("el-table"),k=G("el-card"),C=G("el-button"),x=G("el-dialog"),ke=G("el-form-item"),ge=G("el-form"),Ve=H("loading");return M(),O("div",A,[U(d,{modelValue:z(se),"onUpdate:modelValue":u[0]||(u[0]=e=>S(se)?se.value=e:se=e),onSearch:ue,onReset:re},{default:P((()=>[U(i,{label:"全部",value:"null"}),U(i,{label:"待处理",value:"1"}),U(i,{label:"已受理",value:"2"}),U(i,{label:"被驳回",value:"3"}),U(i,{label:"已完成",value:"4"})])),_:1},8,["modelValue"]),U(k,{class:"mycard mt20"},{default:P((()=>[D((M(),I(j,{data:V.value,border:"",style:{width:"100%"},"row-class-name":"my-data-table-row"},{empty:P((()=>[U(c)])),default:P((()=>[(M(!0),O(E,null,R(a.value,((e,a)=>(M(),I(m,{key:a,type:e.type,width:e.width,lable:e.lable,prop:e.prop},null,8,["type","width","lable","prop"])))),128)),U(w,{width:"150",label:"操作"},{default:P((({row:e})=>[T("div",B,[2==e.status?(M(),I(f,{key:0,type:"primary",onClick:a=>{return l=e.id,ve.value=!0,void(ce.value=l);var l}},{default:P((()=>[F])),_:2},1032,["onClick"])):q("",!0),3==e.status?(M(),I(f,{key:1,type:"primary",onClick:a=>{oe.value=e.fail_reason,N.value=!0}},{default:P((()=>[J])),_:2},1032,["onClick"])):q("",!0),4==e.status?(M(),I(f,{key:2,type:"primary",onClick:a=>(async e=>{const a=await h({id:e});1==a.status&&(ne.value=a.body.list),me.value=!0})(e.id)},{default:P((()=>[K])),_:2},1032,["onClick"])):q("",!0),1==e.status?(M(),O("div",L,[e.attach_url?(M(),I(f,{key:0,type:"primary",class:"fcss",href:e.attach_url,"down-load":"附件.zip"},{default:P((()=>[Q])),_:2},1032,["href"])):q("",!0),U(f,{type:"primary",class:"fcss",onClick:a=>(async e=>{await _({id:e}),je()})(e.id)},{default:P((()=>[W])),_:2},1032,["onClick"]),U(f,{type:"primary",onClick:a=>{return l=e.id,ie.value=!0,void(de.value=l);var l}},{default:P((()=>[X])),_:2},1032,["onClick"])])):q("",!0)])])),_:1})])),_:1},8,["data"])),[[Ve,l.value]]),U(p,{page:g.value,"onUpdate:page":u[1]||(u[1]=e=>g.value=e),size:r.value,"onUpdate:size":u[2]||(u[2]=e=>r.value=e),total:s.value,onChange:je},null,8,["page","size","total"])])),_:1}),U(n,{modelValue:N.value,"onUpdate:modelValue":u[3]||(u[3]=e=>N.value=e),msg:oe.value,title:"驳回原因",btn:1},null,8,["modelValue","msg"]),U(x,{modelValue:me.value,"onUpdate:modelValue":u[5]||(u[5]=e=>me.value=e),title:"详情视频",width:"500px"},{footer:P((()=>[T("span",$,[U(C,{type:"primary",onClick:u[4]||(u[4]=e=>me.value=!1)},{default:P((()=>[ee])),_:1})])])),default:P((()=>[ne.value?(M(),O("div",Y,[(M(!0),O(E,null,R(ne.value,(e=>(M(),O("video",{key:e,style:{width:"125px",height:"135px"},cover:"",src:e,onClick:a=>z(b)(e)},null,8,Z)))),128))])):q("",!0)])),_:1},8,["modelValue"]),U(x,{modelValue:ve.value,"onUpdate:modelValue":u[7]||(u[7]=e=>ve.value=e),title:"编辑视频",width:"380px",onClose:_e},{default:P((()=>[D((M(),I(ge,{model:z(ye)},{default:P((()=>[U(ke,{label:"视频上传",required:"","label-width":"90px"},{default:P((()=>[U(v,{ref_key:"upVideo",ref:fe,modelValue:z(ye).url,"onUpdate:modelValue":u[6]||(u[6]=e=>z(ye).url=e),type:"video","max-size":200,"exname-list":o,msg:"只能上传"+o.join("、")+"视频，不超过200M，推荐尺寸1280*720",onError:be,onSuccess:we},null,8,["modelValue","msg"])])),_:1}),T("div",ae,[U(C,{onClick:_e},{default:P((()=>[le])),_:1}),U(C,{type:"primary",disabled:!z(ye).url,onClick:he},{default:P((()=>[te])),_:1},8,["disabled"])])])),_:1},8,["model"])),[[Ve,t.value]])])),_:1},8,["modelValue"]),U(y,{modelValue:ie.value,"onUpdate:modelValue":u[8]||(u[8]=e=>ie.value=e),onSuccess:pe},null,8,["modelValue"])])}}})),[["__scopeId","data-v-7dbe6266"]]);export{oe as default};
