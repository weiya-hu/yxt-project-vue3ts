import{q as l,f as e,_ as a,o as s,t as i,a as o,w as c,v as t,V as d,F as u,a2 as v,c as n,u as r,Z as f,U as p,aw as m,ax as _,b as k,S as y}from"./vue.89ed3d48.js";import{_ as g,e as b,z as h,f as x,p as C}from"./index.547c0c45.js";import{a as w,l as z,c as V}from"./index.3b31d7d7.js";import{g as j,a as U,b as M,d as q,s as F}from"./service.99381dce.js";import{M as S}from"./Mypage.a738c27c.js";import{M as D}from"./MyEmpty.c87e98e1.js";import{M as E}from"./MyDialog.e1451ef4.js";import{p as I}from"./pointer.3a1f7926.js";import{c as R}from"./collection-tag.8afbf903.js";import"./request.356cbcf4.js";import"./empty.f131d8fb.js";const Z=l=>(m("data-v-6fdaa6f2"),l=l(),_(),l),A={class:"tutorials_page"},B=p(" 首页展示"),G={class:"color999"},H={key:0,class:"imgs_list flex"},J={class:"imgbox"},K=["src"],L=["onClick"],N=["onClick"],O={class:"imginfo"},P={class:"imgname els"},Q={class:"imglink fcs"},T={class:"fcc"},W={class:"fsc imgicon"},X={class:"fcs"},Y=Z((()=>t("span",null,"0",-1))),$=["onClick"],ll={class:"fsc f1"},el=p("所有教程"),al={class:"color999"},sl=p("+ 添加"),il={key:0,class:"imgs_list flex fww"},ol={class:"imgbox"},cl=["src"],tl={key:0,class:"is_top_show fcc"},dl=Z((()=>t("div",null,"展示中",-1))),ul=["onClick"],vl=["onClick"],nl={class:"imginfo"},rl={class:"imgname els"},fl={class:"imglink fcs"},pl={class:"fcc"},ml={class:"fsc imgicon"},_l={class:"fcs"},kl=Z((()=>t("span",null,"0",-1))),yl={class:"fcs"},gl=["onClick"],bl=["onClick"],hl={key:0,class:"poolbox"},xl=["src"],Cl={key:1,class:"fc fcc"},wl=Z((()=>t("div",{class:"file_name"},"点击添加",-1))),zl={class:"fcs btns fjend mt20"},Vl=p("取消"),jl=p("提交");var Ul=g(l({setup(l){const m=e([]),_=async()=>{const{status:l,body:e}=await j({status:1});1==l&&(m.value=e)};_();const g=e(1),Z=e(20),Ul=e(0),Ml=e([]),ql=async()=>{const{status:l,body:e}=await U({size:Z.value,current:g.value});1==l&&(Ul.value=e.total,Ml.value=e.records)};ql();const Fl=(l,e=!1)=>{const a=e?m.value.map((l=>l.cover_url)):Ml.value.map((l=>l.cover_url));w(a,l)},Sl=()=>{Zl.value.resetFields(),Al.value={},Dl.value=!1},Dl=e(!1),El=[{value:1,label:"分类一"},{value:2,label:"分类二"},{value:3,label:"分类三"},{value:4,label:"分类四"},{value:5,label:"分类五"}],Il=a({video_type:[{required:!0,message:"请选择分类！",trigger:"change"}]}),Rl=a({link:"",video_type:""}),Zl=e(),Al=e({});b.on("sel_tutorials",(l=>{Al.value=l}));const Bl=()=>{Zl.value.validate((async l=>{if(l){const{status:l}=await M({id:Al.value.id,link_url:Rl.link,video_type:Rl.video_type});1==l&&(Sl(),ql())}}))},Gl=async(l,e)=>{const{status:a}=await F({id:e||Al.value.id,status:l});1==a&&(ql(),_())},Hl=e(!1),Jl=e(""),Kl=async()=>{const{status:l}=await q({id:Jl.value});1==l&&(ql(),_(),Hl.value=!1)};return(l,e)=>{const a=k("el-icon"),_=k("el-link"),b=k("el-card"),j=k("el-button"),U=k("el-form-item"),M=k("el-option"),q=k("el-select"),F=k("el-input"),Ll=k("el-form"),Nl=k("el-dialog");return s(),i("div",A,[o(b,{class:"mycard"},{header:c((()=>[t("div",null,[B,t("span",G,"（"+d(m.value.length)+"）",1)])])),default:c((()=>[m.value.length?(s(),i("div",H,[(s(!0),i(u,null,v(m.value,((l,e)=>(s(),i("div",{class:"imgs_item",key:l.id},[t("div",J,[t("img",{src:l.cover_url,alt:""},null,8,K),t("div",{class:"lookicon fcc lookhover",onClick:l=>Fl(e,!0)},[o(a,{size:"20px"},{default:c((()=>[o(r(h))])),_:1})],8,L),t("div",{class:"videoicon fcc lookhover",onClick:e=>r(z)(l.video_url)},[o(a,{size:"40px"},{default:c((()=>[o(r(x))])),_:1})],8,N)]),t("div",O,[t("div",P,d(l.video_name),1),t("div",Q,[t("span",T,d(l.link_url?"链接：":"无链接"),1),l.link_url?(s(),n(_,{key:0,type:"primary",target:"_blank",href:"//"+l.link_url},{default:c((()=>[p(d(l.link_url),1)])),_:2},1032,["href"])):y("",!0)]),t("div",W,[t("div",X,[o(a,{size:"14px"},{default:c((()=>[o(r(I))])),_:1}),Y]),t("div",{onClick:e=>Gl(0,l.id),class:"chover dfcolor"},"下架",8,$)])])])))),128))])):(s(),n(D,{key:1}))])),_:1}),o(b,{class:"mycard mt20"},{header:c((()=>[t("div",ll,[t("div",null,[el,t("span",al,"（"+d(Ul.value)+"）",1)]),o(j,{type:"primary",onClick:e[0]||(e[0]=l=>Dl.value=!0)},{default:c((()=>[sl])),_:1})])])),default:c((()=>[Ml.value.length?(s(),i("div",il,[(s(!0),i(u,null,v(Ml.value,((l,e)=>(s(),i("div",{class:"imgs_item mb20",key:l.id},[t("div",ol,[t("img",{src:l.cover_url,alt:""},null,8,cl),1==l.status?(s(),i("div",tl,[o(a,{size:"14px"},{default:c((()=>[o(r(R))])),_:1}),dl])):y("",!0),t("div",{class:"lookicon fcc lookhover",onClick:l=>Fl(e)},[o(a,{size:"20px"},{default:c((()=>[o(r(h))])),_:1})],8,ul),t("div",{class:"videoicon fcc lookhover",onClick:e=>r(z)(l.video_url)},[o(a,{size:"40px"},{default:c((()=>[o(r(x))])),_:1})],8,vl)]),t("div",nl,[t("div",rl,d(l.video_name),1),t("div",fl,[t("span",pl,d(l.link_url?"链接：":"无链接"),1),l.link_url?(s(),n(_,{key:0,type:"primary",target:"_blank",href:"//"+l.link_url},{default:c((()=>[p(d(l.link_url),1)])),_:2},1032,["href"])):y("",!0)]),t("div",ml,[t("div",_l,[o(a,{size:"14px"},{default:c((()=>[o(r(I))])),_:1}),kl]),t("div",yl,[0==l.status?(s(),i("div",{key:0,onClick:e=>{return a=l.id,Jl.value=a,void(Hl.value=!0);var a},class:"chover dfcolor mr20"},"删除",8,gl)):y("",!0),t("div",{onClick:e=>Gl(1==l.status?0:1,l.id),class:"chover dfcolor"},d(1==l.status?"下架":"上架"),9,bl)])])])])))),128))])):(s(),n(D,{key:1})),o(S,{total:Ul.value,page:g.value,"onUpdate:page":e[1]||(e[1]=l=>g.value=l),onChange:ql,size:Z.value,"onUpdate:size":e[2]||(e[2]=l=>Z.value=l)},null,8,["total","page","size"])])),_:1}),o(E,{modelValue:Hl.value,"onUpdate:modelValue":e[3]||(e[3]=l=>Hl.value=l),msg:"确认删除此视频?",onSure:Kl},null,8,["modelValue"]),o(Nl,{modelValue:Dl.value,"onUpdate:modelValue":e[9]||(e[9]=l=>Dl.value=l),title:"添加视频",width:"380px",onClose:Sl},{default:c((()=>[o(Ll,{model:r(Rl),rules:r(Il),ref_key:"addFormRef",ref:Zl},{default:c((()=>[o(U,{label:"选择视频",required:"","label-width":"90px"},{default:c((()=>[t("div",{class:"sel_pool fcc",onClick:e[6]||(e[6]=l=>r(V)("sel_tutorials",2,!0))},[Al.value.id?(s(),i("div",hl,[t("img",{src:Al.value.cover_url,alt:""},null,8,xl),t("div",{class:"lookicon fcc lookhover",onClick:e[4]||(e[4]=f((l=>r(w)([Al.value.cover_url],0)),["stop"]))},[o(a,{size:"14px"},{default:c((()=>[o(r(h))])),_:1})]),t("div",{class:"videoicon fcc lookhover",onClick:e[5]||(e[5]=f((l=>r(z)(Al.value.video_url)),["stop"]))},[o(a,{size:"20px"},{default:c((()=>[o(r(x))])),_:1})])])):(s(),i("div",Cl,[o(a,null,{default:c((()=>[o(r(C))])),_:1}),wl]))])])),_:1}),o(U,{label:"视频分类",prop:"video_type","label-width":"90px"},{default:c((()=>[o(q,{modelValue:r(Rl).video_type,"onUpdate:modelValue":e[7]||(e[7]=l=>r(Rl).video_type=l),placeholder:"请选择视频分类",class:"f1"},{default:c((()=>[(s(),i(u,null,v(El,(l=>o(M,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),o(U,{label:"添加链接",prop:"link","label-width":"90px"},{default:c((()=>[o(F,{modelValue:r(Rl).link,"onUpdate:modelValue":e[8]||(e[8]=l=>r(Rl).link=l),placeholder:"请输入链接"},null,8,["modelValue"])])),_:1}),t("div",zl,[o(j,{onClick:Sl},{default:c((()=>[Vl])),_:1}),o(j,{type:"primary",onClick:Bl,disabled:!Al.value.id},{default:c((()=>[jl])),_:1},8,["disabled"])])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-6fdaa6f2"]]);export{Ul as default};
