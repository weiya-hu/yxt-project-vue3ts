var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,u=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e},i=(e,t)=>a(e,l(t));import{s as d}from"./Search.c6490aa8.js";import{M as p}from"./MyPage.ec8730f9.js";import{M as n}from"./MyDataTable.b1cc2f7b.js";import{M as c}from"./MyDialog.af4e3110.js";import{M as m}from"./MyEmpty.05634dfb.js";import{M as v}from"./MyUpload.9d0ccb69.js";import{R as y}from"./Refuse.6328bf9c.js";import{e as f,l as b}from"./index.ddcc2e3e.js";import{a as _,b as w,c as k,e as h,h as j,v as g}from"./custom.8dc21408.js";import{_ as C}from"./index.83d90a4b.js";import{G as V,g as x,j as M,o as O,H as U,a as P,w as z,C as D,k as S,_ as I,c as E,P as R,aa as T,I as q,a0 as N,a1 as G,b as H,ae as A}from"./vue.73bee448.js";import"./date.23847c74.js";import"./index.f6907697.js";import"./login.486a2ba7.js";import"./request.aac31659.js";import"./findb.9ba46f68.js";import"./empty.f131d8fb.js";const B={class:"mytable"},F={class:"fcs"},J=G("编辑"),K=G("驳回原因"),L=G("详情"),Q={key:3},W=G("下载附件"),X=G("通过"),Y=G("驳回"),Z={key:0,class:"img-dialog"},$=["src","onClick"],ee={class:"dialog-footer"},ae=G("确认"),le={class:"fcs btns fjend mt20"},te=G("取消"),oe=G("提交");var se=C(V(i(u({},{name:"CustomVideo"}),{setup(e,{expose:a}){const l=x([{type:"text",lable:"需求ID",prop:"id",width:120},{type:"text",lable:"账户名",prop:"user_name",width:120},{type:"text",lable:"客户名称",prop:"company_name",width:180},{type:"text",lable:"标题",prop:"title",width:150},{type:"text-tooltip",lable:"描述",prop:"detail",width:120},{type:"date",lable:"创建日期",prop:"create_time",width:110},{type:"status",lable:"状态",prop:"status",width:100}]),t=x(!1),o=x(!1),s=[".mp4"],r=x(0),C=x(10),V=x(1),G=x([]),se=x(!1),re=x(""),ue=M({userName:"",status:"",create_time:""}),ie=()=>{ue.userName="",ue.status="",ue.create_time="",Ce()},de=e=>{V.value=1,Ce()},pe=x(!1),ne=x(),ce=async e=>{const a={id:ne.value,fail_reason:e},{status:l,body:t}=await w(a);l&&(pe.value=!1,Ce())},me=async e=>{const a=await k({id:e});1==a.status&&(window.location.href=a.body.attach_url)},ve=x(!1),ye=x([]),fe=x(""),be=x(!1),_e=M({url:""}),we=x(),ke=e=>{f(e),t.value=!1},he=()=>{o.value=!1,we.value.clear(),be.value=!1,Ce()},je=async e=>{_e.url=e,await j({order_id:fe.value,url:_e.url}),o.value=!1,he(),Ce()},ge=async()=>{o.value=!0,we.value.submit()};a({getData:me});const Ce=async()=>{t.value=!0;const e=await g(i(u({size:C.value,current:V.value},ue),{startTime:ue.create_time?ue.create_time[0]:null,endTime:ue.create_time?ue.create_time[1]:null}));t.value=!1,1==e.status&&(r.value=e.body.total,G.value=e.body.records)};return Ce(),(e,a)=>{const u=H("el-option"),i=H("el-link"),f=H("el-table-column"),w=H("el-table"),k=H("el-card"),j=H("el-button"),g=H("el-dialog"),x=H("el-form-item"),M=H("el-form"),Ve=A("loading");return O(),U("div",B,[P(d,{modelValue:D(ue),"onUpdate:modelValue":a[0]||(a[0]=e=>S(ue)?ue.value=e:ue=e),onSearch:de,onReset:ie},{default:z((()=>[P(u,{label:"全部",value:"null"}),P(u,{label:"待处理",value:"1"}),P(u,{label:"已受理",value:"2"}),P(u,{label:"被驳回",value:"3"}),P(u,{label:"已完成",value:"4"})])),_:1},8,["modelValue"]),P(k,{class:"mycard mt20"},{default:z((()=>[I((O(),E(w,{data:G.value,border:"",style:{width:"100%"},"row-class-name":"my-data-table-row"},{empty:z((()=>[P(m)])),default:z((()=>[(O(!0),U(R,null,T(l.value,((e,a)=>(O(),E(n,{key:a,type:e.type,width:e.width,lable:e.lable,prop:e.prop},null,8,["type","width","lable","prop"])))),128)),P(f,{width:"150",label:"操作"},{default:z((({row:e})=>[q("div",F,[2==e.status?(O(),E(i,{key:0,type:"primary",onClick:a=>{return l=e.id,be.value=!0,void(fe.value=l);var l}},{default:z((()=>[J])),_:2},1032,["onClick"])):N("",!0),3==e.status?(O(),E(i,{key:1,type:"primary",onClick:a=>{re.value=e.fail_reason,se.value=!0}},{default:z((()=>[K])),_:2},1032,["onClick"])):N("",!0),4==e.status?(O(),E(i,{key:2,type:"primary",onClick:a=>(async e=>{const a=await h({id:e});1==a.status&&(ye.value=a.body.list),ve.value=!0})(e.id)},{default:z((()=>[L])),_:2},1032,["onClick"])):N("",!0),1==e.status?(O(),U("div",Q,[e.attach_url?(O(),E(i,{key:0,type:"primary",class:"fcss",onClick:a=>me(e.id)},{default:z((()=>[W])),_:2},1032,["onClick"])):N("",!0),P(i,{type:"primary",class:"fcss",onClick:a=>(async e=>{await _({id:e}),Ce()})(e.id)},{default:z((()=>[X])),_:2},1032,["onClick"]),P(i,{type:"primary",onClick:a=>{return l=e.id,pe.value=!0,void(ne.value=l);var l}},{default:z((()=>[Y])),_:2},1032,["onClick"])])):N("",!0)])])),_:1})])),_:1},8,["data"])),[[Ve,t.value]]),P(p,{page:V.value,"onUpdate:page":a[1]||(a[1]=e=>V.value=e),size:C.value,"onUpdate:size":a[2]||(a[2]=e=>C.value=e),total:r.value,onChange:Ce},null,8,["page","size","total"])])),_:1}),P(c,{modelValue:se.value,"onUpdate:modelValue":a[3]||(a[3]=e=>se.value=e),msg:re.value,title:"驳回原因",btn:1},null,8,["modelValue","msg"]),P(g,{modelValue:ve.value,"onUpdate:modelValue":a[5]||(a[5]=e=>ve.value=e),title:"详情视频",width:"500px"},{footer:z((()=>[q("span",ee,[P(j,{type:"primary",onClick:a[4]||(a[4]=e=>ve.value=!1)},{default:z((()=>[ae])),_:1})])])),default:z((()=>[ye.value?(O(),U("div",Z,[(O(!0),U(R,null,T(ye.value,(e=>(O(),U("video",{key:e,style:{width:"125px",height:"135px"},cover:"",src:e,onClick:a=>D(b)(e)},null,8,$)))),128))])):N("",!0)])),_:1},8,["modelValue"]),P(g,{modelValue:be.value,"onUpdate:modelValue":a[7]||(a[7]=e=>be.value=e),title:"编辑视频",width:"380px",onClose:he},{default:z((()=>[I((O(),E(M,{model:D(_e)},{default:z((()=>[P(x,{label:"视频上传",required:"","label-width":"90px"},{default:z((()=>[P(v,{ref_key:"upVideo",ref:we,modelValue:D(_e).url,"onUpdate:modelValue":a[6]||(a[6]=e=>D(_e).url=e),type:"video","max-size":200,"exname-list":s,msg:"只能上传"+s.join("、")+"视频，不超过200M，推荐尺寸1280*720",onError:ke,onSuccess:je},null,8,["modelValue","msg"])])),_:1}),q("div",le,[P(j,{onClick:he},{default:z((()=>[te])),_:1}),P(j,{type:"primary",disabled:!D(_e).url,onClick:ge},{default:z((()=>[oe])),_:1},8,["disabled"])])])),_:1},8,["model"])),[[Ve,o.value]])])),_:1},8,["modelValue"]),P(y,{modelValue:pe.value,"onUpdate:modelValue":a[8]||(a[8]=e=>pe.value=e),onSuccess:ce},null,8,["modelValue"])])}}})),[["__scopeId","data-v-ec2a58c0"]]);export{se as default};
