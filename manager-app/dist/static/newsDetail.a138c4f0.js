import{G as a,g as e,o as t,H as l,a as s,I as n,a2 as d,C as u,X as r,a0 as o,c,w as i,P as v,aa as m,aw as b,ax as y,a1 as p,az as _,b as f}from"./vue.73bee448.js";import{D as w}from"./DetailsHeader.68af4fd0.js";import{M as k}from"./MyDialog.fa242f68.js";import{f as g}from"./date.23847c74.js";import{z as h,A as M,B as x,C,w as D,x as j,y as I,D as V}from"./website.8ab3a6a7.js";import{_ as z}from"./index.e8c232ab.js";import"./request.55f6c0c4.js";const B={class:"article_details"},H={class:"content"},F={class:"title"},U={class:"nav-tips"},q=(a=>(b("data-v-df197418"),a=a(),y(),a))((()=>n("br",null,null,-1))),A={class:"ss"},E={key:0},L=p("审核"),N=p("上线"),T=p("下线"),G=p("编辑"),P=p("删除"),S={class:"news-container"},X=["innerHTML"],$={class:"mytable"},J={class:"mytable"},K=p("微信"),O={key:0},Q={class:"comment-content"},R={class:"comment-card"},W={class:"userInfo"},Y={class:"name"},Z={class:"utime"},aa={class:"c-content"},ea={class:"shield"};var ta=z(a({setup(a){const b=_().query.id,y=e({title:"",content:"",create_time:0,type_name:"",readed:0,state:0,fail_reason:""}),p=async()=>{const a=await h({id:b});1===a.status&&(y.value=a.body)};p();const z=e(1),ta=e([{name:"文章正文",txtId:1,num:0},{name:"收藏用户",txtId:2,num:0},{name:"收藏用户",txtId:3,num:0},{name:"评论列表",txtId:4,num:0}]),la=e([]);(async()=>{const a=await M({current:z.value,size:10,id:b});1===a.status&&(la.value=a.body.records,ta.value[1].num=a.body.total)})();const sa=e([]);(async()=>{const a=await x({current:z.value,size:10,id:b});1===a.status&&(sa.value=a.body.records,ta.value[2].num=a.body.total)})();const na=e([]);(async()=>{const a=await C({current:z.value,size:10,id:b});1===a.status&&(na.value=a.body.records,ta.value[3].num=a.body.total)})();const da=e(""),ua=async()=>{await D({id:da.value}).then((a=>{1===a.status&&p()}))},ra=e(""),oa=async()=>{await j({id:ra.value}).then((a=>{1===a.status&&p()}))},ca=e(!1),ia=async()=>{I({id:b}).then((a=>{1===a.status&&(ca.value=!1,window.location.href="/website/news")}))};return(a,e)=>{const p=f("el-button"),_=f("el-card"),h=f("el-tab-pane"),M=f("el-table-column"),x=f("el-table"),C=f("el-avatar"),D=f("el-switch"),j=f("el-tabs");return t(),l("div",B,[s(w),n("div",H,[n("div",F,d(y.value.title),1),n("div",U,[n("span",null,"分类："+d(y.value.type_name),1),n("span",null,"查看量："+d(y.value.readed),1),n("span",null,d(u(g)(new Date(y.value.create_time),"yyyy-MM-dd hh:mm:ss")),1),q,n("div",A,[n("div",{class:"point",style:r(4==y.value.state?"background: #24BD13;":"background:#E40000;")},null,4),n("span",null,d(4==y.value.state?"在线":"离线"),1),n("div",{class:"s-tips",style:r(1==y.value.state?"background: rgba(255, 183, 0, 0.1);color: #FFB700 ;":2==y.value.state?"background: rgba(228, 0, 0, 0.1);color: #E40000 ;":0==y.value.state?"background:  rgba(81, 161, 252, 0.1);color: #51A1FC ;":"background: rgba(36, 189, 19, 0.1);color: #24BD13 ;")},d(1==y.value.state?"审核中":2==y.value.state?"已驳回":0==y.value.state?"草稿":"已通过"),5),2==y.value.state?(t(),l("p",E,"驳回原因："+d(y.value.fail_reason),1)):o("",!0)]),1==y.value.state?(t(),c(p,{key:0,class:"bdc_btn",onClick:e[0]||(e[0]=a=>{return e=u(b),void(window.location.href="/website/examine?id="+e);var e})},{default:i((()=>[L])),_:1})):o("",!0),3==y.value.state?(t(),c(p,{key:1,class:"bdc_btn",onClick:e[1]||(e[1]=a=>{return e=u(b),ra.value=e,void oa();var e})},{default:i((()=>[N])),_:1})):o("",!0),4==y.value.state?(t(),c(p,{key:2,class:"bdc_btn",onClick:e[2]||(e[2]=a=>{return e=u(b),da.value=e,void ua();var e})},{default:i((()=>[T])),_:1})):o("",!0),0==y.value.state||3==y.value.state?(t(),c(p,{key:3,class:"bdc_btn",onClick:e[3]||(e[3]=e=>a.$router.push("/website/news/newsadd?id="+u(b)))},{default:i((()=>[G])),_:1})):o("",!0),2==y.value.state||3==y.value.state||0==y.value.state?(t(),c(p,{key:4,class:"bdc_btn",onClick:e[4]||(e[4]=a=>(u(b),void(ca.value=!0)))},{default:i((()=>[P])),_:1})):o("",!0)]),n("div",S,[s(j,{type:"border-card"},{default:i((()=>[s(h,{label:"文章正文"},{default:i((()=>[s(_,{class:"mycard"},{default:i((()=>[n("div",{class:"news-txt",innerHTML:y.value.content},null,8,X)])),_:1})])),_:1}),s(h,{label:"收藏用户("+ta.value[1].num+")"},{default:i((()=>[s(_,{class:"mycard"},{default:i((()=>[n("div",$,[s(x,{data:la.value,border:""},{default:i((()=>[s(M,{property:"name",label:"用户名"}),s(M,{property:"mobile",label:"电话"}),s(M,{property:"create_time",label:"收藏时间"},{default:i((({row:a})=>[n("div",null,d(u(g)(new Date(Number(a.create_time)),"yyyy-MM-dd")),1)])),_:1})])),_:1},8,["data"])])])),_:1})])),_:1},8,["label"]),s(h,{label:"分享用户("+ta.value[2].num+")"},{default:i((()=>[s(_,{class:"mycard"},{default:i((()=>[n("div",J,[s(x,{data:sa.value,border:""},{default:i((()=>[s(M,{property:"name",label:"用户名"}),s(M,{property:"mobile",label:"电话"}),s(M,{property:"shareMode",label:"分享方式"},{default:i((()=>[K])),_:1}),s(M,{property:"time",label:"分享时间"},{default:i((({row:a})=>[a.create_time?(t(),l("div",O,d(u(g)(new Date(Number(a.create_time)),"yyyy-MM-dd")),1)):o("",!0)])),_:1})])),_:1},8,["data"])])])),_:1})])),_:1},8,["label"]),s(h,{label:"评论列表("+ta.value[3].num+")"},{default:i((()=>[n("ul",Q,[(t(!0),l(v,null,m(na.value,((a,e)=>(t(),l("li",{key:a.id},[s(_,{class:"mycard"},{default:i((()=>[n("div",R,[s(C,{class:"avater",src:a.head_url},null,8,["src"]),n("div",W,[n("span",Y,d(a.name),1),n("span",Z,d(u(g)(new Date(a.update_time),"yyyy-MM-dd hh:mm:ss")),1),n("span",aa,d(a.content),1)]),n("div",ea,[a.id?(t(),c(D,{key:0,modelValue:a.del_flag,"onUpdate:modelValue":e=>a.del_flag=e,"active-value":1,"inactive-value":0,onChange:e=>(async a=>{a.id&&await V({id:a.id})})(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])):o("",!0)])])])),_:2},1024)])))),128))])])),_:1},8,["label"])])),_:1}),s(k,{modelValue:ca.value,"onUpdate:modelValue":e[5]||(e[5]=a=>ca.value=a),msg:"确认删除这条数据吗?",onSure:ia},null,8,["modelValue"])])])])}}}),[["__scopeId","data-v-df197418"]]);export{ta as default};
