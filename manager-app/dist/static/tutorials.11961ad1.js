import{q as l,f as a,_ as e,o as s,t as i,a as o,w as c,v as d,V as t,F as u,a2 as v,c as n,u as r,Z as f,U as p,aw as m,ax as _,b as k,S as y}from"./vue.89ed3d48.js";import{_ as g,e as b,z as h,f as x,p as C}from"./index.fdca730b.js";import{a as w,l as z,c as V}from"./index.eaa6bc8d.js";import{g as j,a as U,b as M,d as q,s as F}from"./service.38df9cc3.js";import{M as S}from"./Mypage.92221329.js";import{M as D}from"./MyEmpty.72a1acd1.js";import{M as E}from"./MyDialog.50f39301.js";import{p as I}from"./pointer.dcf57f00.js";import{c as R}from"./collection-tag.a852357c.js";import"./request.aa9790cc.js";import"./empty.f131d8fb.js";const Z=l=>(m("data-v-6fdaa6f2"),l=l(),_(),l),A={class:"tutorials_page"},B=p(" 首页展示"),G={class:"color999"},H={key:0,class:"imgs_list flex"},J={class:"imgbox"},K=["src"],L=["onClick"],N=["onClick"],O={class:"imginfo"},P={class:"imgname els"},Q={class:"imglink fcs"},T={class:"fcc"},W={class:"fsc imgicon"},X={class:"fcs"},Y=Z((()=>d("span",null,"0",-1))),$=["onClick"],ll={class:"fsc f1"},al=p("所有教程"),el={class:"color999"},sl=p("+ 添加"),il={key:0,class:"imgs_list flex fww"},ol={class:"imgbox"},cl=["src"],dl={key:0,class:"is_top_show fcc"},tl=Z((()=>d("div",null,"展示中",-1))),ul=["onClick"],vl=["onClick"],nl={class:"imginfo"},rl={class:"imgname els"},fl={class:"imglink fcs"},pl={class:"fcc"},ml={class:"fsc imgicon"},_l={class:"fcs"},kl=Z((()=>d("span",null,"0",-1))),yl={class:"fcs"},gl=["onClick"],bl=["onClick"],hl={key:0,class:"poolbox"},xl=["src"],Cl={key:1,class:"fc fcc"},wl=Z((()=>d("div",{class:"file_name"},"点击添加",-1))),zl={class:"fcs btns fjend mt20"},Vl=p("取消"),jl=p("提交");var Ul=g(l({setup(l){const m=a([]),_=async()=>{const{status:l,body:a}=await j({status:1});1==l&&(m.value=a)};_();const g=a(1),Z=a(20),Ul=a(0),Ml=a([]),ql=async()=>{const{status:l,body:a}=await U({size:Z.value,current:g.value});1==l&&(Ul.value=a.total,Ml.value=a.records)};ql();const Fl=(l,a=!1)=>{const e=a?m.value.map((l=>l.cover_url)):Ml.value.map((l=>l.cover_url));w(e,l)},Sl=()=>{Zl.value.resetFields(),Al.value={},Dl.value=!1},Dl=a(!1),El=[{value:1,label:"分类一"},{value:2,label:"分类二"},{value:3,label:"分类三"},{value:4,label:"分类四"},{value:5,label:"分类五"}],Il=e({video_type:[{required:!0,message:"请选择分类！",trigger:"change"}]}),Rl=e({link:"",video_type:""}),Zl=a(),Al=a({});b.on("sel_tutorials",(l=>{Al.value=l}));const Bl=()=>{Zl.value.validate((async l=>{if(l){const{status:l}=await M({id:Al.value.id,link_url:Rl.link,video_type:Rl.video_type});1==l&&(Sl(),ql())}}))},Gl=async(l,a)=>{const{status:e}=await F({id:a||Al.value.id,status:l});1==e&&(ql(),_())},Hl=a(!1),Jl=a(""),Kl=async()=>{const{status:l}=await q({id:Jl.value});1==l&&(ql(),_(),Hl.value=!1)};return(l,a)=>{const e=k("el-icon"),_=k("el-link"),b=k("el-card"),j=k("el-button"),U=k("el-form-item"),M=k("el-option"),q=k("el-select"),F=k("el-input"),Ll=k("el-form"),Nl=k("el-dialog");return s(),i("div",A,[o(b,{class:"mycard"},{header:c((()=>[d("div",null,[B,d("span",G,"（"+t(m.value.length)+"）",1)])])),default:c((()=>[m.value.length?(s(),i("div",H,[(s(!0),i(u,null,v(m.value,((l,a)=>(s(),i("div",{class:"imgs_item",key:l.id},[d("div",J,[d("img",{src:l.cover_url,alt:""},null,8,K),d("div",{class:"lookicon fcc lookhover",onClick:l=>Fl(a,!0)},[o(e,{size:"20px"},{default:c((()=>[o(r(h))])),_:1})],8,L),d("div",{class:"videoicon fcc lookhover",onClick:a=>r(z)(l.video_url)},[o(e,{size:"40px"},{default:c((()=>[o(r(x))])),_:1})],8,N)]),d("div",O,[d("div",P,t(l.video_name),1),d("div",Q,[d("span",T,t(l.link_url?"链接：":"无链接"),1),l.link_url?(s(),n(_,{key:0,type:"primary",target:"_blank",href:"//"+l.link_url},{default:c((()=>[p(t(l.link_url),1)])),_:2},1032,["href"])):y("",!0)]),d("div",W,[d("div",X,[o(e,{size:"14px"},{default:c((()=>[o(r(I))])),_:1}),Y]),d("div",{onClick:a=>Gl(0,l.id),class:"chover dfcolor"},"下架",8,$)])])])))),128))])):(s(),n(D,{key:1}))])),_:1}),o(b,{class:"mycard mt20"},{header:c((()=>[d("div",ll,[d("div",null,[al,d("span",el,"（"+t(Ul.value)+"）",1)]),o(j,{type:"primary",onClick:a[0]||(a[0]=l=>Dl.value=!0)},{default:c((()=>[sl])),_:1})])])),default:c((()=>[Ml.value.length?(s(),i("div",il,[(s(!0),i(u,null,v(Ml.value,((l,a)=>(s(),i("div",{class:"imgs_item mb20",key:l.id},[d("div",ol,[d("img",{src:l.cover_url,alt:""},null,8,cl),1==l.status?(s(),i("div",dl,[o(e,{size:"14px"},{default:c((()=>[o(r(R))])),_:1}),tl])):y("",!0),d("div",{class:"lookicon fcc lookhover",onClick:l=>Fl(a)},[o(e,{size:"20px"},{default:c((()=>[o(r(h))])),_:1})],8,ul),d("div",{class:"videoicon fcc lookhover",onClick:a=>r(z)(l.video_url)},[o(e,{size:"40px"},{default:c((()=>[o(r(x))])),_:1})],8,vl)]),d("div",nl,[d("div",rl,t(l.video_name),1),d("div",fl,[d("span",pl,t(l.link_url?"链接：":"无链接"),1),l.link_url?(s(),n(_,{key:0,type:"primary",target:"_blank",href:"//"+l.link_url},{default:c((()=>[p(t(l.link_url),1)])),_:2},1032,["href"])):y("",!0)]),d("div",ml,[d("div",_l,[o(e,{size:"14px"},{default:c((()=>[o(r(I))])),_:1}),kl]),d("div",yl,[0==l.status?(s(),i("div",{key:0,onClick:a=>{return e=l.id,Jl.value=e,void(Hl.value=!0);var e},class:"chover dfcolor mr20"},"删除",8,gl)):y("",!0),d("div",{onClick:a=>Gl(1==l.status?0:1,l.id),class:"chover dfcolor"},t(1==l.status?"下架":"上架"),9,bl)])])])])))),128))])):(s(),n(D,{key:1})),o(S,{total:Ul.value,page:g.value,"onUpdate:page":a[1]||(a[1]=l=>g.value=l),onChange:ql,size:Z.value,"onUpdate:size":a[2]||(a[2]=l=>Z.value=l)},null,8,["total","page","size"])])),_:1}),o(E,{modelValue:Hl.value,"onUpdate:modelValue":a[3]||(a[3]=l=>Hl.value=l),msg:"确认删除此视频?",onSure:Kl},null,8,["modelValue"]),o(Nl,{modelValue:Dl.value,"onUpdate:modelValue":a[9]||(a[9]=l=>Dl.value=l),title:"添加视频",width:"380px",onClose:Sl},{default:c((()=>[o(Ll,{model:r(Rl),rules:r(Il),ref_key:"addFormRef",ref:Zl},{default:c((()=>[o(U,{label:"选择视频",required:"","label-width":"90px"},{default:c((()=>[d("div",{class:"sel_pool fcc",onClick:a[6]||(a[6]=l=>r(V)("sel_tutorials",2,!0))},[Al.value.id?(s(),i("div",hl,[d("img",{src:Al.value.cover_url,alt:""},null,8,xl),d("div",{class:"lookicon fcc lookhover",onClick:a[4]||(a[4]=f((l=>r(w)([Al.value.cover_url],0)),["stop"]))},[o(e,{size:"14px"},{default:c((()=>[o(r(h))])),_:1})]),d("div",{class:"videoicon fcc lookhover",onClick:a[5]||(a[5]=f((l=>r(z)(Al.value.video_url)),["stop"]))},[o(e,{size:"20px"},{default:c((()=>[o(r(x))])),_:1})])])):(s(),i("div",Cl,[o(e,null,{default:c((()=>[o(r(C))])),_:1}),wl]))])])),_:1}),o(U,{label:"视频分类",prop:"video_type","label-width":"90px"},{default:c((()=>[o(q,{modelValue:r(Rl).video_type,"onUpdate:modelValue":a[7]||(a[7]=l=>r(Rl).video_type=l),placeholder:"请选择视频分类",class:"f1"},{default:c((()=>[(s(),i(u,null,v(El,(l=>o(M,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),o(U,{label:"添加链接",prop:"link","label-width":"90px"},{default:c((()=>[o(F,{modelValue:r(Rl).link,"onUpdate:modelValue":a[8]||(a[8]=l=>r(Rl).link=l),placeholder:"请输入链接"},null,8,["modelValue"])])),_:1}),d("div",zl,[o(j,{onClick:Sl},{default:c((()=>[Vl])),_:1}),o(j,{type:"primary",onClick:Bl,disabled:!Al.value.id},{default:c((()=>[jl])),_:1},8,["disabled"])])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-6fdaa6f2"]]);export{Ul as default};
