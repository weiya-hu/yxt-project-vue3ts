var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,u=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&i(e,l,a[l]);return e},r=(e,t)=>a(e,l(t));import{G as d,g as c,j as p,o as n,H as m,a as v,w as y,C as f,k as b,_,c as k,P as w,aa as h,I as j,a0 as C,a6 as g,a1 as x,aw as V,ax as O,b as M,ae as z}from"./vue.73bee448.js";import{s as P}from"./Search.def8d8b2.js";import{M as U}from"./MyPage.d1b769b5.js";import{M as D}from"./MyDataTable.73116663.js";import{M as I}from"./MyDialog.6c30b2a5.js";import{M as S}from"./MyEmpty.4bf64012.js";import{R}from"./Refuse.4b2b7c50.js";import{a as T,l as q,c as E}from"./index.aeb80721.js";import{_ as N,e as G,z as H,f as A,p as B}from"./index.2ae254bd.js";import{a as F,b as J,c as K,e as L,h as Q,v as W}from"./custom.621e226c.js";import"./date.23847c74.js";import"./index.4593ca48.js";import"./login.f44d1550.js";import"./request.b31e1908.js";import"./findb.e7abe767.js";import"./empty.f131d8fb.js";const X=e=>(V("data-v-2e3e9e44"),e=e(),O(),e),Y={class:"mytable"},Z={class:"fcs"},$=x("编辑"),ee=x("驳回原因"),ae=x("详情"),le={key:3},te=x("下载附件"),oe=x("通过"),se=x("驳回"),ie={key:0,class:"img-dialog"},ue=["src","onClick"],re={class:"dialog-footer"},de=x("确认"),ce={key:0,class:"poolbox"},pe=["src"],ne={key:1,class:"fc fcc"},me=X((()=>j("div",{class:"file_name"},"点击添加",-1))),ve={class:"fcs btns fjend mt20"},ye=x("取消"),fe=x("提交");var be=N(d(r(u({},{name:"CustomVideo"}),{setup(e,{expose:a}){const l=c([{type:"text",lable:"需求ID",prop:"id",width:120},{type:"text",lable:"账户名",prop:"user_name",width:120},{type:"text",lable:"客户名称",prop:"company_name",width:180},{type:"text",lable:"标题",prop:"title",width:150},{type:"text-tooltip",lable:"描述",prop:"detail",width:120},{type:"date",lable:"创建日期",prop:"create_time",width:110},{type:"status",lable:"状态",prop:"status",width:100}]),t=c(!1),o=c(0),s=c(10),i=c(1),d=c([]),x=c(!1),V=c(""),O=p({userName:"",status:"",create_time:""}),N=()=>{O.userName="",O.status="",O.create_time="",Me()},X=e=>{i.value=1,Me()},be=c(!1),_e=c(),ke=async e=>{const a={id:_e.value,fail_reason:e},{status:l,body:t}=await J(a);l&&(be.value=!1,Me())},we=async e=>{const a=await K({id:e});1==a.status&&(window.location.href=a.body.attach_url)},he=c(!1),je=c([]),Ce=c(""),ge=c(!1),xe=p({}),Ve=()=>{Oe.value={},ge.value=!1},Oe=c({});G.on("video_custom",(e=>{Oe.value=e}));a({getData:we});const Me=async()=>{t.value=!0;const e=await W(r(u({size:s.value,current:i.value},O),{startTime:O.create_time[0],endTime:O.create_time[1]}));t.value=!1,1==e.status&&(o.value=e.body.total,d.value=e.body.records)};return Me(),(e,a)=>{const u=M("el-option"),r=M("el-link"),c=M("el-table-column"),p=M("el-table"),G=M("el-card"),J=M("el-button"),K=M("el-dialog"),W=M("el-icon"),ze=M("el-form-item"),Pe=M("el-form"),Ue=z("loading");return n(),m("div",Y,[v(P,{modelValue:f(O),"onUpdate:modelValue":a[0]||(a[0]=e=>b(O)?O.value=e:O=e),onSearch:X,onReset:N},{default:y((()=>[v(u,{label:"待处理",value:"1"}),v(u,{label:"已受理",value:"2"}),v(u,{label:"被驳回",value:"3"}),v(u,{label:"已完成",value:"4"})])),_:1},8,["modelValue"]),v(G,{class:"mycard mt20"},{default:y((()=>[_((n(),k(p,{data:d.value,border:"",style:{width:"100%"},"row-class-name":"my-data-table-row"},{empty:y((()=>[v(S)])),default:y((()=>[(n(!0),m(w,null,h(l.value,((e,a)=>(n(),k(D,{key:a,type:e.type,width:e.width,lable:e.lable,prop:e.prop},null,8,["type","width","lable","prop"])))),128)),v(c,{width:"150",label:"操作"},{default:y((({row:e})=>[j("div",Z,[2==e.status?(n(),k(r,{key:0,type:"primary",onClick:a=>{return l=e.id,ge.value=!0,void(Ce.value=l);var l}},{default:y((()=>[$])),_:2},1032,["onClick"])):C("",!0),3==e.status?(n(),k(r,{key:1,type:"primary",onClick:a=>{V.value=e.fail_reason,x.value=!0}},{default:y((()=>[ee])),_:2},1032,["onClick"])):C("",!0),4==e.status?(n(),k(r,{key:2,type:"primary",onClick:a=>(async e=>{const a=await L({id:e});1==a.status&&(je.value=a.body.list),he.value=!0})(e.id)},{default:y((()=>[ae])),_:2},1032,["onClick"])):C("",!0),1==e.status?(n(),m("div",le,[e.attach_url?(n(),k(r,{key:0,type:"primary",class:"fcss",onClick:a=>we(e.id)},{default:y((()=>[te])),_:2},1032,["onClick"])):C("",!0),v(r,{type:"primary",class:"fcss",onClick:a=>(async e=>{await F({id:e}),Me()})(e.id)},{default:y((()=>[oe])),_:2},1032,["onClick"]),v(r,{type:"primary",onClick:a=>{return l=e.id,be.value=!0,void(_e.value=l);var l}},{default:y((()=>[se])),_:2},1032,["onClick"])])):C("",!0)])])),_:1})])),_:1},8,["data"])),[[Ue,t.value]]),v(U,{page:i.value,"onUpdate:page":a[1]||(a[1]=e=>i.value=e),size:s.value,"onUpdate:size":a[2]||(a[2]=e=>s.value=e),total:o.value,onChange:Me},null,8,["page","size","total"])])),_:1}),v(I,{modelValue:x.value,"onUpdate:modelValue":a[3]||(a[3]=e=>x.value=e),msg:V.value,title:"驳回原因",btn:1},null,8,["modelValue","msg"]),v(K,{modelValue:he.value,"onUpdate:modelValue":a[5]||(a[5]=e=>he.value=e),title:"详情视频",width:"500px"},{footer:y((()=>[j("span",re,[v(J,{type:"primary",onClick:a[4]||(a[4]=e=>he.value=!1)},{default:y((()=>[de])),_:1})])])),default:y((()=>[je.value?(n(),m("div",ie,[(n(!0),m(w,null,h(je.value,(e=>(n(),m("video",{key:e,style:{width:"125px",height:"135px"},cover:"",src:e,onClick:a=>f(q)(e)},null,8,ue)))),128))])):C("",!0)])),_:1},8,["modelValue"]),v(K,{modelValue:ge.value,"onUpdate:modelValue":a[10]||(a[10]=e=>ge.value=e),title:"编辑视频",width:"380px",onClose:Ve},{default:y((()=>[v(Pe,{model:f(xe)},{default:y((()=>[v(ze,{label:"选择素材",required:"","label-width":"90px"},{default:y((()=>[j("div",{class:"sel_pool fcc",onClick:a[8]||(a[8]=e=>f(E)("video_custom",2))},[Oe.value.id?(n(),m("div",ce,[j("img",{src:Oe.value.cover_url||Oe.value.source_url,alt:""},null,8,pe),j("div",{class:"lookicon fcc lookhover",onClick:a[6]||(a[6]=g((e=>f(T)([Oe.value.cover_url||Oe.value.source_url],0)),["stop"]))},[v(W,{size:"14px"},{default:y((()=>[v(f(H))])),_:1})]),2==Oe.value.source_type?(n(),m("div",{key:0,class:"videoicon fcc lookhover",onClick:a[7]||(a[7]=g((e=>f(q)(Oe.value.source_url)),["stop"]))},[v(W,{size:"20px"},{default:y((()=>[v(f(A))])),_:1})])):C("",!0)])):(n(),m("div",ne,[v(W,null,{default:y((()=>[v(f(B))])),_:1}),me]))])])),_:1}),j("div",ve,[v(J,{onClick:Ve},{default:y((()=>[ye])),_:1}),v(J,{type:"primary",disabled:!Oe.value.id,onClick:a[9]||(a[9]=e=>(async(e,a)=>{const l=[];l.push(Oe.value.source_url);const{status:t}=await Q({order_id:Ce.value,urls:l});1==t&&(Ve(),Me())})())},{default:y((()=>[fe])),_:1},8,["disabled"])])])),_:1},8,["model"])])),_:1},8,["modelValue"]),v(R,{modelValue:be.value,"onUpdate:modelValue":a[11]||(a[11]=e=>be.value=e),onSuccess:ke},null,8,["modelValue"])])}}})),[["__scopeId","data-v-2e3e9e44"]]);export{be as default};
