import{D as a}from"./DetailsHeader.535ed972.js";import{G as e,g as s,o as t,H as i,I as r,a as l,w as d,a2 as c,a1 as n,aw as o,ax as u,az as f,av as m,b as v}from"./vue.73bee448.js";import{c as p,f as b,h}from"./system.94993074.js";import{m as y}from"./index.5d447f79.js";import{_}from"./index.12522c67.js";import"./request.b31062f2.js";import"./login.76a81bb1.js";import"./index.a86c6ab1.js";const j=a=>(o("data-v-69adf357"),a=a(),u(),a),k={class:"editstaff_page"},x={class:"fsc"},w=n("确认修改"),g={class:"flex"},C={class:"lt"},E=j((()=>r("div",{class:"fw600 pl20"},"修改对象",-1))),H={class:"fsc mt20 bgceee"},I={class:"rt f1 ml20"},K=j((()=>r("div",{class:"fw600 mb20 pt20"},"修改权限",-1)));var q=_(e({setup(e){const n=y(),o=f(),u=m(),_=o.query.id,j={children:"children",label:"name"},q=s(),z=s([]);(async()=>{const a=await p();z.value=a.body,N()})();const D=s({dept_name:[],name:"",per_list:[]}),N=async()=>{if(!_)return;const a=await b({id:_});D.value=a.body;const e=s([]);D.value.per_list.forEach((a=>{z.value.forEach((s=>{s.children.forEach((s=>{s.children?s.children.forEach((s=>{s.permission_id==a&&e.value.push(Number(a))})):s.permission_id==a&&e.value.push(Number(a))}))}))})),q.value.setCheckedKeys(e.value)},G=async()=>{if(!_)return;const a=q.value.getCheckedKeys(),e=q.value.getHalfCheckedKeys(),s=a.concat(e);if(1==(await h({buid:_,list:s})).status){if(n.state.userInfo.buid==_)return void n.setUserLv().then((a=>{-1!=a.indexOf("24")?u.back():u.replace("/index")}));u.back()}};return(e,s)=>{const n=v("el-button"),o=v("el-tree"),u=v("el-card");return t(),i("div",k,[r("div",x,[l(a),l(n,{type:"primary",onClick:G,size:"large"},{default:d((()=>[w])),_:1})]),l(u,{class:"mt20"},{default:d((()=>[r("div",g,[r("div",C,[E,r("div",H,[r("div",null,c(D.value.name),1),r("span",null,c(D.value.dept_name.join()),1)])]),r("div",I,[K,l(o,{data:z.value,props:j,"node-key":"permission_id","show-checkbox":"",ref_key:"lvtree",ref:q},null,8,["data"])])])])),_:1})])}}}),[["__scopeId","data-v-69adf357"]]);export{q as default};
