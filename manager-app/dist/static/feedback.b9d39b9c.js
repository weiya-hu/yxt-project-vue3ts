import{x as a,y as e,z as l,A as s}from"./service.37ee0b77.js";import{M as t}from"./MyEmpty.4b7c1ae9.js";import{M as o}from"./MyDialog.fa242f68.js";import{M as d}from"./MyPage.9eee5859.js";import{G as u,g as n,o as r,H as i,a as c,w as m,I as p,ab as v,a1 as f,a2 as b,W as y,b as _}from"./vue.73bee448.js";import"./request.55f6c0c4.js";import"./index.e8c232ab.js";import"./empty.f131d8fb.js";const g={class:"feedback_page"},w=p("div",null,"反馈列表",-1),j={class:"mytable"},M={class:"fcs"},k={class:"fcs"},z=f("修改状态"),C=f("已处理"),h=f("未处理"),x=p("div",{class:"line"},null,-1),U=f("删除"),V=u({setup(u){const V=n([]);(async()=>{const{status:e,body:l}=await a();1==e&&(V.value=l,G())})();const q=n([]),A=n(1),D=n(20),E=n(0),G=async()=>{const{status:a,body:l}=await e({size:D.value,current:A.value});1==a&&(E.value=l.total,q.value=l.records)},H=async a=>{const{status:e}=await l({id:a[1],status:a[0]});1==e&&G()},I=n(""),P=n(!1),S=async()=>{1==(await s({id:I.value})).status&&(P.value=!1,G())};return(a,e)=>{const l=_("el-table-column"),s=_("el-link"),u=_("el-dropdown-item"),n=_("el-dropdown-menu"),W=_("el-dropdown"),B=_("el-table"),F=_("el-card");return r(),i("div",g,[c(F,{class:"mycard"},{header:m((()=>[w])),default:m((()=>[p("div",j,[c(B,{data:q.value,border:"",draggable:""},{empty:m((()=>[c(t)])),default:m((()=>[c(l,{label:"类型"},v({_:2},[V.value.length?{name:"default",fn:m((({row:a})=>[f(b(V.value.find((e=>e.id==a.type_id)).name),1)]))}:void 0]),1024),c(l,{prop:"content",label:"反馈内容"}),c(l,{prop:"mobile",label:"联系电话"}),c(l,{prop:"status",label:"处理状态"},{default:m((({row:a})=>[p("div",M,[p("div",{class:y(["status_dot",1==a.status?"sdot_g":"sdot_r"])},null,2),p("div",null,b(1==a.status?"已处理":"未处理"),1)])])),_:1}),c(l,{label:"操作"},{default:m((({row:a})=>[p("div",k,[c(W,{trigger:"click",onCommand:H},{dropdown:m((()=>[c(n,null,{default:m((()=>[c(u,{command:[1,a.id]},{default:m((()=>[C])),_:2},1032,["command"]),c(u,{command:[0,a.id]},{default:m((()=>[h])),_:2},1032,["command"])])),_:2},1024)])),default:m((()=>[c(s,{type:"primary"},{default:m((()=>[z])),_:1})])),_:2},1024),x,c(s,{type:"primary",onClick:e=>{return l=a.id,I.value=l,void(P.value=!0);var l}},{default:m((()=>[U])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])]),c(d,{total:E.value,page:A.value,"onUpdate:page":e[0]||(e[0]=a=>A.value=a),onChange:G,size:D.value,"onUpdate:size":e[1]||(e[1]=a=>D.value=a)},null,8,["total","page","size"])])),_:1}),c(o,{modelValue:P.value,"onUpdate:modelValue":e[2]||(e[2]=a=>P.value=a),msg:"此反馈记录删除后无法撤回，请谨慎删除！",onSure:S},null,8,["modelValue"])])}}});export{V as default};
