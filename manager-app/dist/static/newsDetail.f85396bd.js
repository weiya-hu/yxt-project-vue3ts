import{q as a,f as e,o as l,t,a as s,v as d,V as n,u,M as o,S as r,c,w as i,F as v,a2 as m,aw as y,ax as b,U as p,az as _,b as f}from"./vue.89ed3d48.js";import{D as w}from"./DetailsHeader.a6f50e8f.js";import{M as h}from"./MyDialog.e1451ef4.js";import{f as k}from"./date.23847c74.js";import{x as g,y as M,z as D,A as x,u as B,v as V,w as j,B as C}from"./website.a7cc2447.js";import{_ as E}from"./index.547c0c45.js";import"./request.356cbcf4.js";const I={class:"article_details"},z={class:"content"},F={class:"title"},U={class:"nav-tips"},q=(a=>(y("data-v-5357e2dc"),a=a(),b(),a))((()=>d("br",null,null,-1))),H={class:"ss"},A={key:0},L=p("审核"),S=p("上线"),T=p("下线"),G=p("删除"),J={class:"news-container"},K=["innerHTML"],N=p("微信"),O={key:0},P={class:"comment-content"},Q={class:"comment-card"},R={class:"userInfo"},W={class:"name"},X={class:"utime"},Y={class:"c-content"},Z={class:"shield"};var $=E(a({setup(a){const y=_().query.id,b=e({title:"",content:"",create_time:0,type_name:"",readed:0,state:0,fail_reason:""}),p=async()=>{const a=await g({id:y});1==a.status&&(b.value=a.body)};p();const E=e(1),$=e([{name:"文章正文",txtId:1,num:0},{name:"收藏用户",txtId:2,num:0},{name:"收藏用户",txtId:3,num:0},{name:"评论列表",txtId:4,num:0}]),aa=e([]);(async()=>{const a=await M({current:E.value,size:10,id:y});1==a.status&&(aa.value=a.body.records,$.value[1].num=a.body.total)})();const ea=e([]);(async()=>{const a=await D({current:E.value,size:10,id:y});1==a.status&&(ea.value=a.body.records,$.value[2].num=a.body.total)})();const la=e([]);(async()=>{const a=await x({current:E.value,size:10,id:y});1==a.status&&(la.value=a.body.records,$.value[3].num=a.body.total)})();const ta=e(""),sa=async()=>{await B({id:ta.value}).then((a=>{1==a.status&&p()}))},da=e(""),na=async()=>{await V({id:da.value}).then((a=>{1==a.status&&p()}))},ua=e(!1),oa=async()=>{j({id:y}).then((a=>{1==a.status&&(ua.value=!1,window.location.href="/website/news")}))};return(a,e)=>{const p=f("el-button"),_=f("el-card"),g=f("el-tab-pane"),M=f("el-table-column"),D=f("el-table"),x=f("el-avatar"),B=f("el-switch"),V=f("el-tabs");return l(),t("div",I,[s(w),d("div",z,[d("div",F,n(b.value.title),1),d("div",U,[d("span",null,"分类："+n(b.value.type_name),1),d("span",null,"查看量："+n(b.value.readed),1),d("span",null,n(u(k)(new Date(b.value.create_time),"yyyy-MM-dd hh:mm:ss")),1),q,d("div",H,[d("div",{class:"point",style:o(4==b.value.state?"background: #24BD13;":"background:#E40000;")},null,4),d("span",null,n(4==b.value.state?"在线":"离线"),1),d("div",{class:"s-tips",style:o(1==b.value.state?"background: rgba(255, 183, 0, 0.1);color: #FFB700 ;":2==b.value.state?"background: rgba(228, 0, 0, 0.1);color: #E40000 ;":0==b.value.state?"background:  rgba(81, 161, 252, 0.1);color: #51A1FC ;":"background: rgba(36, 189, 19, 0.1);color: #24BD13 ;")},n(1==b.value.state?"审核中":2==b.value.state?"已驳回":0==b.value.state?"草稿":"已通过"),5),2==b.value.state?(l(),t("p",A,"驳回原因："+n(b.value.fail_reason),1)):r("",!0)]),1==b.value.state?(l(),c(p,{key:0,color:"#2D68EB",class:"bdc_btn",plain:"",onClick:e[0]||(e[0]=a=>{return e=u(y),void(window.location.href="/website/examine?id="+e);var e})},{default:i((()=>[L])),_:1})):r("",!0),3==b.value.state?(l(),c(p,{key:1,color:"#2D68EB",class:"bdc_btn",plain:"",onClick:e[1]||(e[1]=a=>{return e=u(y),da.value=e,void na();var e})},{default:i((()=>[S])),_:1})):r("",!0),4==b.value.state?(l(),c(p,{key:2,color:"#2D68EB",class:"bdc_btn",plain:"",onClick:e[2]||(e[2]=a=>{return e=u(y),ta.value=e,void sa();var e})},{default:i((()=>[T])),_:1})):r("",!0),2==b.value.state||3==b.value.state||0==b.value.state?(l(),c(p,{key:3,color:"#2D68EB",class:"bdc_btn",plain:"",onClick:e[3]||(e[3]=a=>(u(y),void(ua.value=!0)))},{default:i((()=>[G])),_:1})):r("",!0)]),d("div",J,[s(V,{type:"border-card"},{default:i((()=>[s(g,{label:"文章正文"},{default:i((()=>[s(_,{class:"mycard"},{default:i((()=>[d("div",{innerHTML:b.value.content},null,8,K)])),_:1})])),_:1}),s(g,{label:"收藏用户("+$.value[1].num+")"},{default:i((()=>[s(_,{class:"mycard"},{default:i((()=>[d("div",null,[s(D,{data:aa.value,border:""},{default:i((()=>[s(M,{property:"name",label:"用户名",width:"230"}),s(M,{property:"mobile",label:"电话",width:"230"}),s(M,{property:"create_time",label:"收藏时间",width:"200"},{default:i((({row:a})=>[d("div",null,n(u(k)(new Date(a.create_time),"yyyy-MM-dd")),1)])),_:1})])),_:1},8,["data"])])])),_:1})])),_:1},8,["label"]),s(g,{label:"分享用户("+$.value[2].num+")"},{default:i((()=>[s(_,{class:"mycard"},{default:i((()=>[d("div",null,[s(D,{data:ea.value,border:""},{default:i((()=>[s(M,{property:"name",label:"用户名",width:"200"}),s(M,{property:"mobile",label:"电话",width:"200"}),s(M,{property:"shareMode",label:"分享方式",width:"200"},{default:i((()=>[N])),_:1}),s(M,{property:"time",label:"分享时间",width:"230"},{default:i((({row:a})=>[a.create_time?(l(),t("div",O,n(u(k)(new Date(a.create_time),"yyyy-MM-dd")),1)):r("",!0)])),_:1})])),_:1},8,["data"])])])),_:1})])),_:1},8,["label"]),s(g,{label:"评论列表("+$.value[3].num+")"},{default:i((()=>[d("ul",P,[(l(!0),t(v,null,m(la.value,((a,e)=>(l(),t("li",{key:a.id},[s(_,{class:"mycard"},{default:i((()=>[d("div",Q,[s(x,{class:"avater",src:a.head_url},null,8,["src"]),d("div",R,[d("span",W,n(a.name),1),d("span",X,n(u(k)(new Date(a.update_time),"yyyy-MM-dd hh:mm:ss")),1),d("span",Y,n(a.content),1)]),d("div",Z,[a.id?(l(),c(B,{key:0,"active-value":1,"inactive-value":0,modelValue:a.del_flag,"onUpdate:modelValue":e=>a.del_flag=e,onChange:e=>(async a=>{a.id&&await C({id:a.id})})(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])):r("",!0)])])])),_:2},1024)])))),128))])])),_:1},8,["label"])])),_:1}),s(h,{modelValue:ua.value,"onUpdate:modelValue":e[4]||(e[4]=a=>ua.value=a),msg:"确认删除这条数据吗?",onSure:oa},null,8,["modelValue"])])])])}}}),[["__scopeId","data-v-5357e2dc"]]);export{$ as default};
