import{G as s,b as a,o as t,H as e,a as l,w as i,I as o,a2 as n,C as u,a0 as d,W as c,V as r,aw as m,ax as v,g as f,c as b,a1 as p,az as _,av as y}from"./vue.73bee448.js";import{m as j}from"./index.e7a3094c.js";import{D as x}from"./DetailsHeader.945bd2c0.js";import{f as k}from"./date.23847c74.js";import{_ as w}from"./index.e7872df1.js";import{j as g,u as O,l as N,m as h}from"./service.c6d790f0.js";import{M as C}from"./MyDialog.bcd62144.js";import"./login.df5d82cd.js";import"./request.7878c8f3.js";import"./index.3ae96932.js";import"./tinymce.5416ef76.js";const D=s=>(m("data-v-27284439"),s=s(),v(),s),H={class:"article_details_component"},L={class:"title pt16"},M={class:"fcs info mb16"},V=D((()=>o("div",null,"分类：",-1))),q={class:"info_content mr20"},I=D((()=>o("div",null,"查看量：",-1))),K={class:"info_content mr20"},T=D((()=>o("div",null,"发布事件：",-1))),$={key:0,class:"info_content mr20"},z={key:0,class:"status fcs"},G={class:"btns pt20"},S=["innerHTML"];var U=w(s({props:{info:null,statusObj:{default:()=>({1:{className:"sdot_b",text:"草稿"},2:{className:"sdot_r",text:"离线"},3:{className:"sdot_g",text:"在线"}})},typeObj:{default:()=>({0:""})}},setup:s=>(m,v)=>{const f=a("el-card");return t(),e("div",H,[l(f,{class:"mycard mt16 mb16"},{default:i((()=>[o("div",L,n(s.info.title),1),o("div",M,[V,o("div",q,n(s.typeObj[Number(s.info.article_type)]),1),I,o("div",K,n(s.info.hits),1),T,s.info.create_time?(t(),e("div",$,n(u(k)(new Date(s.info.create_time))),1)):d("",!0)]),s.statusObj[s.info.status]?(t(),e("div",z,[o("div",{class:c(["status_dot",s.statusObj[s.info.status].className])},null,2),o("div",null,n(s.statusObj[s.info.status].text),1)])):d("",!0),o("div",G,[r(m.$slots,"btns",{},void 0,!0)])])),_:3}),l(f,{class:"mycard mt16 content"},{default:i((()=>[o("div",{innerHTML:s.info.text,class:"line_height_no"},null,8,S)])),_:1})])}}),[["__scopeId","data-v-27284439"]]);const W={class:"article_details"},A=p("编辑"),B=p("删除"),E=s({setup(s){const o=_(),u=y(),c=o.query.id,r=f({});(async()=>{const{status:s,body:a}=await g();1==s&&(r.value=a,v())})();const m=f({}),v=async()=>{const{status:s,body:a}=await O({id:c});1==s&&(m.value=a)},k=j(),w=async()=>{1==(await N({id:c,status:2==m.value.status?3:2})).status&&(v(),k.setKeepList([]))},D=f(""),H=f(!1),L=async()=>{1==(await h({id:D.value})).status&&(H.value=!1,k.setKeepList([]),u.back())};return(s,o)=>{const u=a("el-button");return t(),e("div",W,[l(x),l(U,{info:m.value,"type-obj":r.value},{btns:i((()=>[1!=m.value.status?(t(),b(u,{key:0,class:"bdc_btn",onClick:w},{default:i((()=>[p(n(2==m.value.status?"上线":"下线"),1)])),_:1})):d("",!0),3!=m.value.status?(t(),b(u,{key:1,class:"bdc_btn",onClick:o[0]||(o[0]=a=>s.$router.push("addarticle?id="+m.value.id))},{default:i((()=>[A])),_:1})):d("",!0),3!=m.value.status?(t(),b(u,{key:2,class:"bdc_btn",onClick:o[1]||(o[1]=s=>{return a=m.value.id,D.value=a,void(H.value=!0);var a})},{default:i((()=>[B])),_:1})):d("",!0)])),_:1},8,["info","type-obj"]),l(C,{modelValue:H.value,"onUpdate:modelValue":o[2]||(o[2]=s=>H.value=s),msg:"此文章删除后无法撤回，请谨慎删除！",onSure:L},null,8,["modelValue"])])}}});export{E as default};
