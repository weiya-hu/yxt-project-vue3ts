import{D as e}from"./DetailsHeader.a6f50e8f.js";import{q as a,f as s,o as t,t as i,v as r,a as d,w as l,V as c,U as n,aw as o,ax as u,az as f,av as v,b as m}from"./vue.89ed3d48.js";import{c as p,f as b,h}from"./system.62dc0c71.js";import{m as y}from"./index.f47187aa.js";import{_,g as j}from"./index.547c0c45.js";import"./request.356cbcf4.js";import"./login.ed01525e.js";import"./index.3b31d7d7.js";const k=e=>(o("data-v-1d326bde"),e=e(),u(),e),x={class:"editstaff_page"},w={class:"fsc"},g=n("确认修改"),C={class:"flex"},E={class:"lt"},q=k((()=>r("div",{class:"fw600 pl20"},"修改对象",-1))),K={class:"fsc mt20 bgceee"},z={class:"rt f1 ml20"},D=k((()=>r("div",{class:"fw600 mb20 pt20"},"修改权限",-1)));var H=_(a({setup(a){const n=y(),o=f(),u=v(),_=o.query.id,k={children:"children",label:"name"},H=s(),I=s([]);(async()=>{const e=await p();I.value=e.body,U()})();const N=s({dept_name:[],name:"",per_list:[]}),U=async()=>{if(!_)return;const e=await b({id:_});N.value=e.body;const a=s([]);N.value.per_list.forEach((e=>{I.value.forEach((s=>{s.children.forEach((s=>{s.children?s.children.forEach((s=>{s.permission_id==e&&a.value.push(Number(e))})):s.permission_id==e&&a.value.push(Number(e))}))}))})),H.value.setCheckedKeys(a.value)},L=async()=>{if(!_)return;const e=H.value.getCheckedKeys(),a=H.value.getHalfCheckedKeys(),s=e.concat(a);if(1==(await h({buid:_,list:s})).status){if(n.state.userInfo.buid==_)return void n.setUserLv().then((e=>{j(e),-1!=e.indexOf("24")?u.back():u.replace("/index")}));u.back()}};return(a,s)=>{const n=m("el-button"),o=m("el-tree"),u=m("el-card");return t(),i("div",x,[r("div",w,[d(e),d(n,{type:"primary",onClick:L,size:"large"},{default:l((()=>[g])),_:1})]),d(u,{class:"mt20"},{default:l((()=>[r("div",C,[r("div",E,[q,r("div",K,[r("div",null,c(N.value.name),1),r("span",null,c(N.value.dept_name.join()),1)])]),r("div",z,[D,d(o,{data:I.value,props:k,"node-key":"permission_id","show-checkbox":"",ref_key:"lvtree",ref:H},null,8,["data"])])])])),_:1})])}}}),[["__scopeId","data-v-1d326bde"]]);export{H as default};
