var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s;import{G as i,u as r,g as o,j as c,o as n,H as m,a as v,w as f,a1 as _,a2 as p,C as y,c as b,a0 as h,P as g,aa as k,I as j,_ as w,$ as V,aw as C,ax as x,az as O,b as D,W as P}from"./vue.73bee448.js";import{D as U}from"./DetailsHeader.159e29ee.js";import{M as q}from"./MyDialog.d8f2932e.js";import{b as M,c as z,s as H,a as I,d as F,e as S,f as $,h as E}from"./users.4d9fc8d6.js";import{f as G}from"./date.23847c74.js";import{m as K}from"./index.46ed79dd.js";import{a as L,b as R,s as W}from"./index.6c11e008.js";import{g as A}from"./config.b191a432.js";import{_ as B,h as J}from"./index.aefc30ce.js";import"./request.65081ce8.js";import"./login.857dc837.js";import"./tinymce.5416ef76.js";const N=e=>(C("data-v-466edd92"),e=e(),x(),e),Q={class:"userinfo_page"},T=_("管理员"),X={class:"fsc f1"},Y=N((()=>j("span",null,"产品与服务",-1))),Z=_("管理"),ee={class:"pro_list fw fcs"},ae={class:"p_name fcs"},le=_("产品："),se=["src"],te={class:"v_name"},ue={class:"time"},de=N((()=>j("div",{class:"fw600"},"已购产品",-1))),ie={key:0,class:"fjend mb20"},re=_("+ 新增"),oe={class:"addbox mb20"},ce={class:"fjend"},ne=_("确定"),me=_("取消"),ve={class:"pro_list"},fe={class:"p_name fcs"},_e=_("产品："),pe=["src"],ye={class:"v_name"},be={class:"time"},he={class:"rt"},ge={class:"fcc"},ke=_(" 确定 "),je=_(" 取消 ");var we=B(i({setup(e){const i=K(),C=r((()=>i.state.addressHash)),x=O().query.id,B=o({}),N=o({});(async()=>{if(x){const e=await M({id:x});1==e.status&&(B.value=e.body);const a=await z({id:x});1==a.status&&(N.value=a.body)}})();const we=async()=>{B.value.id&&(await H({id:x}),i.setKeepList([]))},Ve=o([]);(async()=>{const e=await I();1==e.status&&(Ve.value=e.body)})();const Ce=o([]),xe=o([]);(async()=>{const e=await F();1===e.status&&(Ce.value=e.body)})();const Oe=async()=>{const e=await S({uid:x});1===e.status&&(xe.value=e.body)};Oe();const De=()=>{He.value.validate((async e=>{if(e){const e=await $((i=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&d(e,l,a[l]);if(s)for(var l of s(a))u.call(a,l)&&d(e,l,a[l]);return e})({},Ie),r={uid:x},a(i,l(r))));e.status&&(Oe(),Se())}var i,r}))},Pe=o(!1),Ue=o({}),qe=async()=>{const{status:e}=await E({uid:x,id:Ue.value.id});e&&(Oe(),Pe.value=!1)},Me=o(!1),ze=o(!1),He=o(),Ie=c({left_time:"",version_id:""}),Fe=c({left_time:[{required:!0,message:"请选择产品！",trigger:"change"}],version_id:[{required:!0,message:"请选择有效期！",trigger:"change"}]}),Se=()=>{He.value.resetFields(),ze.value=!1},$e=()=>{Se(),Me.value=!1};return(e,a)=>{const l=D("el-descriptions-item"),s=D("el-avatar"),t=D("el-switch"),u=D("el-descriptions"),d=D("el-card"),i=D("el-link"),r=D("el-tag"),o=D("el-button"),c=D("el-option"),x=D("el-select"),O=D("el-form-item"),M=D("el-date-picker"),z=D("el-form"),H=D("el-icon"),I=D("el-drawer");return n(),m("div",Q,[v(U),v(d,{class:"mycard mt20",header:"基本信息"},{default:f((()=>[v(u,{column:2},{default:f((()=>[v(l,{label:"用户名"},{default:f((()=>[_(p(B.value.name),1)])),_:1}),v(l,{label:"头像","class-name":"avater_item","label-class-name":"avater_item_label"},{default:f((()=>[v(s,{size:50,src:B.value.head,class:"lookhover",onClick:a[0]||(a[0]=e=>y(L)([B.value.head],0))},null,8,["src"])])),_:1}),v(l,{label:"真实姓名"},{default:f((()=>[_(p(B.value.real_name||"-"),1)])),_:1}),v(l,{label:"性别"},{default:f((()=>[_(p(1==B.value.sex?"男":2==B.value.sex?"女":"未知"),1)])),_:1}),v(l,{label:"手机号码"},{default:f((()=>[_(p(B.value.mobile),1)])),_:1}),v(l,{label:"邮箱"},{default:f((()=>[_(p(B.value.email||"-"),1)])),_:1}),B.value.id?(n(),b(l,{key:0,label:"地区"},{default:f((()=>[_(p(y(R)(y(W)(B.value.province,B.value.city,B.value.district),y(C))),1)])),_:1})):h("",!0),v(l,{label:"出生日期"},{default:f((()=>[_(p(B.value.birth),1)])),_:1}),v(l,{label:"注册时间"},{default:f((()=>[_(p(y(G)(new Date(B.value.create_time),"yyyy-MM-dd")),1)])),_:1}),v(l,{label:"账号状态"},{default:f((()=>[B.value.id?(n(),b(t,{key:0,"active-value":1,"inactive-value":0,modelValue:B.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>B.value.status=e),onChange:we},null,8,["modelValue"])):h("",!0)])),_:1})])),_:1})])),_:1}),v(d,{class:"mycard mt20",header:"会员信息"},{default:f((()=>[v(u,{column:2},{default:f((()=>[v(l,{label:"邀请码"},{default:f((()=>[_(p(B.value.invite_code),1)])),_:1}),B.value.level&&Ve.value.length?(n(),b(l,{key:0,label:"会员等级"},{default:f((()=>[_(p(Ve.value.find((e=>e.id==B.value.level)).name),1)])),_:1})):h("",!0),v(l,{label:"邀请者"},{default:f((()=>[_(p(B.value.inviter||"-"),1)])),_:1}),v(l,{label:"会员积分"},{default:f((()=>[_(p(B.value.integral),1)])),_:1}),v(l,{label:"下级用户数"},{default:f((()=>[_(p(B.value.direct_count),1)])),_:1})])),_:1})])),_:1}),v(d,{class:"mycard mt20",header:"企业信息"},{default:f((()=>[(n(!0),m(g,null,k(N.value,((a,s)=>(n(),b(u,{column:2,key:s},{default:f((()=>[v(l,{label:"企业名称"},{default:f((()=>[v(i,{type:"primary",class:"lineh1",onClick:l=>e.$router.push("/users/companydetails?id="+a.id)},{default:f((()=>[_(p(a.name),1)])),_:2},1032,["onClick"]),1==a.type?(n(),b(r,{key:0,class:"ml20"},{default:f((()=>[T])),_:1})):h("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),v(d,{class:"mycard mt20",header:"产品与服务"},{header:f((()=>[j("div",X,[Y,v(o,{type:"primary",onClick:a[2]||(a[2]=e=>Me.value=!0)},{default:f((()=>[Z])),_:1})])])),default:f((()=>[j("div",ee,[(n(!0),m(g,null,k(xe.value,(e=>(n(),m("div",{class:P(["pro_item",y(A)(e.product_id).class]),key:e.id},[j("div",ae,[le,e.thumb_url?(n(),m("img",{key:0,src:e.thumb_url,alt:""},null,8,se)):h("",!0),_(p(e.product_name),1)]),j("div",te,"版本："+p(e.version_name),1),j("div",ue,"有效期至："+p(y(G)(new Date(1*e.left_time))),1)],2)))),128))])])),_:1}),v(I,{modelValue:Me.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Me.value=e),onClose:$e},{title:f((()=>[de])),footer:f((()=>[j("div",ge,[v(o,{type:"primary",onClick:$e},{default:f((()=>[ke])),_:1}),v(o,{onClick:$e},{default:f((()=>[je])),_:1})])])),default:f((()=>[1===B.value.status?(n(),m("div",ie,[v(o,{type:"primary",onClick:a[3]||(a[3]=e=>ze.value=!0)},{default:f((()=>[re])),_:1})])):h("",!0),w(j("div",oe,[v(z,{model:y(Ie),rules:y(Fe),ref_key:"addFormRef",ref:He},{default:f((()=>[v(O,{label:" 产品",prop:"version_id"},{default:f((()=>[v(x,{modelValue:y(Ie).version_id,"onUpdate:modelValue":a[4]||(a[4]=e=>y(Ie).version_id=e),placeholder:"请选择产品",class:"f1"},{default:f((()=>[(n(!0),m(g,null,k(Ce.value,(e=>(n(),b(c,{key:e.version_id,label:e.version_name,value:e.version_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(O,{label:"有效期",prop:"left_time"},{default:f((()=>[v(M,{type:"datetime","value-format":"x",modelValue:y(Ie).left_time,"onUpdate:modelValue":a[5]||(a[5]=e=>y(Ie).left_time=e),placeholder:"请选择有效期",class:"f1"},null,8,["modelValue"])])),_:1}),j("div",ce,[v(o,{type:"primary",onClick:De},{default:f((()=>[ne])),_:1}),v(o,{class:"ml20",onClick:Se},{default:f((()=>[me])),_:1})])])),_:1},8,["model","rules"])],512),[[V,ze.value]]),j("div",ve,[(n(!0),m(g,null,k(xe.value,(e=>(n(),m("div",{class:P(["pro_item fsc",y(A)(e.product_id).class]),key:e.id,style:{"margin-right":"0"}},[j("div",null,[j("div",fe,[_e,e.thumb_url?(n(),m("img",{key:0,src:e.thumb_url,alt:""},null,8,pe)):h("",!0),_(p(e.product_name),1)]),j("div",ye,"版本："+p(e.version_name),1),j("div",be,"有效期至："+p(y(G)(new Date(1*e.left_time))),1)]),j("div",he,[v(H,{class:"chover",size:"16px",onClick:a=>{return l=e,Ue.value=l,void(Pe.value=!0);var l}},{default:f((()=>[v(y(J))])),_:2},1032,["onClick"])])],2)))),128))])])),_:1},8,["modelValue"]),v(q,{modelValue:Pe.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Pe.value=e),msg:"确认删除 “ "+Ue.value.version_name+" ” ?",onSure:qe},null,8,["modelValue","msg"])])}}}),[["__scopeId","data-v-466edd92"]]);export{we as default};
