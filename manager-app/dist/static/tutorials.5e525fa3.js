import{G as l,g as e,j as a,o as s,H as i,a as o,w as c,I as t,a2 as d,P as u,aa as n,c as r,C as v,a6 as f,a1 as p,aw as m,ax as _,b as k,a0 as y}from"./vue.73bee448.js";import{_ as g,e as b,z as h,f as C,p as x}from"./index.43fc5bae.js";import{a as w,l as j,c as z}from"./index.71ace796.js";import{g as V,a as M,b as U,c as q,d as F,s as I}from"./service.8458e64d.js";import{M as D}from"./Mypage.7b20125d.js";import{M as E}from"./MyEmpty.4d1f2d4b.js";import{M as G}from"./MyDialog.ee2e3e0a.js";import{p as H}from"./pointer.e16d1542.js";import{c as N}from"./collection-tag.37a677cb.js";import"./request.10479ac9.js";import"./empty.f131d8fb.js";const O=l=>(m("data-v-7ba2f1cc"),l=l(),_(),l),P={class:"tutorials_page"},R=p(" 首页展示"),S={class:"color999"},A={key:0,class:"imgs_list flex"},B={class:"imgbox"},J=["src"],K=["onClick"],L=["onClick"],Q={class:"imginfo"},T={class:"imgname els"},W={class:"imglink fcs"},X={class:"fcc"},Y={class:"fsc imgicon"},Z={class:"fcs"},$=O((()=>t("span",null,"0",-1))),ll=["onClick"],el={class:"fsc f1"},al=p("所有教程"),sl={class:"color999"},il=p("+ 添加"),ol={key:0,class:"imgs_list flex fww"},cl={class:"imgbox"},tl=["src"],dl={key:0,class:"is_top_show fcc"},ul=O((()=>t("div",null,"展示中",-1))),nl=["onClick"],rl=["onClick"],vl={class:"imginfo"},fl={class:"imgname els"},pl={class:"imglink fcs"},ml={class:"fcc"},_l={class:"fsc imgicon"},kl={class:"fcs"},yl=O((()=>t("span",null,"0",-1))),gl={class:"fcs"},bl=["onClick"],hl=["onClick"],Cl={key:0,class:"poolbox"},xl=["src"],wl={key:1,class:"fc fcc"},jl=O((()=>t("div",{class:"file_name"},"点击添加",-1))),zl={class:"fcs btns fjend mt20"},Vl=p("取消"),Ml=p("提交");var Ul=g(l({setup(l){const m=e([]);(async()=>{const{status:l,body:e}=await V();if(1==l){for(const[l,a]of Object.entries(e))m.value.push({value:Number(l),label:a});g(),Il()}})();const _=e([]),g=async()=>{const{status:l,body:e}=await M({status:1});1==l&&(_.value=e)},O=e(1),Ul=e(20),ql=e(0),Fl=e([]),Il=async()=>{const{status:l,body:e}=await U({size:Ul.value,current:O.value});1==l&&(ql.value=e.total,Fl.value=e.records)},Dl=(l,e=!1)=>{const a=e?_.value.map((l=>l.cover_url)):Fl.value.map((l=>l.cover_url));w(a,l)},El=()=>{Ol.value.resetFields(),Pl.value={},Gl.value=!1},Gl=e(!1),Hl=a({video_type:[{required:!0,message:"请选择分类！",trigger:"change"}]}),Nl=a({link:"",video_type:""}),Ol=e(),Pl=e({});b.on("sel_tutorials",(l=>{Pl.value=l}));const Rl=()=>{Ol.value.validate((async l=>{if(l){const{status:l}=await q({id:Pl.value.id,link_url:Nl.link,video_type:Nl.video_type});1==l&&(El(),Il())}}))},Sl=async(l,e)=>{const{status:a}=await I({id:e||Pl.value.id,status:l});1==a&&(Il(),g())},Al=e(!1),Bl=e(""),Jl=async()=>{const{status:l}=await F({id:Bl.value});1==l&&(Il(),g(),Al.value=!1)};return(l,e)=>{const a=k("el-icon"),g=k("el-link"),b=k("el-card"),V=k("el-button"),M=k("el-form-item"),U=k("el-option"),q=k("el-select"),F=k("el-input"),I=k("el-form"),Kl=k("el-dialog");return s(),i("div",P,[o(b,{class:"mycard"},{header:c((()=>[t("div",null,[R,t("span",S,"（"+d(_.value.length)+"）",1)])])),default:c((()=>[_.value.length?(s(),i("div",A,[(s(!0),i(u,null,n(_.value,((l,e)=>(s(),i("div",{class:"imgs_item",key:l.id},[t("div",B,[t("img",{src:l.cover_url,alt:""},null,8,J),t("div",{class:"lookicon fcc lookhover",onClick:l=>Dl(e,!0)},[o(a,{size:"20px"},{default:c((()=>[o(v(h))])),_:1})],8,K),t("div",{class:"videoicon fcc lookhover",onClick:e=>v(j)(l.video_url)},[o(a,{size:"40px"},{default:c((()=>[o(v(C))])),_:1})],8,L)]),t("div",Q,[t("div",T,d(l.video_name),1),t("div",W,[t("span",X,d(l.link_url?"链接：":"无链接"),1),l.link_url?(s(),r(g,{key:0,type:"primary",target:"_blank",href:"//"+l.link_url},{default:c((()=>[p(d(l.link_url),1)])),_:2},1032,["href"])):y("",!0)]),t("div",Y,[t("div",Z,[o(a,{size:"14px"},{default:c((()=>[o(v(H))])),_:1}),$]),t("div",{onClick:e=>Sl(0,l.id),class:"chover dfcolor"},"下架",8,ll)])])])))),128))])):(s(),r(E,{key:1}))])),_:1}),o(b,{class:"mycard mt20"},{header:c((()=>[t("div",el,[t("div",null,[al,t("span",sl,"（"+d(ql.value)+"）",1)]),o(V,{type:"primary",onClick:e[0]||(e[0]=l=>Gl.value=!0)},{default:c((()=>[il])),_:1})])])),default:c((()=>[Fl.value.length?(s(),i("div",ol,[(s(!0),i(u,null,n(Fl.value,((l,e)=>(s(),i("div",{class:"imgs_item mb20",key:l.id},[t("div",cl,[t("img",{src:l.cover_url,alt:""},null,8,tl),1==l.status?(s(),i("div",dl,[o(a,{size:"14px"},{default:c((()=>[o(v(N))])),_:1}),ul])):y("",!0),t("div",{class:"lookicon fcc lookhover",onClick:l=>Dl(e)},[o(a,{size:"20px"},{default:c((()=>[o(v(h))])),_:1})],8,nl),t("div",{class:"videoicon fcc lookhover",onClick:e=>v(j)(l.video_url)},[o(a,{size:"40px"},{default:c((()=>[o(v(C))])),_:1})],8,rl)]),t("div",vl,[t("div",fl,d(l.video_name),1),t("div",pl,[t("span",ml,d(l.link_url?"链接：":"无链接"),1),l.link_url?(s(),r(g,{key:0,type:"primary",target:"_blank",href:"//"+l.link_url},{default:c((()=>[p(d(l.link_url),1)])),_:2},1032,["href"])):y("",!0)]),t("div",_l,[t("div",kl,[o(a,{size:"14px"},{default:c((()=>[o(v(H))])),_:1}),yl]),t("div",gl,[0==l.status?(s(),i("div",{key:0,onClick:e=>{return a=l.id,Bl.value=a,void(Al.value=!0);var a},class:"chover dfcolor mr20"},"删除",8,bl)):y("",!0),t("div",{onClick:e=>Sl(1==l.status?0:1,l.id),class:"chover dfcolor"},d(1==l.status?"下架":"上架"),9,hl)])])])])))),128))])):(s(),r(E,{key:1})),o(D,{total:ql.value,page:O.value,"onUpdate:page":e[1]||(e[1]=l=>O.value=l),onChange:Il,size:Ul.value,"onUpdate:size":e[2]||(e[2]=l=>Ul.value=l)},null,8,["total","page","size"])])),_:1}),o(G,{modelValue:Al.value,"onUpdate:modelValue":e[3]||(e[3]=l=>Al.value=l),msg:"确认删除此视频?",onSure:Jl},null,8,["modelValue"]),o(Kl,{modelValue:Gl.value,"onUpdate:modelValue":e[9]||(e[9]=l=>Gl.value=l),title:"添加视频",width:"380px",onClose:El},{default:c((()=>[o(I,{model:v(Nl),rules:v(Hl),ref_key:"addFormRef",ref:Ol},{default:c((()=>[o(M,{label:"选择视频",required:"","label-width":"90px"},{default:c((()=>[t("div",{class:"sel_pool fcc",onClick:e[6]||(e[6]=l=>v(z)("sel_tutorials",2,!0))},[Pl.value.id?(s(),i("div",Cl,[t("img",{src:Pl.value.cover_url,alt:""},null,8,xl),t("div",{class:"lookicon fcc lookhover",onClick:e[4]||(e[4]=f((l=>v(w)([Pl.value.cover_url],0)),["stop"]))},[o(a,{size:"14px"},{default:c((()=>[o(v(h))])),_:1})]),t("div",{class:"videoicon fcc lookhover",onClick:e[5]||(e[5]=f((l=>v(j)(Pl.value.video_url)),["stop"]))},[o(a,{size:"20px"},{default:c((()=>[o(v(C))])),_:1})])])):(s(),i("div",wl,[o(a,null,{default:c((()=>[o(v(x))])),_:1}),jl]))])])),_:1}),o(M,{label:"视频分类",prop:"video_type","label-width":"90px"},{default:c((()=>[o(q,{modelValue:v(Nl).video_type,"onUpdate:modelValue":e[7]||(e[7]=l=>v(Nl).video_type=l),placeholder:"请选择视频分类",class:"f1"},{default:c((()=>[(s(!0),i(u,null,n(m.value,(l=>(s(),r(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(M,{label:"添加链接",prop:"link","label-width":"90px"},{default:c((()=>[o(F,{modelValue:v(Nl).link,"onUpdate:modelValue":e[8]||(e[8]=l=>v(Nl).link=l),placeholder:"请输入链接"},null,8,["modelValue"])])),_:1}),t("div",zl,[o(V,{onClick:El},{default:c((()=>[Vl])),_:1}),o(V,{type:"primary",onClick:Rl,disabled:!Pl.value.id},{default:c((()=>[Ml])),_:1},8,["disabled"])])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-7ba2f1cc"]]);export{Ul as default};
