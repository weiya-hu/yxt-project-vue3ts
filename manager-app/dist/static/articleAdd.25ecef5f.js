var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,o=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&l(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&l(e,a,t[a]);return e},c=(e,s)=>t(e,a(s));import{q as d,f as u,o as n,t as p,v as b,a as f,w as m,U as v,az as y,av as j,b as w}from"./vue.89ed3d48.js";import{m as O}from"./index.5003068f.js";import{D as _}from"./DetailsHeader.dc89d7cd.js";import{K as x}from"./KzAddArticle.c5a333bf.js";import{e as g,i as P,j as h}from"./website.0bcef33f.js";import{w as k}from"./index.eaa6bc8d.js";import"./index.fdca730b.js";import"./login.6de82fdd.js";import"./request.aa9790cc.js";import"./Edit.8fc5be14.js";const q={class:"add_article"},D={class:"fsc"},K={class:"btns"},z=v("稍后编辑"),A=v("提交"),C=d({setup(e){const t=O(),a=y(),s=j(),r=a.query.id;r&&(async()=>{const{status:e,body:t}=await g({id:r});if(1==e){if(3==t.status)return k("请下线文章后再编辑"),void s.replace("/website/service/articledetails?id="+r);i.value.setForm({title:t.title,article_type:t.article_type,text:t.text,thumb_url:t.thumb_url})}})();const i=u(),l=u(1),d=async e=>{l.value=e,i.value.submit()},v=async e=>{const{status:a}=r?await P(c(o({},e),{status:l.value,id:r})):await h(c(o({},e),{status:l.value}));1==a&&(t.setKeepList([]),s.replace("/website/service/school"))},C=u([{value:1,label:"分类一"},{value:2,label:"分类二"},{value:3,label:"分类三"},{value:4,label:"分类四"},{value:5,label:"分类五"}]);return(e,t)=>{const a=w("el-button");return n(),p("div",q,[b("div",D,[f(_),b("div",K,[f(a,{class:"bdc_btn",onClick:t[0]||(t[0]=e=>d(1))},{default:m((()=>[z])),_:1}),f(a,{type:"primary",onClick:t[1]||(t[1]=e=>d(2))},{default:m((()=>[A])),_:1})])]),f(x,{ref_key:"addRef",ref:i,needimg:"",needtype:"",needsource:1,onSuccess:v,types:C.value},null,8,["types"])])}}});export{C as default};
