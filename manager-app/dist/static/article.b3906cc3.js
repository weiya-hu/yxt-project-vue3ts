var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&r(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&r(e,t,a[t]);return e},u=(e,l)=>a(e,t(l));import{s as p}from"./Search.c6490aa8.js";import{M as d}from"./MyPage.ec8730f9.js";import{M as c}from"./MyDataTable.b1cc2f7b.js";import{M as n}from"./MyDialog.af4e3110.js";import{M as m}from"./MyEmpty.05634dfb.js";import{R as y}from"./Refuse.6328bf9c.js";import{a as b,b as f,c as v,d as _}from"./custom.8dc21408.js";import{_ as w}from"./index.83d90a4b.js";import{G as j,g as h,j as k,o as g,H as C,a as x,w as O,C as V,k as M,_ as P,c as D,P as U,aa as z,I,a0 as S,a1 as R,b as T,ae as E}from"./vue.73bee448.js";import"./date.23847c74.js";import"./index.ddcc2e3e.js";import"./index.f6907697.js";import"./login.486a2ba7.js";import"./request.aac31659.js";import"./findb.9ba46f68.js";import"./empty.f131d8fb.js";const N={class:"mytable"},$={class:"fcs"},q=R("编辑"),A=R("驳回原因"),G=R("详情"),H={key:3},B=R("下载附件"),F=R("通过"),J=R("驳回");var K=w(j(u(i({},{name:"CustomArticle"}),{setup(e,{expose:a}){const t=h([{type:"text",lable:"需求ID",prop:"id",width:120},{type:"text",lable:"账户名",prop:"user_name",width:120},{type:"text",lable:"客户名称",prop:"company_name",width:180},{type:"text",lable:"标题",prop:"title",width:150},{type:"text-tooltip",lable:"描述",prop:"detail",width:120},{type:"date",lable:"创建日期",prop:"create_time",width:110},{type:"status",lable:"状态",prop:"status",width:100}]),l=h(!1),s=h(0),o=h(10),r=h(1),w=h([]),j=h(!1),R=h(""),K=k({userName:"",status:"",create_time:""}),L=()=>{K.userName="",K.status="",K.create_time="",ee()},Q=e=>{r.value=1,ee()},W=h(!1),X=h(),Y=async e=>{const a={id:X.value,fail_reason:e,status:4},{status:t,body:l}=await f(a);t&&(W.value=!1,ee())},Z=async e=>{const a=await v({id:e});1==a.status&&(window.location.href=a.body.attach_url)};a({getData:Z});const ee=async()=>{l.value=!0;const e=await _(u(i({size:o.value,current:r.value},K),{startTime:K.create_time?K.create_time[0]:null,endTime:K.create_time?K.create_time[1]:null}));l.value=!1,1==e.status&&(s.value=e.body.total,w.value=e.body.records)};return ee(),(e,a)=>{const i=T("el-option"),u=T("el-link"),f=T("el-table-column"),v=T("el-table"),_=T("el-card"),h=E("loading");return g(),C("div",N,[x(p,{modelValue:V(K),"onUpdate:modelValue":a[0]||(a[0]=e=>M(K)?K.value=e:K=e),onSearch:Q,onReset:L},{default:O((()=>[x(i,{label:"全部",value:"null"}),x(i,{label:"待处理",value:"1"}),x(i,{label:"已受理",value:"2"}),x(i,{label:"被驳回",value:"3"}),x(i,{label:"已完成",value:"4"})])),_:1},8,["modelValue"]),x(_,{class:"mycard mt20"},{default:O((()=>[P((g(),D(v,{data:w.value,border:"",style:{width:"100%"},"row-class-name":"my-data-table-row"},{empty:O((()=>[x(m)])),default:O((()=>[(g(!0),C(U,null,z(t.value,((e,a)=>(g(),D(c,{key:a,type:e.type,width:e.width,lable:e.lable,prop:e.prop},null,8,["type","width","lable","prop"])))),128)),x(f,{width:"150",label:"操作"},{default:O((({row:a})=>[I("div",$,[2==a.status?(g(),D(u,{key:0,type:"primary",onClick:t=>e.$router.push("/cms/customedit?id="+a.id)},{default:O((()=>[q])),_:2},1032,["onClick"])):S("",!0),3==a.status?(g(),D(u,{key:1,type:"primary",onClick:e=>{R.value=a.fail_reason,j.value=!0}},{default:O((()=>[A])),_:2},1032,["onClick"])):S("",!0),4==a.status?(g(),D(u,{key:2,type:"primary",onClick:t=>e.$router.push("/cms/customdet?id="+a.id)},{default:O((()=>[G])),_:2},1032,["onClick"])):S("",!0),1==a.status?(g(),C("div",H,[a.attach_url?(g(),D(u,{key:0,type:"primary",class:"fcss",onClick:e=>Z(a.id)},{default:O((()=>[B])),_:2},1032,["onClick"])):S("",!0),x(u,{type:"primary",class:"fcss",onClick:e=>(async e=>{await b({id:e}),ee()})(a.id)},{default:O((()=>[F])),_:2},1032,["onClick"]),x(u,{type:"primary",onClick:e=>{return t=a.id,W.value=!0,void(X.value=t);var t}},{default:O((()=>[J])),_:2},1032,["onClick"])])):S("",!0)])])),_:1})])),_:1},8,["data"])),[[h,l.value]]),x(d,{page:r.value,"onUpdate:page":a[1]||(a[1]=e=>r.value=e),size:o.value,"onUpdate:size":a[2]||(a[2]=e=>o.value=e),total:s.value,onChange:ee},null,8,["page","size","total"])])),_:1}),x(n,{modelValue:j.value,"onUpdate:modelValue":a[3]||(a[3]=e=>j.value=e),msg:R.value,title:"驳回原因",btn:1},null,8,["modelValue","msg"]),x(y,{modelValue:W.value,"onUpdate:modelValue":a[4]||(a[4]=e=>W.value=e),onSuccess:Y},null,8,["modelValue"])])}}})),[["__scopeId","data-v-23a6ef88"]]);export{K as default};
