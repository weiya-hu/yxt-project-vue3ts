import{q as l,D as e,f as a,_ as s,o as t,t as i,a as o,w as n,v as r,V as c,c as u,u as d,S as p,F as m,a2 as v,Z as f,U as _,aw as k,ax as y,az as b,b as h}from"./vue.89ed3d48.js";import{l as g,c as x,a as C}from"./index.3b31d7d7.js";import{_ as j,e as B,j as V,z as w,f as z,p as U}from"./index.547c0c45.js";import{g as q,p as I}from"./request.356cbcf4.js";import{e as S}from"./empty.f131d8fb.js";import{m as A}from"./index.f47187aa.js";import{p as D}from"./pointer.3a1f7926.js";import"./login.ed01525e.js";const F=l=>(k("data-v-33690306"),l=l(),y(),l),H={class:"banner_page_component"},M={class:"fsc f1"},N=_("使用中"),P={class:"color999"},Z=_("查看效果"),E={class:"imgs_list flex"},G={class:"imgbox"},J=["src"],K=["onClick"],L=["onClick"],O={class:"imginfo"},Q={class:"imgname els"},R={class:"imglink fcs"},T={class:"fcc"},W={class:"fsc imgicon"},X={class:"fcs"},Y=F((()=>r("span",null,"0",-1))),$=["onClick"],ll=["src"],el=F((()=>r("div",null,"可用空位",-1))),al={key:0,class:"poolbox"},sl=["src"],tl={key:1,class:"fc fcc"},il=F((()=>r("div",{class:"file_name"},"点击添加",-1))),ol={class:"fcs btns fjend mt20"},nl=_("取消"),rl=_("提交");var cl=j(l({setup(l){const k=A(),y=e((()=>k.state.yxtUrl)),j={BannerIndex:{type:1,url:""},BannerProduct:{type:2,url:"/product.html"},BannerSales:{type:3,url:"/sales.html"},BannerVipdata:{type:4,url:"/vipdata.html"},BannerAttract:{type:5,url:"/attract.html"},BannerMember:{type:6,url:"/member.html"},BannerHelp:{type:7,url:"/help.html"},BannerNavigation:{type:8,url:"/navigation.html"}}[b().name],F=a([]),cl=async()=>{const{status:l,body:e}=await(a={section_type:j.type},q(1,"/manage/banner.list",a));var a;1==l&&(F.value=e)};cl();const ul=a(!1),dl=s({link:""}),pl=()=>{dl.link="",vl.value={},ul.value=!1},ml=async(l,e)=>{const{status:a}=await(s={id:e||vl.value.id,section_type:j.type,status:l,link_url:dl.link},I(1,"/manage/banner/up.do",s,!0));var s;1==a&&(pl(),cl())},vl=a({});return B.on("sel_banner",(l=>{vl.value=l})),(l,e)=>{const a=h("el-icon"),s=h("el-link"),k=h("el-card"),b=h("el-form-item"),B=h("el-input"),q=h("el-button"),I=h("el-form"),A=h("el-dialog");return t(),i("div",H,[o(k,{class:"mycard"},{header:n((()=>[r("div",M,[r("div",null,[N,r("span",P,"（"+c(F.value.length)+"）",1)]),F.value.length?(t(),u(s,{key:0,type:"primary",target:"_blank",href:"//"+d(y).offical+d(j).url},{default:n((()=>[Z,o(a,null,{default:n((()=>[o(d(V))])),_:1})])),_:1},8,["href"])):p("",!0)])])),default:n((()=>[r("div",E,[(t(!0),i(m,null,v(F.value,((l,e)=>(t(),i("div",{class:"imgs_item",key:e},[r("div",G,[r("img",{src:l.cover_url||l.source_url,alt:""},null,8,J),r("div",{class:"lookicon fcc lookhover",onClick:l=>(l=>{const e=F.value.map((l=>l.cover_url||l.source_url));C(e,l)})(e)},[o(a,{size:"20px"},{default:n((()=>[o(d(w))])),_:1})],8,K),2==l.source_type?(t(),i("div",{key:0,class:"videoicon fcc lookhover",onClick:e=>d(g)(l.source_url)},[o(a,{size:"40px"},{default:n((()=>[o(d(z))])),_:1})],8,L)):p("",!0)]),r("div",O,[r("div",Q,c(l.banner_name),1),r("div",R,[r("span",T,c(l.link_url?"链接：":"无链接"),1),l.link_url?(t(),u(s,{key:0,type:"primary",target:"_blank",href:"//"+l.link_url},{default:n((()=>[_(c(l.link_url),1)])),_:2},1032,["href"])):p("",!0)]),r("div",W,[r("div",X,[o(a,{size:"14px"},{default:n((()=>[o(d(D))])),_:1}),Y]),r("div",{onClick:e=>ml(0,l.material_id),class:"chover dfcolor"},"下架",8,$)])])])))),128)),(t(!0),i(m,null,v(5-F.value.length,(l=>(t(),i("div",{class:"imgs_item emptybox fc fcc",onClick:e[0]||(e[0]=l=>ul.value=!0),key:l},[r("img",{src:d(S),alt:""},null,8,ll),el])))),128))])])),_:1}),o(A,{modelValue:ul.value,"onUpdate:modelValue":e[6]||(e[6]=l=>ul.value=l),title:"新增banner",width:"380px",onClose:pl},{default:n((()=>[o(I,{model:d(dl)},{default:n((()=>[o(b,{label:"选择素材",required:"","label-width":"90px"},{default:n((()=>[r("div",{class:"sel_pool fcc",onClick:e[3]||(e[3]=l=>d(x)("sel_banner"))},[vl.value.id?(t(),i("div",al,[r("img",{src:vl.value.cover_url||vl.value.source_url,alt:""},null,8,sl),r("div",{class:"lookicon fcc lookhover",onClick:e[1]||(e[1]=f((l=>d(C)([vl.value.cover_url||vl.value.source_url],0)),["stop"]))},[o(a,{size:"14px"},{default:n((()=>[o(d(w))])),_:1})]),2==vl.value.source_type?(t(),i("div",{key:0,class:"videoicon fcc lookhover",onClick:e[2]||(e[2]=f((l=>d(g)(vl.value.source_url)),["stop"]))},[o(a,{size:"20px"},{default:n((()=>[o(d(z))])),_:1})])):p("",!0)])):(t(),i("div",tl,[o(a,null,{default:n((()=>[o(d(U))])),_:1}),il]))])])),_:1}),o(b,{label:"添加链接",prop:"link","label-width":"90px"},{default:n((()=>[o(B,{modelValue:d(dl).link,"onUpdate:modelValue":e[4]||(e[4]=l=>d(dl).link=l),placeholder:"请输入链接"},null,8,["modelValue"])])),_:1}),r("div",ol,[o(q,{onClick:pl},{default:n((()=>[nl])),_:1}),o(q,{type:"primary",onClick:e[5]||(e[5]=l=>ml(1)),disabled:!vl.value.id},{default:n((()=>[rl])),_:1},8,["disabled"])])])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-33690306"]]);export{cl as default};
