var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,t=(l,a,r)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[a]=r;import{M as u}from"./Mypage.909ab24d.js";import{M as p}from"./MyEmpty.4b7c1ae9.js";import{M as d}from"./MyDialog.fa242f68.js";import{e as i,f as c,h as n,i as m}from"./service.37ee0b77.js";import{_ as v,l as b}from"./index.e8c232ab.js";import{e as f}from"./edit.242cb438.js";import{G as _,g as y,j as g,o as w,H as j,a as V,w as h,I as k,P as x,aa as C,c as O,C as q,aw as U,ax as z,a1 as M,b as P,a2 as I}from"./vue.73bee448.js";import"./empty.f131d8fb.js";import"./request.55f6c0c4.js";const D=e=>(U("data-v-52152d18"),e=e(),z(),e),E={class:"problem_page"},F={class:"fsc f1"},S=D((()=>k("div",null,"问题列表",-1))),A=M("创建"),G={key:0,class:"problem_list"},H={class:"problem_top fsc"},N={class:"fcs"},Q=D((()=>k("div",null,"分类：",-1))),R=D((()=>k("div",{class:"problem_line"},null,-1))),B={class:"problem_bt"},J={class:"problem_q fcs"},K=D((()=>k("div",{class:"qa_icon q_icon fcc"},"Q",-1))),L={class:"problem_q_text"},T={class:"problem_a fcs"},W=D((()=>k("div",{class:"qa_icon a_icon fcc"},"A",-1))),X={class:"problem_a_text"},Y={class:"fcs fjend mt20"},Z=M("取消"),$=M("确定");var ee=v(_({setup(e){const v=y([]);(async()=>{const{status:e,body:l}=await i();if(1==e){for(const[e,a]of Object.entries(l))v.value.push({value:Number(e),label:a});ee()}})();const _=y(1),U=y(20),z=y(0),D=y([]),ee=async()=>{const{status:e,body:l}=await c({size:U.value,current:_.value});1==e&&(z.value=l.total,D.value=l.records)},le=()=>{oe.value.resetFields(),se.problem="",se.problem_type="",se.answer="",ue.value="",ae.value=!1},ae=y(!1),re=g({problem_type:[{required:!0,message:"请选择分类！",trigger:"blur"}],problem:[{required:!0,message:"请输入问题！",trigger:"blur"}],answer:[{required:!0,message:"请输入答案！",trigger:"blur"}]}),se=g({problem_type:"",problem:"",answer:""}),oe=y(),te=()=>{oe.value.validate((async e=>{if(e){const{status:e}=await n((u=((e,l)=>{for(var a in l||(l={}))s.call(l,a)&&t(e,a,l[a]);if(r)for(var a of r(l))o.call(l,a)&&t(e,a,l[a]);return e})({},se),p={id:ue.value?ue.value:""},l(u,a(p))));1==e&&(le(),ee())}var u,p}))},ue=y(""),pe=y(!1),de=async()=>{const{status:e}=await m({id:ue.value});1==e&&(ee(),pe.value=!1)};return(e,l)=>{const a=P("el-button"),r=P("el-tag"),s=P("el-icon"),o=P("el-card"),t=P("el-option"),i=P("el-select"),c=P("el-form-item"),n=P("el-input"),m=P("el-form"),y=P("el-dialog");return w(),j("div",E,[V(o,{class:"mycard"},{header:h((()=>[k("div",F,[S,V(a,{type:"primary",onClick:l[0]||(l[0]=e=>ae.value=!0)},{default:h((()=>[A])),_:1})])])),default:h((()=>[D.value.length?(w(),j("div",G,[(w(!0),j(x,null,C(D.value,(e=>(w(),j("div",{class:"problem_item",key:e.id},[k("div",H,[k("div",N,[Q,V(r,null,{default:h((()=>{var l;return[M(I(null==(l=v.value.find((l=>l.value==e.problem_type)))?void 0:l.label),1)]})),_:2},1024)]),k("div",null,[V(s,{size:"18px",class:"mr20 dfcolor chover",onClick:l=>(e=>{ae.value=!0,ue.value=e.id,se.problem_type=e.problem_type,se.problem=e.problem,se.answer=e.answer})(e)},{default:h((()=>[V(q(f))])),_:2},1032,["onClick"]),V(s,{size:"18px",class:"dfcolor chover",onClick:l=>{return a=e.id,ue.value=a,void(pe.value=!0);var a}},{default:h((()=>[V(q(b))])),_:2},1032,["onClick"])])]),R,k("div",B,[k("div",J,[K,k("div",L,I(e.problem),1)]),k("div",T,[W,k("div",X,I(e.answer),1)])])])))),128))])):(w(),O(p,{key:1})),V(u,{total:z.value,page:_.value,"onUpdate:page":l[1]||(l[1]=e=>_.value=e),onChange:ee,size:U.value,"onUpdate:size":l[2]||(l[2]=e=>U.value=e)},null,8,["total","page","size"])])),_:1}),V(y,{modelValue:ae.value,"onUpdate:modelValue":l[6]||(l[6]=e=>ae.value=e),title:ue.value?"编辑问题":"创建问题",width:"380px",onClose:le},{default:h((()=>[V(m,{model:q(se),rules:q(re),ref_key:"addFormRef",ref:oe},{default:h((()=>[V(c,{label:"分类：",prop:"problem_type"},{default:h((()=>[V(i,{modelValue:q(se).problem_type,"onUpdate:modelValue":l[3]||(l[3]=e=>q(se).problem_type=e),placeholder:"请选择问题分类",class:"f1"},{default:h((()=>[(w(!0),j(x,null,C(v.value,(e=>(w(),O(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),V(c,{label:"问题：",prop:"problem"},{default:h((()=>[V(n,{modelValue:q(se).problem,"onUpdate:modelValue":l[4]||(l[4]=e=>q(se).problem=e),type:"textarea",rows:3,placeholder:"请输入问题"},null,8,["modelValue"])])),_:1}),V(c,{label:"答案：",prop:"answer"},{default:h((()=>[V(n,{modelValue:q(se).answer,"onUpdate:modelValue":l[5]||(l[5]=e=>q(se).answer=e),type:"textarea",rows:5,placeholder:"请输入答案"},null,8,["modelValue"])])),_:1}),k("div",Y,[V(a,{onClick:le},{default:h((()=>[Z])),_:1}),V(a,{type:"primary",onClick:te},{default:h((()=>[$])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]),V(d,{modelValue:pe.value,"onUpdate:modelValue":l[7]||(l[7]=e=>pe.value=e),msg:"确认删除此问题?",onSure:de},null,8,["modelValue"])])}}}),[["__scopeId","data-v-52152d18"]]);export{ee as default};
