import{D as e}from"./DetailsHeader.159e29ee.js";import{G as a,g as s,o as t,H as i,I as l,a as r,w as d,a2 as c,a1 as n,aw as o,ax as u,az as f,av as p,b as v}from"./vue.73bee448.js";import{c as m,f as h,h as y}from"./system.f75f6534.js";import{m as _}from"./index.46ed79dd.js";import{_ as b}from"./index.aefc30ce.js";import"./request.65081ce8.js";import"./login.857dc837.js";import"./index.6c11e008.js";import"./tinymce.5416ef76.js";const j=e=>(o("data-v-727434ee"),e=e(),u(),e),k={class:"editstaff_page"},x={class:"fsc"},w=n("确认修改"),g={class:"flex"},C={class:"lt"},E=j((()=>l("div",{class:"fw600 pl20"},"修改对象",-1))),H={class:"fsc mt20 bgceee"},I={class:"rt f1 ml20"},K=j((()=>l("div",{class:"fw600 mb20 pt20"},"修改权限",-1)));var q=b(a({setup(a){const n=_(),o=f(),u=p(),b=o.query.id,j={children:"children",label:"name"},q=s(),z=s([]);(async()=>{const e=await m();z.value=e.body,G()})();const D=s({dept_name:[],name:"",per_list:[]}),G=async()=>{if(!b)return;const e=await h({id:b});D.value=e.body;const a=s([]);z.value.forEach((e=>{e.children.forEach((e=>{e.children?e.children.forEach((e=>{a.value.push(D.value.per_list.find((a=>a==e.permission_id)))})):a.value.push(D.value.per_list.find((a=>a==e.permission_id)))}))})),q.value.setCheckedKeys(a.value)},L=async()=>{if(!b)return;const e=q.value.getCheckedKeys(),a=q.value.getHalfCheckedKeys(),s=e.concat(a);if(1==(await y({buid:b,list:s})).status){if(n.state.userInfo.buid==b)return void n.setUserLv().then((e=>{-1!=e.indexOf("24")?u.back():u.replace("/index")}));u.back()}};return(a,s)=>{const n=v("el-button"),o=v("el-tree"),u=v("el-card");return t(),i("div",k,[l("div",x,[r(e),r(n,{type:"primary",onClick:L,size:"large"},{default:d((()=>[w])),_:1})]),r(u,{class:"mt20"},{default:d((()=>[l("div",g,[l("div",C,[E,l("div",H,[l("div",null,c(D.value.name),1),l("span",null,c(D.value.dept_name.join()),1)])]),l("div",I,[K,r(o,{data:z.value,props:j,"node-key":"permission_id","show-checkbox":"",ref_key:"lvtree",ref:q},null,8,["data"])])])])),_:1})])}}}),[["__scopeId","data-v-727434ee"]]);export{q as default};
