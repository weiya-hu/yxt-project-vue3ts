import{x as a,y as e,z as t,A as l}from"./service.94da7b7d.js";import{M as s}from"./MyEmpty.8e216a46.js";import{M as o}from"./MyDialog.d8f2932e.js";import{M as d}from"./MyPage.2c8a4bc7.js";import{G as u,g as n,o as r,H as i,a as c,w as m,I as p,ab as v,a1 as f,a2 as y,W as b,b as _}from"./vue.73bee448.js";import"./request.65081ce8.js";import"./index.aefc30ce.js";import"./tinymce.5416ef76.js";import"./empty.f131d8fb.js";const g={class:"feedback_page"},w=p("div",null,"反馈列表",-1),j={class:"mytable"},k={class:"els"},x={class:"fcs"},M={class:"fcs"},z=f("修改状态"),C=f("已处理"),h=f("未处理"),U=p("div",{class:"line"},null,-1),V=f("删除"),q=u({setup(u){const q=n([]);(async()=>{const{status:e,body:t}=await a();1==e&&(q.value=t,H())})();const A=n([]),D=n(1),E=n(20),G=n(0),H=async()=>{const{status:a,body:t}=await e({size:E.value,current:D.value});1==a&&(G.value=t.total,A.value=t.records)},I=async a=>{const{status:e}=await t({id:a[1],status:a[0]});1==e&&H()},P=n(""),S=n(!1),W=async()=>{1==(await l({id:P.value})).status&&(S.value=!1,H())};return(a,e)=>{const t=_("el-table-column"),l=_("el-tooltip"),u=_("el-link"),n=_("el-dropdown-item"),B=_("el-dropdown-menu"),F=_("el-dropdown"),J=_("el-table"),K=_("el-card");return r(),i("div",g,[c(K,{class:"mycard"},{header:m((()=>[w])),default:m((()=>[p("div",j,[c(J,{data:A.value,border:"",draggable:""},{empty:m((()=>[c(s)])),default:m((()=>[c(t,{label:"类型"},v({_:2},[q.value.length?{name:"default",fn:m((({row:a})=>[f(y(q.value.find((e=>e.id==a.type_id)).name),1)]))}:void 0]),1024),c(t,{prop:"text",label:"反馈内容"},{default:m((({row:a})=>[c(l,{effect:"dark",content:a.text,placement:"top"},{default:m((()=>[p("div",k,y(a.text),1)])),_:2},1032,["content"])])),_:1}),c(t,{prop:"mobile",label:"联系电话"}),c(t,{prop:"status",label:"处理状态"},{default:m((({row:a})=>[p("div",x,[p("div",{class:b(["status_dot",1==a.status?"sdot_g":"sdot_r"])},null,2),p("div",null,y(1==a.status?"已处理":"未处理"),1)])])),_:1}),c(t,{label:"操作"},{default:m((({row:a})=>[p("div",M,[c(F,{trigger:"click",onCommand:I},{dropdown:m((()=>[c(B,null,{default:m((()=>[c(n,{command:[1,a.id]},{default:m((()=>[C])),_:2},1032,["command"]),c(n,{command:[0,a.id]},{default:m((()=>[h])),_:2},1032,["command"])])),_:2},1024)])),default:m((()=>[c(u,{type:"primary"},{default:m((()=>[z])),_:1})])),_:2},1024),U,c(u,{type:"primary",onClick:e=>{return t=a.id,P.value=t,void(S.value=!0);var t}},{default:m((()=>[V])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])]),c(d,{total:G.value,page:D.value,"onUpdate:page":e[0]||(e[0]=a=>D.value=a),onChange:H,size:E.value,"onUpdate:size":e[1]||(e[1]=a=>E.value=a)},null,8,["total","page","size"])])),_:1}),c(o,{modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=a=>S.value=a),msg:"此反馈记录删除后无法撤回，请谨慎删除！",onSure:W},null,8,["modelValue"])])}}});export{q as default};
