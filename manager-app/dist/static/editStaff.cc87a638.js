import{D as e}from"./DetailsHeader.dc89d7cd.js";import{q as a,f as s,o as t,t as d,v as i,a as r,w as l,V as c,U as n,aw as o,ax as u,az as f,av as v,b as m}from"./vue.89ed3d48.js";import{c as p,f as b,h}from"./system.6d9b699b.js";import{m as y}from"./index.5003068f.js";import{_,g as j}from"./index.fdca730b.js";import"./request.aa9790cc.js";import"./login.6de82fdd.js";import"./index.eaa6bc8d.js";const k=e=>(o("data-v-1d326bde"),e=e(),u(),e),x={class:"editstaff_page"},w={class:"fsc"},g=n("确认修改"),C={class:"flex"},E={class:"lt"},q=k((()=>i("div",{class:"fw600 pl20"},"修改对象",-1))),K={class:"fsc mt20 bgceee"},z={class:"rt f1 ml20"},D=k((()=>i("div",{class:"fw600 mb20 pt20"},"修改权限",-1)));var H=_(a({setup(a){const n=y(),o=f(),u=v(),_=o.query.id,k={children:"children",label:"name"},H=s(),I=s([]);(async()=>{const e=await p();I.value=e.body,U()})();const N=s({dept_name:[],name:"",per_list:[]}),U=async()=>{if(!_)return;const e=await b({id:_});N.value=e.body;const a=s([]);N.value.per_list.forEach((e=>{I.value.forEach((s=>{s.children.forEach((s=>{s.children?s.children.forEach((s=>{s.permission_id==e&&a.value.push(Number(e))})):s.permission_id==e&&a.value.push(Number(e))}))}))})),H.value.setCheckedKeys(a.value)},L=async()=>{if(!_)return;const e=H.value.getCheckedKeys(),a=H.value.getHalfCheckedKeys(),s=e.concat(a);if(1==(await h({buid:_,list:s})).status){if(n.state.userInfo.buid==_)return void n.setUserLv().then((e=>{j(e),-1!=e.indexOf("24")?u.back():u.replace("/index")}));u.back()}};return(a,s)=>{const n=m("el-button"),o=m("el-tree"),u=m("el-card");return t(),d("div",x,[i("div",w,[r(e),r(n,{type:"primary",onClick:L,size:"large"},{default:l((()=>[g])),_:1})]),r(u,{class:"mt20"},{default:l((()=>[i("div",C,[i("div",E,[q,i("div",K,[i("div",null,c(N.value.name),1),i("span",null,c(N.value.dept_name.join()),1)])]),i("div",z,[D,r(o,{data:I.value,props:k,"node-key":"permission_id","show-checkbox":"",ref_key:"lvtree",ref:H},null,8,["data"])])])])),_:1})])}}}),[["__scopeId","data-v-1d326bde"]]);export{H as default};
