var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s;import{G as o,u as d,g as u,j as c,o as n,H as m,a as v,w as f,I as p,P as _,aa as y,a1 as b,a2 as g,C as k,c as j,a0 as h,_ as w,$ as C,aw as V,ax as z,az as M,b as x,W as O}from"./vue.73bee448.js";import{M as D}from"./Mypage.53af444b.js";import{M as P}from"./MyEmpty.8e216a46.js";import{D as U}from"./DetailsHeader.159e29ee.js";import{M as q}from"./MyDialog.d8f2932e.js";import{j as H,k as I,l as E,m as F,n as S,o as G}from"./users.4d9fc8d6.js";import{f as R}from"./date.23847c74.js";import{m as W}from"./index.46ed79dd.js";import{b as $,a as A}from"./index.6c11e008.js";import{g as B}from"./config.b191a432.js";import{_ as J,h as K}from"./index.aefc30ce.js";import"./empty.f131d8fb.js";import"./request.65081ce8.js";import"./login.857dc837.js";import"./tinymce.5416ef76.js";const L=e=>(V("data-v-3f792f3e"),e=e(),z(),e),N={class:"companydetails_page"},Q={class:"fsc f1"},T=L((()=>p("span",null,"产品与服务",-1))),X=b("管理"),Y={class:"pro_list fw fcs"},Z={class:"p_name fcs"},ee=b("产品："),ae=["src"],le={class:"v_name"},se={class:"time"},te={class:"flex mt20"},ie=["src"],re=["src"],oe=L((()=>p("div",{class:"fw600"},"已购产品",-1))),de={key:0,class:"fjend mb20"},ue=b("+ 新增"),ce={class:"addbox mb20"},ne={class:"fjend"},me=b("确定"),ve=b("取消"),fe={class:"pro_list"},pe={class:"p_name fcs"},_e=b("产品："),ye=["src"],be={class:"v_name"},ge={class:"time"},ke={class:"rt"},je={class:"fcc"},he=b(" 确定 "),we=b(" 取消 ");var Ce=J(o({setup(e){const o=W(),V=d((()=>o.state.typeHash)),z=M().query.id,J=u([]),L=u(1),Ce=u(20),Ve=u(0),ze=async()=>{const e=await H({size:Ce.value,current:L.value,cid:z});1==e.status&&(J.value=e.body.records,Ve.value=e.body.total)};ze();const Me=u({});(async()=>{const e=await I({cid:z});1==e.status&&(e.body.license=e.body.license.split(","),Me.value=e.body)})();const xe=u([]),Oe=u([]);(async()=>{const e=await E();1===e.status&&(xe.value=e.body)})();const De=async()=>{const e=await F({cid:z});1===e.status&&(Oe.value=e.body)};De();const Pe=()=>{Fe.value.validate((async e=>{if(e){const e=await S((o=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))i.call(a,l)&&r(e,l,a[l]);return e})({},Se),d={cid:z},a(o,l(d))));e.status&&(De(),Re())}var o,d}))},Ue=u(!1),qe=u({}),He=async()=>{const{status:e}=await G({cid:z,id:qe.value.id});e&&(De(),Ue.value=!1)},Ie=u(!1),Ee=u(!1),Fe=u(),Se=c({left_time:"",version_id:""}),Ge=c({left_time:[{required:!0,message:"请选择产品！",trigger:"change"}],version_id:[{required:!0,message:"请选择有效期！",trigger:"change"}]}),Re=()=>{Fe.value.resetFields(),Ee.value=!1},We=()=>{Re(),Ie.value=!1};return(e,a)=>{const l=x("el-button"),s=x("el-card"),t=x("el-table-column"),i=x("el-table"),r=x("el-descriptions-item"),o=x("el-link"),d=x("el-descriptions"),u=x("el-option"),c=x("el-select"),z=x("el-form-item"),M=x("el-date-picker"),H=x("el-form"),I=x("el-icon"),E=x("el-drawer");return n(),m("div",N,[v(U),v(s,{class:"mycard mt20"},{header:f((()=>[p("div",Q,[T,v(l,{type:"primary",onClick:a[0]||(a[0]=e=>Ie.value=!0)},{default:f((()=>[X])),_:1})])])),default:f((()=>[p("div",Y,[(n(!0),m(_,null,y(Oe.value,(e=>(n(),m("div",{class:O(["pro_item",k(B)(e.product_id).class]),key:e.id},[p("div",Z,[ee,e.thumb_url?(n(),m("img",{key:0,src:e.thumb_url,alt:""},null,8,ae)):h("",!0),b(g(e.product_name),1)]),p("div",le,"版本："+g(e.version_name),1),p("div",se,"有效期至："+g(k(R)(new Date(1*e.left_time))),1)],2)))),128))])])),_:1}),p("div",te,[v(s,{class:"mycard mr20 f1",header:"用户信息"},{default:f((()=>[v(i,{data:J.value,border:!0},{empty:f((()=>[v(P)])),default:f((()=>[v(t,{prop:"name",label:"用户名"}),v(t,{prop:"mobile",label:"电话"}),v(t,{prop:"create_time",label:"注册时间"},{default:f((({row:e})=>[b(g(k(R)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1})])),_:1},8,["data"]),v(D,{total:Ve.value,page:L.value,"onUpdate:page":a[1]||(a[1]=e=>L.value=e),onChange:ze,size:Ce.value,"onUpdate:size":a[2]||(a[2]=e=>Ce.value=e)},null,8,["total","page","size"])])),_:1}),v(s,{class:"card1 f1"},{default:f((()=>[v(d,{column:1},{default:f((()=>[v(r,{label:"企业名称"},{default:f((()=>[b(g(Me.value.name),1)])),_:1}),Me.value.industry_id?(n(),j(r,{key:0,label:"所属行业"},{default:f((()=>[b(g(k($)(Me.value.industry_id.split(","),k(V))),1)])),_:1})):h("",!0),v(r,{label:"统一社会信用代码","label-class-name":"icode"},{default:f((()=>[b(g(Me.value.code),1)])),_:1}),v(r,{label:"资质照片"},{default:f((()=>[Me.value.license&&Me.value.license[0]?(n(),m("img",{key:0,src:Me.value.license[0],alt:"",class:"zzimg lookhover",onClick:a[3]||(a[3]=e=>k(A)(Me.value.license,0))},null,8,ie)):h("",!0),Me.value.license&&Me.value.license[1]?(n(),m("img",{key:1,src:Me.value.license[1],alt:"",class:"zzimg lookhover ml20",onClick:a[4]||(a[4]=e=>k(A)(Me.value.license,1))},null,8,re)):h("",!0)])),_:1}),Me.value.left_time?(n(),j(r,{key:1,label:"证照有效期"},{default:f((()=>[b(g(4102415999e3==Me.value.left_time?"永久":k(R)(new Date(Me.value.left_time),"yyyy-MM-dd")),1)])),_:1})):h("",!0),v(r,{label:"联系人"},{default:f((()=>[b(g(Me.value.legal_person),1)])),_:1}),v(r,{label:"联系电话"},{default:f((()=>[b(g(Me.value.contact),1)])),_:1}),v(r,{label:"注册地址"},{default:f((()=>[b(g(Me.value.address),1)])),_:1}),v(r,{label:"官网地址"},{default:f((()=>[v(o,{type:"primary",href:"//"+Me.value.url,target:"_blank"},{default:f((()=>[b(g(Me.value.url),1)])),_:1},8,["href"])])),_:1}),v(r,{label:"经营范围"},{default:f((()=>[b(g(Me.value.business_scope),1)])),_:1})])),_:1})])),_:1})]),v(E,{modelValue:Ie.value,"onUpdate:modelValue":a[8]||(a[8]=e=>Ie.value=e),onClose:We},{title:f((()=>[oe])),footer:f((()=>[p("div",je,[v(l,{type:"primary",onClick:We},{default:f((()=>[he])),_:1}),v(l,{onClick:We},{default:f((()=>[we])),_:1})])])),default:f((()=>[3==Me.value.status?(n(),m("div",de,[v(l,{type:"primary",onClick:a[5]||(a[5]=e=>Ee.value=!0)},{default:f((()=>[ue])),_:1})])):h("",!0),w(p("div",ce,[v(H,{model:k(Se),rules:k(Ge),ref_key:"addFormRef",ref:Fe},{default:f((()=>[v(z,{label:" 产品",prop:"version_id"},{default:f((()=>[v(c,{modelValue:k(Se).version_id,"onUpdate:modelValue":a[6]||(a[6]=e=>k(Se).version_id=e),placeholder:"请选择产品",class:"f1"},{default:f((()=>[(n(!0),m(_,null,y(xe.value,(e=>(n(),j(u,{key:e.version_id,label:e.version_name,value:e.version_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(z,{label:"有效期",prop:"left_time"},{default:f((()=>[v(M,{type:"datetime","value-format":"x",modelValue:k(Se).left_time,"onUpdate:modelValue":a[7]||(a[7]=e=>k(Se).left_time=e),placeholder:"请选择有效期",class:"f1"},null,8,["modelValue"])])),_:1}),p("div",ne,[v(l,{type:"primary",onClick:Pe},{default:f((()=>[me])),_:1}),v(l,{class:"ml20",onClick:Re},{default:f((()=>[ve])),_:1})])])),_:1},8,["model","rules"])],512),[[C,Ee.value]]),p("div",fe,[(n(!0),m(_,null,y(Oe.value,(e=>(n(),m("div",{class:O(["pro_item fsc",k(B)(e.product_id).class]),key:e.id,style:{"margin-right":"0"}},[p("div",null,[p("div",pe,[_e,e.thumb_url?(n(),m("img",{key:0,src:e.thumb_url,alt:""},null,8,ye)):h("",!0),b(g(e.product_name),1)]),p("div",be,"版本："+g(e.version_name),1),p("div",ge,"有效期至："+g(k(R)(new Date(1*e.left_time))),1)]),p("div",ke,[v(I,{class:"chover",size:"16px",onClick:a=>{return l=e,qe.value=l,void(Ue.value=!0);var l}},{default:f((()=>[v(k(K))])),_:2},1032,["onClick"])])],2)))),128))])])),_:1},8,["modelValue"]),v(q,{modelValue:Ue.value,"onUpdate:modelValue":a[9]||(a[9]=e=>Ue.value=e),msg:"确认删除 “ "+qe.value.version_name+" ” ?",onSure:He},null,8,["modelValue","msg"])])}}}),[["__scopeId","data-v-3f792f3e"]]);export{Ce as default};
