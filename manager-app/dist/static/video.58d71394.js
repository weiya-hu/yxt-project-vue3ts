var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,u=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e},i=(e,t)=>a(e,l(t));import{s as d}from"./Search.43a44bd4.js";import{M as p}from"./MyPage.2c8a4bc7.js";import{M as m}from"./MyDataTable.34484506.js";import{M as n}from"./MyDialog.d8f2932e.js";import{M as c}from"./MyEmpty.8e216a46.js";import{M as v}from"./MyUpload.ef53f60d.js";import{R as y}from"./Refuse.c4dd5bb9.js";import{l as f,e as b}from"./index.6c11e008.js";import{a as _,b as w,d as j,g as h,v as k}from"./custom.cf7f2d0a.js";import{_ as g}from"./index.aefc30ce.js";import{G as C,g as V,j as x,o as M,H as O,a as U,w as P,C as z,k as S,_ as D,c as I,P as E,aa as N,I as R,a0 as T,a1 as q,b as G,ae as H}from"./vue.73bee448.js";import"./date.23847c74.js";import"./index.46ed79dd.js";import"./login.857dc837.js";import"./request.65081ce8.js";import"./findb.c1031062.js";import"./empty.f131d8fb.js";import"./tinymce.5416ef76.js";const A={class:"mytable"},B={class:"fcs"},F=q("编辑"),J=q("驳回原因"),K=q("详情"),L={key:3},Q=q("下载附件"),W=q("通过"),X=q("驳回"),Y={class:"fcs btns fjend mt20"},Z=q("取消"),$=q("提交");var ee=g(C(i(u({},{name:"CustomVideo"}),{setup(e){const a=V([{type:"text",lable:"需求ID",prop:"id",width:120},{type:"text",lable:"账户名",prop:"user_name",width:120},{type:"text",lable:"客户名称",prop:"company_name",width:180},{type:"text",lable:"标题",prop:"title",width:150},{type:"text-tooltip",lable:"描述",prop:"detail",width:120},{type:"date",lable:"创建日期",prop:"create_time",width:110},{type:"status",lable:"状态",prop:"status",width:100}]),l=V(!1),t=V(!1),o=[".mp4"],s=V(0),r=V(10),g=V(1),C=V([]),q=V(!1),ee=V(""),ae=x({userName:"",status:"",create_time:""}),le=()=>{ae.userName="",ae.status="",ae.create_time="",_e()},te=e=>{g.value=1,_e()},oe=V(!1),se=V(),re=async e=>{const a={id:se.value,fail_reason:e},{status:l,body:t}=await w(a);l&&(oe.value=!1,_e())};V(!1);const ue=V([]),ie=V(""),de=V(!1),pe=x({url:""}),me=V(),ne=V(),ce=e=>{ne.value=e},ve=e=>{b(e),l.value=!1},ye=()=>{t.value=!1,me.value.clear(),de.value=!1,_e()},fe=async e=>{pe.url=e,await h({order_id:ie.value,url:pe.url,name:ne.value}),t.value=!1,ye(),_e()},be=async()=>{t.value=!0,me.value.submit()},_e=async()=>{l.value=!0;const e=await k(i(u({size:r.value,current:g.value},ae),{startTime:ae.create_time?ae.create_time[0]:null,endTime:ae.create_time?ae.create_time[1]:null}));l.value=!1,1==e.status&&(s.value=e.body.total,C.value=e.body.records)};return _e(),(e,u)=>{const i=G("el-option"),b=G("el-link"),w=G("el-table-column"),h=G("el-table"),k=G("el-card"),V=G("el-form-item"),x=G("el-button"),ne=G("el-form"),we=G("el-dialog"),je=H("loading");return M(),O("div",A,[U(d,{modelValue:z(ae),"onUpdate:modelValue":u[0]||(u[0]=e=>S(ae)?ae.value=e:ae=e),onSearch:te,onReset:le},{default:P((()=>[U(i,{label:"全部",value:"null"}),U(i,{label:"待处理",value:"1"}),U(i,{label:"已受理",value:"2"}),U(i,{label:"被驳回",value:"3"}),U(i,{label:"已完成",value:"4"})])),_:1},8,["modelValue"]),U(k,{class:"mycard mt20"},{default:P((()=>[D((M(),I(h,{data:C.value,border:"",style:{width:"100%"},"row-class-name":"my-data-table-row"},{empty:P((()=>[U(c)])),default:P((()=>[(M(!0),O(E,null,N(a.value,((e,a)=>(M(),I(m,{key:a,type:e.type,width:e.width,lable:e.lable,prop:e.prop},null,8,["type","width","lable","prop"])))),128)),U(w,{width:"150",label:"操作"},{default:P((({row:e})=>[R("div",B,[2==e.status?(M(),I(b,{key:0,type:"primary",onClick:a=>{return l=e.id,de.value=!0,void(ie.value=l);var l}},{default:P((()=>[F])),_:2},1032,["onClick"])):T("",!0),3==e.status?(M(),I(b,{key:1,type:"primary",onClick:a=>{ee.value=e.fail_reason,q.value=!0}},{default:P((()=>[J])),_:2},1032,["onClick"])):T("",!0),4==e.status?(M(),I(b,{key:2,type:"primary",onClick:a=>(async e=>{const a=await j({id:e});1==a.status&&(ue.value=a.body.url),f(a.body.url)})(e.id)},{default:P((()=>[K])),_:2},1032,["onClick"])):T("",!0),1==e.status?(M(),O("div",L,[e.attach_url?(M(),I(b,{key:0,type:"primary",class:"fcss",href:e.attach_url,"down-load":"附件.zip"},{default:P((()=>[Q])),_:2},1032,["href"])):T("",!0),U(b,{type:"primary",class:"fcss",onClick:a=>(async e=>{await _({id:e}),_e()})(e.id)},{default:P((()=>[W])),_:2},1032,["onClick"]),U(b,{type:"primary",onClick:a=>{return l=e.id,oe.value=!0,void(se.value=l);var l}},{default:P((()=>[X])),_:2},1032,["onClick"])])):T("",!0)])])),_:1})])),_:1},8,["data"])),[[je,l.value]]),U(p,{page:g.value,"onUpdate:page":u[1]||(u[1]=e=>g.value=e),size:r.value,"onUpdate:size":u[2]||(u[2]=e=>r.value=e),total:s.value,onChange:_e},null,8,["page","size","total"])])),_:1}),U(n,{modelValue:q.value,"onUpdate:modelValue":u[3]||(u[3]=e=>q.value=e),msg:ee.value,title:"驳回原因",btn:1},null,8,["modelValue","msg"]),U(we,{modelValue:de.value,"onUpdate:modelValue":u[5]||(u[5]=e=>de.value=e),title:"编辑视频",width:"380px",onClose:ye},{default:P((()=>[D((M(),I(ne,{model:z(pe)},{default:P((()=>[U(V,{label:"视频上传",required:"","label-width":"90px"},{default:P((()=>[U(v,{ref_key:"upVideo",ref:me,modelValue:z(pe).url,"onUpdate:modelValue":u[4]||(u[4]=e=>z(pe).url=e),type:"video","max-size":200,"exname-list":o,msg:"只能上传"+o.join("、")+"视频，不超过200M，推荐尺寸1280*720",onError:ve,onSuccess:fe,onChangeName:ce},null,8,["modelValue","msg"])])),_:1}),R("div",Y,[U(x,{onClick:ye},{default:P((()=>[Z])),_:1}),U(x,{type:"primary",disabled:!z(pe).url,onClick:be},{default:P((()=>[$])),_:1},8,["disabled"])])])),_:1},8,["model"])),[[je,t.value]])])),_:1},8,["modelValue"]),U(y,{modelValue:oe.value,"onUpdate:modelValue":u[6]||(u[6]=e=>oe.value=e),onSuccess:re},null,8,["modelValue"])])}}})),[["__scopeId","data-v-7df10021"]]);export{ee as default};
