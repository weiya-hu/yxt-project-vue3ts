var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&r(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&r(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{f as c}from"./date.23847c74.js";import{M as d}from"./MyEmpty.c87e98e1.js";import{s as n}from"./Search.2792c96f.js";import{M as m}from"./MyPage.088b462f.js";import{M as v}from"./MyDialog.e1451ef4.js";import{v as p,g as f,h as y}from"./myWork.dcebe850.js";import{_ as b,a as _,E as w}from"./index.547c0c45.js";import{q as k,f as g,_ as h,o as j,t as C,a as x,w as V,u as O,I as M,v as N,V as P,L as U,S,U as z,aw as D,ax as I,b as T}from"./vue.89ed3d48.js";import"./empty.f131d8fb.js";import"./request.356cbcf4.js";const E=e=>(D("data-v-1c62f094"),e=e(),I(),e),q={class:"tel_data"},B={class:"mytable"},L=["src","onClick"],R={class:"fcs"},W={class:"staus"},A={key:0,class:"fcs"},F=z("详情"),G={key:1,class:"fcs"},H=z("通过"),J=E((()=>N("div",{class:"line"},null,-1))),K=z("驳回"),Q={key:2,class:"fcs"},X=z("驳回原因"),Y=["src"];var Z=b(k(i(u({},{name:"我的作品库——视频库"}),{setup(e){const a=g([]),t=g(1),l=g(0),s=g(10),o=h({userName:"",status:"",create_time:""}),r=()=>{t.value=1,I()},b=()=>{o.userName="",o.status="",o.create_time="",I()},k=g(!1),z=g(""),D=async(e,a)=>{await p({id:a}),z.value=e,k.value=!0},I=async()=>{const e=await f(i(u({size:s.value,current:t.value},o),{startTime:o.create_time[0],endTime:o.create_time[1]}));1==e.status&&(a.value=e.body.records,l.value=e.body.total)};I();const E=g([]),Z=e=>{E.value=e},$=e=>{const a=g();switch(e){case 2:a.value={text:"待审核",className:"cred "};break;case 3:a.value={text:"已通过",className:"cdf"};break;case 4:a.value={text:"被驳回",className:"cyellow"};break;default:a.value={text:"草稿",className:"cbbb"}}return a.value},ee=g(!1),ae=g("");return(e,u)=>{const i=T("el-option"),p=T("el-table-column"),f=T("el-link"),g=T("el-table"),h=T("el-card"),E=T("el-dialog");return j(),C("div",q,[x(n,{onSearch:r,onReset:b,modelValue:O(o),"onUpdate:modelValue":u[0]||(u[0]=e=>M(o)?o.value=e:o=e)},{default:V((()=>[x(i,{label:"待审核",value:"2"}),x(i,{label:"已通过",value:"3"}),x(i,{label:"被驳回",value:"4"})])),_:1},8,["modelValue"]),x(h,{class:"mycard mt20"},{default:V((()=>[N("div",B,[x(g,{data:a.value,style:{width:"100%"},onSelectionChange:Z},{empty:V((()=>[x(d)])),default:V((()=>[x(p,{property:"id",label:"ID",width:"180"}),x(p,{property:"uname",label:"账户名",width:"180"}),x(p,{property:"cname",label:"客户名称"}),x(p,{property:"video",label:"视频",width:"210"},{default:V((({row:e})=>[N("video",{src:e.video_url,alt:"",class:"firstimg",onClick:a=>D(e.video_url,e.id)},null,8,L)])),_:1}),x(p,{property:"create_time",label:"创建日期",width:"200"},{default:V((({row:e})=>[N("div",null,P(O(c)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1}),x(p,{property:"status",label:"状态",width:"200"},{default:V((({row:e})=>[N("div",R,[N("div",{class:U(["dot",$(e.status).className])},null,2),N("div",W,P($(e.status).text),1)])])),_:1}),x(p,{label:"操作"},{default:V((({row:e})=>[3==e.status?(j(),C("div",A,[x(f,{type:"primary",onClick:a=>D(e.video_url,e.id)},{default:V((()=>[F])),_:2},1032,["onClick"])])):S("",!0),2==e.status?(j(),C("div",G,[x(f,{type:"primary",onClick:a=>(async e=>{await y({id:e,status:3,fail_reason:""}),I()})(e.id)},{default:V((()=>[H])),_:2},1032,["onClick"]),J,x(f,{type:"primary",onClick:a=>{return t=e.id,void _.prompt("驳回原因","提示",{confirmButtonText:"确认",cancelButtonText:"取消"}).then((async({value:e})=>{await y({fail_reason:e,status:4,id:t}),I()})).catch((()=>{w({type:"info",message:"取消驳回"})}));var t}},{default:V((()=>[K])),_:2},1032,["onClick"])])):S("",!0),4==e.status?(j(),C("div",Q,[x(f,{type:"primary",onClick:a=>{ae.value=e.fail_reason,ee.value=!0}},{default:V((()=>[X])),_:2},1032,["onClick"])])):S("",!0)])),_:1})])),_:1},8,["data"])]),x(m,{total:l.value,page:t.value,"onUpdate:page":u[1]||(u[1]=e=>t.value=e),onChange:I,size:s.value,"onUpdate:size":u[2]||(u[2]=e=>s.value=e)},null,8,["total","page","size"])])),_:1}),x(v,{modelValue:ee.value,"onUpdate:modelValue":u[3]||(u[3]=e=>ee.value=e),msg:ae.value,title:"驳回原因",btn:1},null,8,["modelValue","msg"]),x(E,{modelValue:k.value,"onUpdate:modelValue":u[4]||(u[4]=e=>k.value=e),title:"查看视频",fullscreen:"",onClose:u[5]||(u[5]=e=>z.value=""),"custom-class":"videobox"},{default:V((()=>[N("video",{src:z.value,controls:"",class:"show_video"},null,8,Y)])),_:1},8,["modelValue"])])}}})),[["__scopeId","data-v-1c62f094"]]);export{Z as default};
