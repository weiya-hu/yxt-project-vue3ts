import{t as a,u as e,v as l,w as t}from"./service.99381dce.js";import{M as s}from"./MyEmpty.c87e98e1.js";import{M as d}from"./MyDialog.e1451ef4.js";import{M as o}from"./MyPage.088b462f.js";import{q as u,f as n,o as r,t as i,a as c,w as m,v as p,a3 as v,U as f,V as b,L as y,b as _}from"./vue.89ed3d48.js";import"./request.356cbcf4.js";import"./index.547c0c45.js";import"./empty.f131d8fb.js";const g={class:"feedback_page"},w=p("div",null,"反馈列表",-1),j={class:"mytable"},k={class:"fcs"},M={class:"fcs"},z=f("修改状态"),C=f("已处理"),U=f("未处理"),V=p("div",{class:"line"},null,-1),h=f("删除"),q=u({setup(u){const q=n([]);(async()=>{const{status:e,body:l}=await a();1==e&&(q.value=l)})();const x=n([]),D=n(1),E=n(20),L=n(0),P=async()=>{const{status:a,body:l}=await e({size:E.value,current:D.value});1==a&&(L.value=l.total,x.value=l.records)};P();const S=async a=>{const{status:e}=await l({id:a[1],status:a[0]});1==e&&P()},A=n(""),B=n(!1),F=async()=>{1==(await t({id:A.value})).status&&(B.value=!1,P())};return(a,e)=>{const l=_("el-table-column"),t=_("el-link"),u=_("el-dropdown-item"),n=_("el-dropdown-menu"),G=_("el-dropdown"),H=_("el-table"),I=_("el-card");return r(),i("div",g,[c(I,{class:"mycard"},{header:m((()=>[w])),default:m((()=>[p("div",j,[c(H,{data:x.value,border:"",draggable:""},{empty:m((()=>[c(s)])),default:m((()=>[c(l,{label:"类型"},v({_:2},[q.value.length?{name:"default",fn:m((({row:a})=>[f(b(q.value.find((e=>e.id==a.feedback_type)).feedback_type),1)]))}:void 0]),1024),c(l,{prop:"content",label:"反馈内容"}),c(l,{prop:"mobile",label:"联系电话"}),c(l,{prop:"status",label:"处理状态"},{default:m((({row:a})=>[p("div",k,[p("div",{class:y(["status_dot",1==a.status?"sdot_g":"sdot_r"])},null,2),p("div",null,b(1==a.status?"已处理":"未处理"),1)])])),_:1}),c(l,{label:"操作"},{default:m((({row:a})=>[p("div",M,[c(G,{trigger:"click",onCommand:S},{dropdown:m((()=>[c(n,null,{default:m((()=>[c(u,{command:[1,a.id]},{default:m((()=>[C])),_:2},1032,["command"]),c(u,{command:[0,a.id]},{default:m((()=>[U])),_:2},1032,["command"])])),_:2},1024)])),default:m((()=>[c(t,{type:"primary"},{default:m((()=>[z])),_:1})])),_:2},1024),V,c(t,{type:"primary",onClick:e=>{return l=a.id,A.value=l,void(B.value=!0);var l}},{default:m((()=>[h])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])]),c(o,{total:L.value,page:D.value,"onUpdate:page":e[0]||(e[0]=a=>D.value=a),onChange:P,size:E.value,"onUpdate:size":e[1]||(e[1]=a=>E.value=a)},null,8,["total","page","size"])])),_:1}),c(d,{modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=a=>B.value=a),msg:"此反馈记录删除后无法撤回，请谨慎删除！",onSure:F},null,8,["modelValue"])])}}});export{q as default};
