import{F as e,G as a,H as l,I as s,r as t,a as d,O as o,X as n,Q as u,u as c,a9 as i,U as r,Y as p,a7 as v,W as m,K as _,P as f,V as h,$ as y,R as b,S as g,at as k,au as C}from"./vue.5acda677.js";import{a as V,_ as w,m as x,f as E,b as U,h as j,i as H,e as N,j as R}from"./index.a546203d.js";import{_ as T}from"./MyCascader.d746c4d1.js";const L=e({name:"CloseBold"}),z={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},B=[s("path",{fill:"currentColor",d:"M195.2 195.2a64 64 0 0190.496 0L512 421.504 738.304 195.2a64 64 0 0190.496 90.496L602.496 512 828.8 738.304a64 64 0 01-90.496 90.496L512 602.496 285.696 828.8a64 64 0 01-90.496-90.496L421.504 512 195.2 285.696a64 64 0 010-90.496z"},null,-1)];var F=V(L,[["render",function(e,s,t,d,o,n){return a(),l("svg",z,B)}]]);const K=e=>(k("data-v-6f54d896"),e=e(),C(),e),S={class:"search_components"},I={class:"search_main fc"},M={class:"iptbox fsc"},q={class:"his_search fcs els"},A=K((()=>s("div",null,"历史搜索：",-1))),G=["onClick"],O={class:"topitems fcs"},P={class:"contact_mode fcs"},Q={class:"fcs btns"},W=h("查询条件"),X=h("保存条件"),Y=h("重置条件"),$={class:"fcs"},D={class:"fsc ditems"},J={class:"dname els"},Z={class:"dbtns fcs"},ee=["onClick"],ae=K((()=>s("div",{class:"dline"},null,-1))),le=K((()=>s("div",null,"选择",-1))),se={key:1,class:"empty_drop"},te={class:"now_condition fcs"},de=K((()=>s("div",{class:"fs0"},"筛选条件：",-1))),oe={class:"list flex"},ne={class:"flex fjend"},ue=h("取消"),ce=h("确认");var ie=w(e({props:{words:null,hasHeight:{type:Boolean,default:!1},placeholder:null},emits:["heightSearch","search"],setup(e,{emit:k}){const C=e,V=t(!1),w=x(),L=t([]),z=t([]);w.getCAndC().then((e=>{L.value=e.c_type,z.value=e.contact}));const B=d({ctype:[],industry_id:[],addr:[],business_scope:"",contact:[]}),K=t(),ie=e=>{e&&e.resetFields()},re=()=>{be.value="条件组",ie(K.value),xe.business_scope="",xe.industry_id="",xe.addr="",xe.contact="",xe.ctype="",je.value=!1},pe=t(!1),ve=d({title:""}),me=t(),_e=d({title:[{required:!0,message:"请输入条件组名称",trigger:"change"}]}),fe=()=>{pe.value=!1,ve.title="",ie(me.value)},he=()=>{let e={},a=0,l=0;B.ctype.forEach((e=>{a|=Number(e)})),B.contact.forEach((e=>{l|=Number(e)}));let s=B.industry_id.join(",");return e={province:Number(B.addr[0])||"",city:Number(B.addr[1])||"",district:Number(B.addr[2])||"",business_scope:B.business_scope,industry_id:s,contact:l,company_type:a,conditions_name:ve.title},e},ye=()=>{j(he()).then((e=>{1==e.status&&(be.value=ve.title,pe.value=!1,ke())}))},be=t("条件组"),ge=t([]),ke=async()=>{const e=await H({current:1,size:10});1==e.status&&(ge.value=e.body)};C.hasHeight&&ke();const Ce=t(),Ve=e=>{re(),be.value=e.conditions_name,z.value.forEach((a=>{e.contact&a.value&&B.contact.push(a.value)}));[e.province,e.city,e.district].forEach((e=>{e&&B.addr.push(Number(e))})),B.industry_id=e.industry_id.split(","),B.business_scope=e.business_scope,L.value.forEach((a=>{e.company_type&a.value&&B.ctype.push(a.value)})),He()},we={business_scope:"经营范围",industry_id:"行业分类",addr:"省份地区",contact:"联系方式",ctype:"企业类型"},xe=d({business_scope:"",industry_id:"",addr:"",contact:"",ctype:""}),Ee=t(""),Ue=()=>{Ee.value.trim().length<1||Ee.value.trim().length>36?N("输入长度须在 1 ~ 36 之间"):k("search",Ee.value.trim())},je=t(!1),He=()=>{xe.business_scope=B.business_scope;let e="",a="";B.contact.forEach((a=>{var l;e+=(null==(l=z.value.find((e=>e.value==a)))?void 0:l.name)+"，"})),xe.contact=e.substring(0,e.length-1),B.ctype.forEach((e=>{var l;a+=(null==(l=L.value.find((a=>a.value==e)))?void 0:l.name)+"，"})),xe.ctype=a.substring(0,a.length-1),xe.industry_id=Te.value.getText(B.industry_id),xe.addr=Re.value.getText(B.addr),je.value=!0},Ne=e=>{switch(e){case"contact":let a="";B.contact.forEach((e=>{var l;a+=(null==(l=z.value.find((a=>a.value==e)))?void 0:l.name)+"，"})),xe.contact=a.substring(0,a.length-1);break;case"ctype":let l="";B.ctype.forEach((e=>{var a;l+=(null==(a=L.value.find((a=>a.value==e)))?void 0:a.name)+"，"})),xe.ctype=l.substring(0,l.length-1);break;case"industry_id":xe.industry_id=Te.value.getText(B.industry_id);break;case"addr":xe.addr=Re.value.getText(B.addr);break;default:xe[e]=B[e]}je.value=!0},Re=t(),Te=t(),Le=()=>{k("heightSearch",he())};return(t,d)=>{const k=o("el-icon"),C=o("el-input"),w=o("el-form-item"),x=o("el-checkbox"),j=o("el-checkbox-group"),H=o("el-button"),N=o("el-dropdown-item"),ie=o("el-dropdown-menu"),he=o("el-dropdown"),ke=o("el-form"),He=o("el-tag"),ze=o("el-dialog");return a(),l("div",S,[s("div",I,[s("div",M,[n(C,{modelValue:Ee.value,"onUpdate:modelValue":d[0]||(d[0]=e=>Ee.value=e),placeholder:e.placeholder,onKeyup:i(Ue,["enter"])},{prefix:u((()=>[n(k,{class:"searchicon"},{default:u((()=>[n(c(E))])),_:1})])),suffix:u((()=>[s("div",{class:"searchbtn",onClick:Ue},"查询一下")])),_:1},8,["modelValue","placeholder","onKeyup"]),e.hasHeight?(a(),l("div",{key:0,class:"heisearch",onClick:d[1]||(d[1]=e=>V.value=!0)},"高级查询")):r("",!0)]),s("div",q,[A,(a(!0),l(p,null,v(e.words,(e=>(a(),l("span",{key:e.id,onClick:a=>{Ee.value=e.keyword,Ue()}},m(e.keyword),9,G)))),128))])]),e.hasHeight?(a(),l("div",{key:0,class:_(["height_searchbox",{height_searchbox_show:V.value,height_condition_show:je.value}])},[n(k,{onClick:d[2]||(d[2]=e=>{V.value=!1,je.value=!1}),class:"closebtn rotate",size:"18px"},{default:u((()=>[n(c(F))])),_:1}),n(ke,{class:"myform",ref_key:"formRef",ref:K,model:c(B)},{default:u((()=>[s("div",O,[n(w,{label:"经营范围",prop:"business_scope"},{default:u((()=>[n(C,{modelValue:c(B).business_scope,"onUpdate:modelValue":d[3]||(d[3]=e=>c(B).business_scope=e),placeholder:"请输入经营范围",maxlength:"36",onChange:d[4]||(d[4]=e=>Ne("business_scope"))},null,8,["modelValue"])])),_:1}),n(w,{label:"行业分类",prop:"industry_id"},{default:u((()=>[n(T,{modelValue:c(B).industry_id,"onUpdate:modelValue":d[5]||(d[5]=e=>c(B).industry_id=e),type:"type",ref_key:"typeCRef",ref:Te,onChange:d[6]||(d[6]=e=>Ne("industry_id"))},null,8,["modelValue"])])),_:1}),n(w,{label:"省份地区",prop:"addr"},{default:u((()=>[n(T,{modelValue:c(B).addr,"onUpdate:modelValue":d[7]||(d[7]=e=>c(B).addr=e),type:"address",ref_key:"addrCRef",ref:Re,onChange:d[8]||(d[8]=e=>Ne("addr"))},null,8,["modelValue"])])),_:1})]),s("div",P,[n(w,{label:"联系方式",prop:"contact"},{default:u((()=>[n(j,{modelValue:c(B).contact,"onUpdate:modelValue":d[9]||(d[9]=e=>c(B).contact=e),onChange:d[10]||(d[10]=e=>Ne("contact"))},{default:u((()=>[(a(!0),l(p,null,v(z.value,(e=>(a(),f(x,{label:e.value,key:e.id},{default:u((()=>[h(m(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),n(w,{label:"企业类型",prop:"ctype"},{default:u((()=>[n(j,{modelValue:c(B).ctype,"onUpdate:modelValue":d[11]||(d[11]=e=>c(B).ctype=e),onChange:d[12]||(d[12]=e=>Ne("ctype"))},{default:u((()=>[(a(!0),l(p,null,v(L.value,(e=>(a(),f(x,{label:e.value,key:e.id},{default:u((()=>[h(m(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),s("div",Q,[n(H,{type:"primary",onClick:Le},{default:u((()=>[W])),_:1}),n(H,{onClick:d[13]||(d[13]=e=>pe.value=!0)},{default:u((()=>[X])),_:1}),n(H,{onClick:re},{default:u((()=>[Y])),_:1}),n(he,{onCommand:Ve,ref_key:"dropRef",ref:Ce},{dropdown:u((()=>[ge.value.length?(a(),f(ie,{key:0},{default:u((()=>[(a(!0),l(p,null,v(ge.value,((e,l)=>(a(),f(N,{command:e,key:e.id},{default:u((()=>[s("div",D,[s("div",J,m(e.conditions_name),1),s("div",Z,[s("div",{onClick:y((a=>((e,a)=>{R({id:e.id}).then((l=>{1==l.status&&(ge.value.splice(a,1),Ce.value.handleClose(),e.conditions_name==be.value&&(be.value="条件组"))}))})(e,l)),["stop"])},"删除",8,ee),ae,le])])])),_:2},1032,["command"])))),128))])),_:1})):(a(),l("div",se,"暂无数据"))])),default:u((()=>[s("div",$,[s("div",null,m(be.value),1),n(k,{class:"right_icon"},{default:u((()=>[n(c(U))])),_:1})])])),_:1},512)])])),_:1},8,["model"]),b(s("div",te,[de,s("div",oe,[(a(!0),l(p,null,v(c(xe),((e,s)=>(a(),l(p,null,[e?(a(),f(He,{key:s,closable:"",class:"mytag",onClose:e=>(e=>{xe[e]="","business_scope"==e?B.business_scope="":B[e]=[]})(s)},{default:u((()=>[h(m(we[s])+"："+m(e),1)])),_:2},1032,["onClose"])):r("",!0)],64)))),256))])],512),[[g,je.value]])],2)):r("",!0),e.hasHeight?(a(),f(ze,{key:1,modelValue:pe.value,"onUpdate:modelValue":d[15]||(d[15]=e=>pe.value=e),title:"新建筛选",width:"500px",onClose:fe},{footer:u((()=>[s("span",ne,[n(H,{onClick:fe},{default:u((()=>[ue])),_:1}),n(H,{type:"primary",disabled:!c(ve).title,onClick:ye},{default:u((()=>[ce])),_:1},8,["disabled"])])])),default:u((()=>[n(ke,{class:"myform no_margin",model:c(ve),rules:c(_e),ref_key:"addFormRef",ref:me},{default:u((()=>[n(w,{label:"条件组名称",prop:"title"},{default:u((()=>[n(C,{modelValue:c(ve).title,"onUpdate:modelValue":d[14]||(d[14]=e=>c(ve).title=e),placeholder:"请输入条件组名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])):r("",!0)])}}}),[["__scopeId","data-v-6f54d896"]]);export{ie as T};
