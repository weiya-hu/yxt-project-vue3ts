import{F as e,G as a,H as l,I as s,r as t,a as d,O as o,X as n,Q as u,u as i,a9 as c,U as r,Y as p,a7 as v,W as m,K as f,P as _,V as h,$ as y,R as b,S as g,at as k,au as C}from"./vue.5acda677.js";import{a as V,_ as w,b as x,c as U,d as E,f as H,h as N,e as R,i as j}from"./index.4847e6ad.js";import{_ as L}from"./MyCascader.b53f0195.js";const z=e({name:"CloseBold"}),B={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},F=[s("path",{fill:"currentColor",d:"M195.2 195.2a64 64 0 0190.496 0L512 421.504 738.304 195.2a64 64 0 0190.496 90.496L602.496 512 828.8 738.304a64 64 0 01-90.496 90.496L512 602.496 285.696 828.8a64 64 0 01-90.496-90.496L421.504 512 195.2 285.696a64 64 0 010-90.496z"},null,-1)];var K=V(z,[["render",function(e,s,t,d,o,n){return a(),l("svg",B,F)}]]);const S=e=>(k("data-v-540f47de"),e=e(),C(),e),T={class:"search_components"},I={class:"search_main fc"},M={class:"iptbox fsc"},q={class:"his_search fcs els"},G=S((()=>s("div",null,"历史搜索：",-1))),O=["onClick"],P={class:"topitems fcs"},Q={class:"contact_mode fcs"},W={class:"fcs btns"},X=h("查询条件"),Y=h("保存条件"),$=h("重置条件"),A={class:"fcs"},D={class:"fsc ditems"},J={class:"dname els"},Z={class:"dbtns fcs"},ee=["onClick"],ae=S((()=>s("div",{class:"dline"},null,-1))),le=S((()=>s("div",null,"选择",-1))),se={key:1,class:"empty_drop"},te={class:"now_condition fcs"},de=S((()=>s("div",{class:"fs0"},"筛选条件：",-1))),oe={class:"list flex"},ne={class:"flex fjend"},ue=h("取消"),ie=h("确认");var ce=w(e({props:{words:null,hasHeight:{type:Boolean,default:!1},placeholder:null},emits:["heightSearch","search"],setup(e,{emit:k}){const C=e,V=t(!1),w=t([]),z=t([]);C.hasHeight&&x().then((e=>{1==e.status&&(w.value=e.body.c_type,z.value=e.body.contact)}));const B=d({ctype:[],industry_id:[],addr:[],business_scope:"",contact:[]}),F=t(),S=e=>{e&&e.resetFields()},ce=()=>{ye.value="条件组",S(F.value),we.business_scope="",we.industry_id="",we.addr="",we.contact="",we.ctype="",Ee.value=!1},re=t(!1),pe=d({title:""}),ve=t(),me=d({title:[{required:!0,message:"请输入条件组名称",trigger:"change"}]}),fe=()=>{re.value=!1,pe.title="",S(ve.value)},_e=()=>{let e={},a=0,l=0;B.ctype.forEach((e=>{a|=Number(e)})),B.contact.forEach((e=>{l|=Number(e)}));let s=B.industry_id.join(",");return e={province:Number(B.addr[0])||"",city:Number(B.addr[1])||"",district:Number(B.addr[2])||"",business_scope:B.business_scope,industry_id:s,contact:l,company_type:a,conditions_name:pe.title},e},he=()=>{H(_e()).then((e=>{1==e.status&&(ye.value=pe.title,re.value=!1,ge())}))},ye=t("条件组"),be=t([]),ge=async()=>{const e=await N({current:1,size:10});1==e.status&&(be.value=e.body)};C.hasHeight&&ge();const ke=t(),Ce=e=>{S(F.value),ye.value=e.conditions_name,z.value.forEach((a=>{e.contact&a.value&&B.contact.push(a.value)}));[e.province,e.city,e.district].forEach((e=>{e&&B.addr.push(Number(e))})),B.industry_id=e.industry_id.split(","),B.business_scope=e.business_scope,w.value.forEach((a=>{e.company_type&a.value&&B.ctype.push(a.value)})),He()},Ve={business_scope:"经营范围",industry_id:"行业分类",addr:"省份地区",contact:"联系方式",ctype:"企业类型"},we=d({business_scope:"",industry_id:"",addr:"",contact:"",ctype:""}),xe=t(""),Ue=()=>{xe.value.trim().length<1||xe.value.trim().length>36?R("输入长度须在 1 ~ 36 之间"):k("search",xe.value.trim())},Ee=t(!1),He=()=>{we.business_scope=B.business_scope;let e="",a="";B.contact.forEach((a=>{var l;e+=(null==(l=z.value.find((e=>e.value==a)))?void 0:l.name)+"，"})),we.contact=e.substring(0,e.length-1),B.ctype.forEach((e=>{var l;a+=(null==(l=w.value.find((a=>a.value==e)))?void 0:l.name)+"，"})),we.ctype=a.substring(0,a.length-1),we.industry_id=Re.value.getText(),we.addr=Ne.value.getText(),Ee.value=!0},Ne=t(),Re=t(),je=()=>{k("heightSearch",_e())};return(t,d)=>{const k=o("el-icon"),C=o("el-input"),x=o("el-form-item"),H=o("el-checkbox"),N=o("el-checkbox-group"),R=o("el-button"),S=o("el-dropdown-item"),_e=o("el-dropdown-menu"),ge=o("el-dropdown"),Le=o("el-form"),ze=o("el-tag"),Be=o("el-dialog");return a(),l("div",T,[s("div",I,[s("div",M,[n(C,{modelValue:xe.value,"onUpdate:modelValue":d[0]||(d[0]=e=>xe.value=e),placeholder:e.placeholder,onKeyup:c(Ue,["enter"])},{prefix:u((()=>[n(k,{class:"searchicon"},{default:u((()=>[n(i(U))])),_:1})])),suffix:u((()=>[s("div",{class:"searchbtn",onClick:Ue},"查询一下")])),_:1},8,["modelValue","placeholder","onKeyup"]),e.hasHeight?(a(),l("div",{key:0,class:"heisearch",onClick:d[1]||(d[1]=e=>V.value=!0)},"高级查询")):r("",!0)]),s("div",q,[G,(a(!0),l(p,null,v(e.words,(e=>(a(),l("span",{key:e.id,onClick:a=>{xe.value=e.keyword,Ue()}},m(e.keyword),9,O)))),128))])]),e.hasHeight?(a(),l("div",{key:0,class:f(["height_searchbox",{height_searchbox_show:V.value,height_condition_show:Ee.value}])},[n(k,{onClick:d[2]||(d[2]=e=>{V.value=!1,Ee.value=!1}),class:"closebtn rotate",size:"18px"},{default:u((()=>[n(i(K))])),_:1}),n(Le,{class:"myform",ref_key:"formRef",ref:F,model:i(B)},{default:u((()=>[s("div",P,[n(x,{label:"经营范围",prop:"business_scope"},{default:u((()=>[n(C,{modelValue:i(B).business_scope,"onUpdate:modelValue":d[3]||(d[3]=e=>i(B).business_scope=e),placeholder:"请输入经营范围",maxlength:"36",onChange:He},null,8,["modelValue"])])),_:1}),n(x,{label:"行业分类",prop:"industry_id"},{default:u((()=>[n(L,{modelValue:i(B).industry_id,"onUpdate:modelValue":d[4]||(d[4]=e=>i(B).industry_id=e),type:"type",ref_key:"typeCRef",ref:Re,onChange:He},null,8,["modelValue"])])),_:1}),n(x,{label:"省份地区",prop:"addr"},{default:u((()=>[n(L,{modelValue:i(B).addr,"onUpdate:modelValue":d[5]||(d[5]=e=>i(B).addr=e),type:"address",ref_key:"addrCRef",ref:Ne,onChange:He},null,8,["modelValue"])])),_:1})]),s("div",Q,[n(x,{label:"联系方式",prop:"contact"},{default:u((()=>[n(N,{modelValue:i(B).contact,"onUpdate:modelValue":d[6]||(d[6]=e=>i(B).contact=e),onChange:He},{default:u((()=>[(a(!0),l(p,null,v(z.value,(e=>(a(),_(H,{label:e.value,key:e.id},{default:u((()=>[h(m(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),n(x,{label:"企业类型",prop:"ctype"},{default:u((()=>[n(N,{modelValue:i(B).ctype,"onUpdate:modelValue":d[7]||(d[7]=e=>i(B).ctype=e),onChange:He},{default:u((()=>[(a(!0),l(p,null,v(w.value,(e=>(a(),_(H,{label:e.value,key:e.id},{default:u((()=>[h(m(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),s("div",W,[n(R,{type:"primary",onClick:je},{default:u((()=>[X])),_:1}),n(R,{onClick:d[8]||(d[8]=e=>re.value=!0)},{default:u((()=>[Y])),_:1}),n(R,{onClick:ce},{default:u((()=>[$])),_:1}),n(ge,{onCommand:Ce,ref_key:"dropRef",ref:ke},{dropdown:u((()=>[be.value.length?(a(),_(_e,{key:0},{default:u((()=>[(a(!0),l(p,null,v(be.value,((e,l)=>(a(),_(S,{command:e,key:e.id},{default:u((()=>[s("div",D,[s("div",J,m(e.conditions_name),1),s("div",Z,[s("div",{onClick:y((a=>((e,a)=>{j({id:e.id}).then((l=>{1==l.status&&(be.value.splice(a,1),ke.value.handleClose(),e.conditions_name==ye.value&&(ye.value="条件组"))}))})(e,l)),["stop"])},"删除",8,ee),ae,le])])])),_:2},1032,["command"])))),128))])),_:1})):(a(),l("div",se,"暂无数据"))])),default:u((()=>[s("div",A,[s("div",null,m(ye.value),1),n(k,{class:"right_icon"},{default:u((()=>[n(i(E))])),_:1})])])),_:1},512)])])),_:1},8,["model"]),b(s("div",te,[de,s("div",oe,[(a(!0),l(p,null,v(i(we),((e,s)=>(a(),l(p,null,[e?(a(),_(ze,{key:s,closable:"",class:"mytag",onClose:e=>(e=>{we[e]="","business_scope"==e?B.business_scope="":B[e]=[]})(s)},{default:u((()=>[h(m(Ve[s])+"："+m(e),1)])),_:2},1032,["onClose"])):r("",!0)],64)))),256))])],512),[[g,Ee.value]])],2)):r("",!0),e.hasHeight?(a(),_(Be,{key:1,modelValue:re.value,"onUpdate:modelValue":d[10]||(d[10]=e=>re.value=e),title:"新建筛选",width:"500px",onClose:fe},{footer:u((()=>[s("span",ne,[n(R,{onClick:fe},{default:u((()=>[ue])),_:1}),n(R,{type:"primary",disabled:!i(pe).title,onClick:he},{default:u((()=>[ie])),_:1},8,["disabled"])])])),default:u((()=>[n(Le,{class:"myform no_margin",model:i(pe),rules:i(me),ref_key:"addFormRef",ref:ve},{default:u((()=>[n(x,{label:"条件组名称",prop:"title"},{default:u((()=>[n(C,{modelValue:i(pe).title,"onUpdate:modelValue":d[9]||(d[9]=e=>i(pe).title=e),placeholder:"请输入条件组名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])):r("",!0)])}}}),[["__scopeId","data-v-540f47de"]]);export{ce as T};
