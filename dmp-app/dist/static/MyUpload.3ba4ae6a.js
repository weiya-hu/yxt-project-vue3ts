import{_ as e,v as a,x as s,y as l}from"./index.8618f993.js";import{F as o,r as t,O as i,G as d,P as u,Q as n,I as c,K as r,X as m,u as p,W as v,H as f,V as y}from"./vue.5acda677.js";const x={class:"upbox"},h={class:"fc fcc"},_={class:"file_name"},b={class:"upbox"},k={class:"up_rt"},g={key:0,class:"up_tip dfcolor fcs"},L=y("下载模板示例"),V={key:1,class:"up_tip dfcolor"};var w=e(o({props:{modelValue:{default:""},exnameList:{default:()=>[".zip",".rar",".7z"]},downLink:null,msg:null,maxSize:{default:4}},emits:["update:modelValue","change","error","success"],setup(e,{expose:o,emit:y}){const w=e,z=t(),I=t({}),S=t(""),j=t(""),O=t(""),C=e=>{z.value.clearFiles(),z.value.handleStart(e[0])},F=(e,a)=>{const s=e.name.lastIndexOf("."),l=e.name.substring(s);w.exnameList.indexOf(l)<0?y("change","type"):e.size/1024/1024>w.maxSize?y("change","size"):(y("change",""),y("update:modelValue",e.name),j.value=l)},K=(e,a)=>{y("success",O.value)},M=(e,a,s)=>{P(),y("error",e)},P=()=>{z.value.clearFiles()},A=()=>{};return o({submit:()=>{l({site:w.downLink?"dmp_excel":"dmp_attach"}).then((e=>new Promise(((a,s)=>{1==e.status?(S.value=e.body.host,I.value={key:e.body.dir+"/"+e.body.uuid+j.value,OSSAccessKeyId:e.body.accessid,success_action_status:200,policy:e.body.policy,signature:e.body.signature,"Content-Disposition":"attachment; filename="+encodeURIComponent(w.modelValue)},a(e.body.host+"/"+e.body.dir+"/"+e.body.uuid+j.value)):s()})))).then((e=>{O.value=e,z.value.submit()})).catch((e=>{y("error",e)}))},clear:P}),(l,o)=>{const t=i("el-icon"),y=i("el-link"),w=i("el-upload");return d(),u(w,{action:S.value,"auto-upload":!1,limit:1,multiple:!1,"show-file-list":!1,data:I.value,"on-exceed":C,"on-change":F,"on-success":K,"on-error":M,ref_key:"upload",ref:z,accept:e.exnameList.join(","),class:"my_upload"},{default:n((()=>[c("div",x,[c("div",{class:r(["fcc up_lt",e.modelValue?"hasfile":""])},[c("div",h,[m(t,null,{default:n((()=>[e.modelValue?(d(),u(p(a),{key:0})):(d(),u(p(s),{key:1}))])),_:1}),c("div",_,v(e.modelValue||"点击上传"),1)])],2)])])),tip:n((()=>[c("div",b,[c("div",k,[c("div",null,v(e.msg||"可适当描述所处的行业现状，以及公司目前采取的运营、渠道、推广等多种获客方式，以便运营人员进一步了解熟悉您的所处的行业及需求，同时也为您提供更好的客户服务。"),1),e.downLink?(d(),f("div",g,[m(y,{type:"primary",href:e.downLink,onClick:A,download:"模板.xlsx"},{default:n((()=>[L])),_:1},8,["href"])])):(d(),f("div",V,"附件支持 "+v(e.exnameList.join(" "))+"，大小不超过4M",1))])])])),_:1},8,["action","data","accept"])}}}),[["__scopeId","data-v-4e49b7e5"]]);export{w as M};
