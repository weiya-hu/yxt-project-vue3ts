var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{a as r,M as u}from"./MyEmpty.264a195e.js";import{T as i}from"./TopBtns.9de9b4e3.js";import{_ as n,m as p,k as c,n as m,o as v,e as y}from"./index.8618f993.js";import{g as f,a as b,b as _,s as w}from"./findC.1dcde547.js";import{_ as g}from"./MyCascader.6170cadd.js";import{F as h,f as V,r as x,R as k,G as j,H as O,I as C,X as U,Q as P,Y as R,a7 as H,u as M,W as S,V as T,O as z,a6 as I,P as L}from"./vue.5acda677.js";const B={class:"kzdata_page_c"},E={class:"top_search"},F={class:"fcs"},N=T(" 查询 "),D=T(" 重置 "),G={class:"mytable"},Q=["innerHTML"],W={style:{width:"100px"},class:"fcc"},X={class:"els"},Y={style:{width:"100px"},class:"fcc"},q={class:"els"};var A=n(h({setup(e){const n=p(),h=V((()=>n.state.addressHash)),A=V((()=>n.state.typeHash));x([]);const J=["","success","info","warning","danger"],K=x(0),Z=x(!1),$=x([]),ee=x({size:50,current:1,source:1}),ae=x([]);(async()=>{const e=await b();1===e.status&&(ae.value=e.body)})();const le=[{id:0},{id:1,min:18,max:23},{id:2,min:24,max:30},{id:3,min:31,max:40},{id:4,min:41,max:49},{id:5,min:50}],te=[{id:0,value:"不限"},{id:1,value:"男"},{id:2,value:"女"}],de=x({keyword:"",industry_id:[],address:[],age:"",education:"",sex:""}),se=x(),oe=()=>{se.value.resetFields()},re=()=>{ee.value.current=1,ue()},ue=async()=>{var e,r;Z.value=!0;const u=await _((i=((e,a)=>{for(var l in a||(a={}))d.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&o(e,l,a[l]);return e})({},ee.value),n={keyword:de.value.keyword,industry_id:de.value.industry_id.join(),province:de.value.address[0]||null,city:de.value.address[1]||null,district:de.value.address[2]||null,start_age:(null==(e=le.find((e=>e.id===Number(de.value.age))))?void 0:e.min)||null,end_age:(null==(r=le.find((e=>e.id===Number(de.value.age))))?void 0:r.max)||null,education:de.value.education,sex:de.value.sex},a(i,l(n))));var i,n;Z.value=!1,1===u.status?(K.value=u.body.total,$.value=u.body.records):y("查询失败")},ie=x([]),ne=e=>{ie.value=e.map((e=>e.id))},pe=()=>{ue()},ce=x(),me=x(),ve=V((()=>!ie.value.length)),ye=async()=>{me.value.setLoading(!0);const e=await w({list:ie.value});me.value.close(e.message),ie.value=[],ce.value.clearSelection()};return(e,a)=>{const l=z("el-form-item"),t=z("el-input"),d=z("el-radio"),s=z("el-radio-group"),o=z("el-button"),n=z("el-form"),p=z("el-table-column"),y=z("el-tooltip"),b=z("el-tag"),_=z("el-table"),w=I("loading");return k((j(),O("div",B,[C("div",E,[U(n,{ref_key:"formRef",ref:se,model:de.value},{default:P((()=>[C("div",F,[U(l,{label:"行业",prop:"industry_id"},{default:P((()=>[U(g,{modelValue:de.value.industry_id,"onUpdate:modelValue":a[0]||(a[0]=e=>de.value.industry_id=e),type:"type",ref:"typeCRef"},null,8,["modelValue"])])),_:1}),U(l,{label:"地区",prop:"address"},{default:P((()=>[U(g,{modelValue:de.value.address,"onUpdate:modelValue":a[1]||(a[1]=e=>de.value.address=e),type:"address",ref:"addrCRef"},null,8,["modelValue"])])),_:1}),U(l,{label:"关键字",prop:"keyword"},{default:P((()=>[U(t,{modelValue:de.value.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>de.value.keyword=e),placeholder:"请输入职业、兴趣等关键词",maxlength:"15"},null,8,["modelValue"])])),_:1})]),U(l,{label:"年龄",prop:"age"},{default:P((()=>[U(s,{modelValue:de.value.age,"onUpdate:modelValue":a[3]||(a[3]=e=>de.value.age=e)},{default:P((()=>[(j(),O(R,null,H(le,(e=>U(d,{label:e.id,key:e.id},{default:P((()=>[T(S(e.min?e.max?e.min+"岁-"+e.max+"岁":e.min+"+岁":"不限"),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),U(l,{label:"学历",prop:"education"},{default:P((()=>[U(s,{modelValue:de.value.education,"onUpdate:modelValue":a[4]||(a[4]=e=>de.value.education=e)},{default:P((()=>[(j(!0),O(R,null,H(ae.value,(e=>(j(),L(d,{label:e.value,key:e.id},{default:P((()=>[T(S(e.id?e.name:"不限"),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),U(l,{label:"性别",prop:"sex"},{default:P((()=>[U(s,{modelValue:de.value.sex,"onUpdate:modelValue":a[5]||(a[5]=e=>de.value.sex=e)},{default:P((()=>[(j(),O(R,null,H(te,(e=>U(d,{label:e.id,key:e.id},{default:P((()=>[T(S(e.value),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),C("div",null,[U(o,{type:"primary",onClick:re},{default:P((()=>[N])),_:1}),U(o,{onClick:oe},{default:P((()=>[D])),_:1})])])),_:1},8,["model"])]),U(i,{total:K.value,syncbtn:"",onSync:ye,ref_key:"topBtnRef",ref:me,"sync-api":M(f),"sync-disabled":M(ve),class:"topbtns"},null,8,["total","sync-api","sync-disabled"]),C("div",G,[U(_,{data:$.value,style:{width:"100%"},height:"100%",onSelectionChange:ne,ref_key:"tableRef",ref:ce},{empty:P((()=>[U(r)])),default:P((()=>[U(p,{type:"selection",width:"50"}),U(p,{property:"name",label:"姓名",width:"70"}),U(p,{property:"sex",label:"性别",width:"60"},{default:P((e=>[C("div",null,S(0==e.row.sex?"未知":1==e.row.sex?"男":"女"),1)])),_:1}),U(p,{property:"age",label:"年龄",width:"70"}),U(p,{property:"education",label:"学历",width:"130"},{default:P((e=>[T(S(ae.value.find((a=>a.id===e.row.education)).name),1)])),_:1}),U(p,{property:"mobiles",label:"联系方式",width:"120"},{default:P((e=>[C("div",{innerHTML:e.row.mobiles},null,8,Q)])),_:1}),U(p,{property:"email",label:"邮箱",width:"180"}),U(p,{property:"industry_id",label:"从事行业",width:"110"},{default:P((e=>[U(y,{effect:"dark",placement:"top"},{content:P((()=>[C("div",W,S(M(c)(e.row.industry_id,M(A))),1)])),default:P((()=>[C("div",X,S(M(c)(e.row.industry_id,M(A),"last")),1)])),_:2},1024)])),_:1}),U(p,{property:"job",label:"职业",width:"120"}),U(p,{property:"tags",label:"行为兴趣",width:"250"},{default:P((({row:e})=>[(j(!0),O(R,null,H(e.tags,((e,a)=>(j(),L(b,{key:a,class:"user_tag",type:J[a]},{default:P((()=>[T(S(e),1)])),_:2},1032,["type"])))),128))])),_:1}),U(p,{property:"address",label:"地区",width:"140"},{default:P((e=>[U(y,{effect:"dark",placement:"top"},{content:P((()=>[C("div",Y,S(M(c)(M(m)(e.row.province,e.row.city,e.row.district),M(h))),1)])),default:P((()=>[C("div",q,S(M(c)(M(m)(e.row.province,e.row.city,e.row.district),M(h))),1)])),_:2},1024)])),_:1}),U(p,{property:"source",label:"来源",width:"100"},{default:P((e=>[C("div",null,S(M(v)(e.row.source)),1)])),_:1})])),_:1},8,["data"])]),U(u,{total:K.value,size:50,modelValue:ee.value.current,"onUpdate:modelValue":a[6]||(a[6]=e=>ee.value.current=e),onChange:pe},null,8,["total","modelValue"])])),[[w,Z.value]])}}}),[["__scopeId","data-v-f36e0bf6"]]);export{A as default};
