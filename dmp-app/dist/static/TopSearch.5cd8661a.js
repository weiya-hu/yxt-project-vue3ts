import{F as e,G as a,H as l,I as s,r as t,a as d,O as o,X as u,Q as n,u as c,a9 as i,U as r,Y as p,a7 as m,W as v,K as f,P as _,V as h,$ as y,R as b,S as g,at as k,au as V}from"./vue.5acda677.js";import{a as C,_ as w,b as x,c as U,d as E,f as H,h as N,e as R,i as j}from"./index.8e773d39.js";import{_ as L}from"./MyCascader.8d53fe9b.js";const z=e({name:"CloseBold"}),B={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},F=[s("path",{fill:"currentColor",d:"M195.2 195.2a64 64 0 0190.496 0L512 421.504 738.304 195.2a64 64 0 0190.496 90.496L602.496 512 828.8 738.304a64 64 0 01-90.496 90.496L512 602.496 285.696 828.8a64 64 0 01-90.496-90.496L421.504 512 195.2 285.696a64 64 0 010-90.496z"},null,-1)];var K=C(z,[["render",function(e,s,t,d,o,u){return a(),l("svg",B,F)}]]);const S=e=>(k("data-v-4f227fec"),e=e(),V(),e),T={class:"search_components"},I={class:"search_main fc"},M={class:"iptbox fsc"},q={class:"his_search fcs els"},G=S((()=>s("div",null,"历史搜索：",-1))),O=["onClick"],P={class:"topitems fcs"},Q={class:"contact_mode fcs"},W={class:"fcs btns"},X=h("查询条件"),Y=h("保存条件"),$=h("重置条件"),A={class:"fcs"},D={class:"fsc ditems"},J={class:"dname els"},Z={class:"dbtns fcs"},ee=["onClick"],ae=S((()=>s("div",{class:"dline"},null,-1))),le=S((()=>s("div",null,"选择",-1))),se={key:1,class:"empty_drop"},te={class:"now_condition fcs"},de=S((()=>s("div",{class:"fs0"},"筛选条件：",-1))),oe={class:"f1 els"},ue={class:"flex fjend"},ne=h("取消"),ce=h("确认");var ie=w(e({props:{words:null,hasHeight:{type:Boolean,default:!1},placeholder:null},emits:["heightSearch","search"],setup(e,{emit:k}){const V=e,C=t(!1),w=t([]),z=t([]);V.hasHeight&&x().then((e=>{1==e.status&&(w.value=e.body.c_type,z.value=e.body.contact)}));const B=d({ctype:[],industry_id:[],addr:[],business_scope:"",contact:[]}),F=t(),S=e=>{e&&e.resetFields()},ie=()=>{ye.value="条件组",S(F.value)},re=t(!1),pe=d({title:""}),me=t(),ve=d({title:[{required:!0,message:"请输入条件组名称",trigger:"change"}]}),fe=()=>{re.value=!1,pe.title="",S(me.value)},_e=()=>{let e={},a=0,l=0;B.ctype.forEach((e=>{a|=Number(e)})),B.contact.forEach((e=>{l|=Number(e)}));let s=B.industry_id.join(",");return e={province:Number(B.addr[0])||"",city:Number(B.addr[1])||"",district:Number(B.addr[2])||"",business_scope:B.business_scope,industry_id:s,contact:l,company_type:a,conditions_name:pe.title},e},he=()=>{H(_e()).then((e=>{1==e.status&&(ye.value=pe.title,re.value=!1,ge())}))},ye=t("条件组"),be=t([]),ge=async()=>{const e=await N({current:1,size:10});1==e.status&&(be.value=e.body)};V.hasHeight&&ge();const ke=t(),Ve=e=>{S(F.value),ye.value=e.conditions_name,z.value.forEach((a=>{e.contact&a.value&&B.contact.push(a.value)}));[e.province,e.city,e.district].forEach((e=>{e&&B.addr.push(Number(e))})),B.industry_id=e.industry_id.split(","),B.business_scope=e.business_scope,w.value.forEach((a=>{e.company_type&a.value&&B.ctype.push(a.value)}))},Ce={business_scope:"经营范围",industry_id:"行业分类",addr:"省份地区",contact:"联系方式",ctype:"企业类型"},we=d({business_scope:"",industry_id:"",addr:"",contact:"",ctype:""}),xe=t(""),Ue=()=>{xe.value.trim().length<1||xe.value.trim().length>36?R("输入长度须在 1 ~ 36 之间"):k("search",xe.value.trim())},Ee=t(!1),He=t(),Ne=t(),Re=()=>{we.business_scope=B.business_scope;let e="",a="";B.contact.forEach((a=>{var l;e+=(null==(l=z.value.find((e=>e.value==a)))?void 0:l.name)+"，"})),we.contact=e.substring(0,e.length-1),B.ctype.forEach((e=>{var l;a+=(null==(l=w.value.find((a=>a.value==e)))?void 0:l.name)+"，"})),we.ctype=a.substring(0,a.length-1),we.industry_id=Ne.value.getText(),we.addr=He.value.getText(),Ee.value=!0,k("heightSearch",_e())};return(t,d)=>{const k=o("el-icon"),V=o("el-input"),x=o("el-form-item"),H=o("el-checkbox"),N=o("el-checkbox-group"),R=o("el-button"),S=o("el-dropdown-item"),_e=o("el-dropdown-menu"),ge=o("el-dropdown"),je=o("el-form"),Le=o("el-tag"),ze=o("el-dialog");return a(),l("div",T,[s("div",I,[s("div",M,[u(V,{modelValue:xe.value,"onUpdate:modelValue":d[0]||(d[0]=e=>xe.value=e),placeholder:e.placeholder,onKeyup:i(Ue,["enter"])},{prefix:n((()=>[u(k,{class:"searchicon"},{default:n((()=>[u(c(U))])),_:1})])),suffix:n((()=>[s("div",{class:"searchbtn",onClick:Ue},"查询一下")])),_:1},8,["modelValue","placeholder","onKeyup"]),e.hasHeight?(a(),l("div",{key:0,class:"heisearch",onClick:d[1]||(d[1]=e=>C.value=!0)},"高级查询")):r("",!0)]),s("div",q,[G,(a(!0),l(p,null,m(e.words,(e=>(a(),l("span",{key:e.id,onClick:a=>{xe.value=e.keyword,Ue()}},v(e.keyword),9,O)))),128))])]),e.hasHeight?(a(),l("div",{key:0,class:f(["height_searchbox",{height_searchbox_show:C.value,height_condition_show:Ee.value}])},[u(k,{onClick:d[2]||(d[2]=e=>{C.value=!1,Ee.value=!1}),class:"closebtn rotate",size:"18px"},{default:n((()=>[u(c(K))])),_:1}),u(je,{class:"myform",ref_key:"formRef",ref:F,model:c(B)},{default:n((()=>[s("div",P,[u(x,{label:"经营范围",prop:"business_scope"},{default:n((()=>[u(V,{modelValue:c(B).business_scope,"onUpdate:modelValue":d[3]||(d[3]=e=>c(B).business_scope=e),placeholder:"请输入经营范围",maxlength:"36"},null,8,["modelValue"])])),_:1}),u(x,{label:"行业分类",prop:"industry_id"},{default:n((()=>[u(L,{modelValue:c(B).industry_id,"onUpdate:modelValue":d[4]||(d[4]=e=>c(B).industry_id=e),type:"type",ref_key:"typeCRef",ref:Ne},null,8,["modelValue"])])),_:1}),u(x,{label:"省份地区",prop:"addr"},{default:n((()=>[u(L,{modelValue:c(B).addr,"onUpdate:modelValue":d[5]||(d[5]=e=>c(B).addr=e),type:"address",ref_key:"addrCRef",ref:He},null,8,["modelValue"])])),_:1})]),s("div",Q,[u(x,{label:"联系方式",prop:"contact"},{default:n((()=>[u(N,{modelValue:c(B).contact,"onUpdate:modelValue":d[6]||(d[6]=e=>c(B).contact=e)},{default:n((()=>[(a(!0),l(p,null,m(z.value,(e=>(a(),_(H,{label:e.value,key:e.id},{default:n((()=>[h(v(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),u(x,{label:"企业类型",prop:"ctype"},{default:n((()=>[u(N,{modelValue:c(B).ctype,"onUpdate:modelValue":d[7]||(d[7]=e=>c(B).ctype=e)},{default:n((()=>[(a(!0),l(p,null,m(w.value,(e=>(a(),_(H,{label:e.value,key:e.id},{default:n((()=>[h(v(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),s("div",W,[u(R,{type:"primary",onClick:Re},{default:n((()=>[X])),_:1}),u(R,{onClick:d[8]||(d[8]=e=>re.value=!0)},{default:n((()=>[Y])),_:1}),u(R,{onClick:ie},{default:n((()=>[$])),_:1}),u(ge,{onCommand:Ve,ref_key:"dropRef",ref:ke},{dropdown:n((()=>[be.value.length?(a(),_(_e,{key:0},{default:n((()=>[(a(!0),l(p,null,m(be.value,((e,l)=>(a(),_(S,{command:e,key:e.id},{default:n((()=>[s("div",D,[s("div",J,v(e.conditions_name),1),s("div",Z,[s("div",{onClick:y((a=>((e,a)=>{j({id:e.id}).then((l=>{1==l.status&&(be.value.splice(a,1),ke.value.handleClose(),e.conditions_name==ye.value&&(ye.value="条件组"))}))})(e,l)),["stop"])},"删除",8,ee),ae,le])])])),_:2},1032,["command"])))),128))])),_:1})):(a(),l("div",se,"暂无数据"))])),default:n((()=>[s("div",A,[s("div",null,v(ye.value),1),u(k,{class:"right_icon"},{default:n((()=>[u(c(E))])),_:1})])])),_:1},512)])])),_:1},8,["model"]),b(s("div",te,[de,s("div",oe,[(a(!0),l(p,null,m(c(we),((e,s)=>(a(),l(p,null,[e?(a(),_(Le,{key:s,closable:"",class:"mytag",onClose:e=>(e=>{we[e]="","business_scope"==e?B.business_scope="":B[e]=[]})(s)},{default:n((()=>[h(v(Ce[s])+"："+v(e),1)])),_:2},1032,["onClose"])):r("",!0)],64)))),256))])],512),[[g,Ee.value]])],2)):r("",!0),e.hasHeight?(a(),_(ze,{key:1,modelValue:re.value,"onUpdate:modelValue":d[10]||(d[10]=e=>re.value=e),title:"新建筛选",width:"500px",onClose:fe},{footer:n((()=>[s("span",ue,[u(R,{onClick:fe},{default:n((()=>[ne])),_:1}),u(R,{type:"primary",disabled:!c(pe).title,onClick:he},{default:n((()=>[ce])),_:1},8,["disabled"])])])),default:n((()=>[u(je,{class:"myform no_margin",model:c(pe),rules:c(ve),ref_key:"addFormRef",ref:me},{default:n((()=>[u(x,{label:"条件组名称",prop:"title"},{default:n((()=>[u(V,{modelValue:c(pe).title,"onUpdate:modelValue":d[9]||(d[9]=e=>c(pe).title=e),placeholder:"请输入条件组名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])):r("",!0)])}}}),[["__scopeId","data-v-4f227fec"]]);export{ie as T};
