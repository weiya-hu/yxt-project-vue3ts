import{F as e,G as a,H as l,I as s,r as t,a as d,O as o,X as u,Q as c,u as i,U as n,Y as r,a7 as p,W as v,K as f,P as m,V as _,$ as h,R as y,S as b,at as g,au as k}from"./vue.2fa59680.js";import{a as V,_ as C,c as w,d as x,e as U,f as E,h as H,i as N}from"./index.e956d55f.js";import{_ as R}from"./MyCascader.e5f7b563.js";const j=e({name:"CloseBold"}),L={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},z=[s("path",{fill:"currentColor",d:"M195.2 195.2a64 64 0 0190.496 0L512 421.504 738.304 195.2a64 64 0 0190.496 90.496L602.496 512 828.8 738.304a64 64 0 01-90.496 90.496L512 602.496 285.696 828.8a64 64 0 01-90.496-90.496L421.504 512 195.2 285.696a64 64 0 010-90.496z"},null,-1)];var B=V(j,[["render",function(e,s,t,d,o,u){return a(),l("svg",L,z)}]]);const F=e=>(g("data-v-92fea956"),e=e(),k(),e),S={class:"search_components"},T={class:"search_main fc"},I={class:"iptbox fsc"},M={class:"his_search fcs"},q=F((()=>s("div",null,"历史搜索：",-1))),G=["onClick"],K={class:"topitems fcs"},O={class:"contact_mode fcs"},P={class:"fcs btns"},Q=_("查询条件"),W=_("保存条件"),X=_("重置条件"),Y={class:"fcs"},$={class:"fsc ditems"},A={class:"dname els"},D={class:"dbtns fcs"},J=["onClick"],Z=F((()=>s("div",{class:"dline"},null,-1))),ee=F((()=>s("div",null,"选择",-1))),ae={key:1,class:"empty_drop"},le={class:"now_condition fcs"},se=F((()=>s("div",{class:"fs0"},"筛选条件：",-1))),te={class:"f1 els"},de={class:"flex fjend"},oe=_("取消"),ue=_("确认");var ce=C(e({props:{words:null,hasHeight:{type:Boolean,default:!1},placeholder:null},emits:["heightSearch","search"],setup(e,{emit:g}){const k=e,V=t(!1),C=t([]),j=t([]);k.hasHeight&&w().then((e=>{1==e.status&&(C.value=e.body.c_type,j.value=e.body.contact)}));const L=d({ctype:[],industry_id:[],addr:[],business_scope:"",contact:[]}),z=t(),F=e=>{e&&e.resetFields()},ce=()=>{_e.value="条件组",F(z.value)},ie=t(!1),ne=d({title:""}),re=t(),pe=d({title:[{required:!0,message:"请输入条件组名称",trigger:"change"}]}),ve=()=>{ie.value=!1,ne.title="",F(re.value)},fe=()=>{let e={},a=0,l=0;L.ctype.forEach((e=>{a|=Number(e)})),L.contact.forEach((e=>{l|=Number(e)}));let s=L.industry_id.join(",");return e={province:Number(L.addr[0])||"",city:Number(L.addr[1])||"",district:Number(L.addr[2])||"",business_scope:L.business_scope,industry_id:s,contact:l,company_type:a,conditions_name:ne.title},e},me=()=>{E(fe()).then((e=>{1==e.status&&(_e.value=ne.title,ie.value=!1,ye())}))},_e=t("条件组"),he=t([]),ye=async()=>{const e=await H({current:1,size:10});1==e.status&&(he.value=e.body)};k.hasHeight&&ye();const be=t(),ge=e=>{F(z.value),_e.value=e.conditions_name,j.value.forEach((a=>{e.contact&a.value&&L.contact.push(a.value)}));[e.province,e.city,e.district].forEach((e=>{e&&L.addr.push(Number(e))})),L.industry_id=e.industry_id.split(","),L.business_scope=e.business_scope,C.value.forEach((a=>{e.company_type&a.value&&L.ctype.push(a.value)}))},ke={business_scope:"经营范围",industry_id:"行业分类",addr:"省份地区",contact:"联系方式",ctype:"企业类型"},Ve=d({business_scope:"",industry_id:"",addr:"",contact:"",ctype:""}),Ce=t(""),we=()=>{g("search",Ce.value)},xe=t(!1),Ue=t(),Ee=t(),He=()=>{Ve.business_scope=L.business_scope;let e="",a="";L.contact.forEach((a=>{var l;e+=(null==(l=j.value.find((e=>e.value==a)))?void 0:l.name)+"，"})),Ve.contact=e.substring(0,e.length-1),L.ctype.forEach((e=>{var l;a+=(null==(l=C.value.find((a=>a.value==e)))?void 0:l.name)+"，"})),Ve.ctype=a.substring(0,a.length-1),Ve.industry_id=Ee.value.getText(),Ve.addr=Ue.value.getText(),xe.value=!0,g("heightSearch",fe())};return(t,d)=>{const g=o("el-icon"),k=o("el-input"),w=o("el-form-item"),E=o("el-checkbox"),H=o("el-checkbox-group"),F=o("el-button"),fe=o("el-dropdown-item"),ye=o("el-dropdown-menu"),Ne=o("el-dropdown"),Re=o("el-form"),je=o("el-tag"),Le=o("el-dialog");return a(),l("div",S,[s("div",T,[s("div",I,[u(k,{modelValue:Ce.value,"onUpdate:modelValue":d[0]||(d[0]=e=>Ce.value=e),placeholder:e.placeholder},{prefix:c((()=>[u(g,{class:"searchicon"},{default:c((()=>[u(i(x))])),_:1})])),suffix:c((()=>[s("div",{class:"searchbtn",onClick:we},"查询一下")])),_:1},8,["modelValue","placeholder"]),e.hasHeight?(a(),l("div",{key:0,class:"heisearch",onClick:d[1]||(d[1]=e=>V.value=!0)},"高级查询")):n("",!0)]),s("div",M,[q,(a(!0),l(r,null,p(e.words,(e=>(a(),l("span",{key:e.id,onClick:a=>{Ce.value=e.keyword,we()}},v(e.keyword),9,G)))),128))])]),e.hasHeight?(a(),l("div",{key:0,class:f(["height_searchbox",{height_searchbox_show:V.value,height_condition_show:xe.value}])},[u(g,{onClick:d[2]||(d[2]=e=>{V.value=!1,xe.value=!1}),class:"closebtn rotate",size:"18px"},{default:c((()=>[u(i(B))])),_:1}),u(Re,{class:"myform",ref_key:"formRef",ref:z,model:i(L)},{default:c((()=>[s("div",K,[u(w,{label:"经营范围",prop:"business_scope"},{default:c((()=>[u(k,{modelValue:i(L).business_scope,"onUpdate:modelValue":d[3]||(d[3]=e=>i(L).business_scope=e),placeholder:"请输入经营范围"},null,8,["modelValue"])])),_:1}),u(w,{label:"行业分类",prop:"industry_id"},{default:c((()=>[u(R,{modelValue:i(L).industry_id,"onUpdate:modelValue":d[4]||(d[4]=e=>i(L).industry_id=e),type:"type",ref_key:"typeCRef",ref:Ee},null,8,["modelValue"])])),_:1}),u(w,{label:"省份地区",prop:"addr"},{default:c((()=>[u(R,{modelValue:i(L).addr,"onUpdate:modelValue":d[5]||(d[5]=e=>i(L).addr=e),type:"address",ref_key:"addrCRef",ref:Ue},null,8,["modelValue"])])),_:1})]),s("div",O,[u(w,{label:"联系方式",prop:"contact"},{default:c((()=>[u(H,{modelValue:i(L).contact,"onUpdate:modelValue":d[6]||(d[6]=e=>i(L).contact=e)},{default:c((()=>[(a(!0),l(r,null,p(j.value,(e=>(a(),m(E,{label:e.value,key:e.id},{default:c((()=>[_(v(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),u(w,{label:"企业类型",prop:"ctype",style:{width:"80%"}},{default:c((()=>[u(H,{modelValue:i(L).ctype,"onUpdate:modelValue":d[7]||(d[7]=e=>i(L).ctype=e)},{default:c((()=>[(a(!0),l(r,null,p(C.value,(e=>(a(),m(E,{label:e.value,key:e.id},{default:c((()=>[_(v(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),s("div",P,[u(F,{type:"primary",onClick:He},{default:c((()=>[Q])),_:1}),u(F,{onClick:d[8]||(d[8]=e=>ie.value=!0)},{default:c((()=>[W])),_:1}),u(F,{onClick:ce},{default:c((()=>[X])),_:1}),u(Ne,{onCommand:ge,ref_key:"dropRef",ref:be},{dropdown:c((()=>[he.value.length?(a(),m(ye,{key:0},{default:c((()=>[(a(!0),l(r,null,p(he.value,((e,l)=>(a(),m(fe,{command:e,key:e.id},{default:c((()=>[s("div",$,[s("div",A,v(e.conditions_name),1),s("div",D,[s("div",{onClick:h((a=>((e,a)=>{N({id:e.id}).then((l=>{1==l.status&&(he.value.splice(a,1),be.value.handleClose(),e.conditions_name==_e.value&&(_e.value="条件组"))}))})(e,l)),["stop"])},"删除",8,J),Z,ee])])])),_:2},1032,["command"])))),128))])),_:1})):(a(),l("div",ae,"暂无数据"))])),default:c((()=>[s("div",Y,[s("div",null,v(_e.value),1),u(g,{class:"right_icon"},{default:c((()=>[u(i(U))])),_:1})])])),_:1},512)])])),_:1},8,["model"]),y(s("div",le,[se,s("div",te,[(a(!0),l(r,null,p(i(Ve),((e,s)=>(a(),l(r,null,[e?(a(),m(je,{key:s,closable:"",class:"mytag",onClose:e=>(e=>{Ve[e]="","business_scope"==e?L.business_scope="":L[e]=[]})(s)},{default:c((()=>[_(v(ke[s])+"："+v(e),1)])),_:2},1032,["onClose"])):n("",!0)],64)))),256))])],512),[[b,xe.value]])],2)):n("",!0),e.hasHeight?(a(),m(Le,{key:1,modelValue:ie.value,"onUpdate:modelValue":d[10]||(d[10]=e=>ie.value=e),title:"新建筛选",width:"500px",onClose:ve},{footer:c((()=>[s("span",de,[u(F,{onClick:ve},{default:c((()=>[oe])),_:1}),u(F,{type:"primary",disabled:!i(ne).title,onClick:me},{default:c((()=>[ue])),_:1},8,["disabled"])])])),default:c((()=>[u(Re,{class:"myform no_margin",model:i(ne),rules:i(pe),ref_key:"addFormRef",ref:re},{default:c((()=>[u(w,{label:"条件组名称",prop:"title"},{default:c((()=>[u(k,{modelValue:i(ne).title,"onUpdate:modelValue":d[9]||(d[9]=e=>i(ne).title=e),placeholder:"请输入条件组名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])):n("",!0)])}}}),[["__scopeId","data-v-92fea956"]]);export{ce as T};
