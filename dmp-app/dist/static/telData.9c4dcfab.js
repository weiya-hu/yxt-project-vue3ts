var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,d=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{F as u,f as s,r as p,a as i,G as n,H as v,X as c,I as m,Q as f,K as y,W as b,u as _,P as w,R as h,Y as g,a7 as V,V as j,av as k,O as C,a6 as O}from"./vue.5acda677.js";import{f as U}from"./date.23847c74.js";import{M as P,_ as x}from"./MyEmpty.b964169c.js";import{_ as D}from"./MyCascader.45a5b469.js";import{T as M}from"./TopBtns.20c749f8.js";import{_ as I,m as F,j as z,k as E,n as H}from"./index.486f2fa0.js";import{a as R,b as S,c as T}from"./findC.ea3a2a54.js";const q={class:"teldata_page_c"},A={class:"mytable"},B={class:"fcs"},G=j("查看"),K={key:1},Q={class:"fcs fjend"},W=j("取消"),X=j("提交"),Y=u((J=((e,l)=>{for(var a in l||(l={}))o.call(l,a)&&d(e,a,l[a]);if(t)for(var a of t(l))r.call(l,a)&&d(e,a,l[a]);return e})({},{name:"号码段获客C"}),l(J,a({setup(e){const l=F(),a=s((()=>l.state.addressHash)),t=k(),o=p(1),r=p(0),d=()=>{R({current:o.value,size:10}).then((e=>{1==e.status&&(u.value=e.body.records,r.value=e.body.total)}))};d();const u=p([]),I=p([]),Y=e=>{I.value=e},J=()=>{d()},L=p([]),N=p({});S().then((e=>{N.value=e.body}));const Z=e=>{L.value=N.value[e].segments},$=p(!1),ee=()=>{L.value=[],$.value=!1,te.value=!1,oe.value.resetFields()},le=p({people:"",desc:"",addr:[],operator:"",tels:[]}),ae=i({people:[{required:!0,message:"请输入人群名称",trigger:"blur"}]}),te=p(!1),oe=p(),re=()=>{oe.value.validate((e=>{if(!e)return!1;te.value=!0,T({city:le.value.addr[1]||0,district:le.value.addr[2]||0,group_desc:le.value.desc,group_name:le.value.people,province:le.value.addr[0]||0,segment:le.value.tels.join()}).then((e=>{1==e.status&&(ee(),d()),te.value=!1}))}))};return(e,l)=>{const d=C("el-table-column"),s=C("el-link"),p=C("el-table"),i=C("el-input"),k=C("el-form-item"),I=C("el-radio"),F=C("el-radio-group"),R=C("el-option"),S=C("el-select"),T=C("el-button"),de=C("el-form"),ue=C("el-dialog"),se=O("loading");return n(),v("div",q,[c(M,{onAdd:l[0]||(l[0]=e=>$.value=!0)}),m("div",A,[c(p,{data:u.value,style:{width:"100%"},onSelectionChange:Y},{empty:f((()=>[c(P)])),default:f((()=>[c(d,{type:"selection",width:"50"}),c(d,{property:"id",label:"ID",width:"150"}),c(d,{property:"group_name",label:"人群名称",width:"170"}),c(d,{property:"group_desc",label:"人群描述"}),c(d,{property:"status",label:"状态",width:"160"},{default:f((e=>[m("div",B,[m("div",{class:y(["dot",0==e.row.status?"dot_ing":1==e.row.status?"dot_ok":"dot_err"])},null,2),m("div",null,b(0==e.row.status?"计算中":1==e.row.status?"计算完成":"计算失败"),1)])])),_:1}),c(d,{label:"地区"},{default:f((e=>[m("div",null,b(_(z)(_(E)(e.row.province,e.row.city,e.row.district),_(a))),1)])),_:1}),c(d,{property:"count",label:"覆盖用户人数",width:"140"},{default:f((e=>[m("div",null,b(1==e.row.status?e.row.count:"---"),1)])),_:1}),c(d,{property:"create_time",label:"创建日期",width:"190"},{default:f((e=>[m("div",null,b(_(U)(new Date(e.row.create_time),"yyyy-MM-dd")),1)])),_:1}),c(d,{property:"source",label:"来源",width:"140"},{default:f((e=>[m("div",null,b(_(H)(e.row.source)),1)])),_:1}),c(d,{property:"source",label:"操作",width:"150"},{default:f((e=>[0!=e.row.status?(n(),w(s,{key:0,type:"primary",onClick:l=>{return a=e.row.id,void t.push("/findC/telDataDetails?id="+a);var a}},{default:f((()=>[G])),_:2},1032,["onClick"])):(n(),v("div",K,"---"))])),_:1})])),_:1},8,["data"])]),c(x,{total:r.value,modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),onChange:J},null,8,["total","modelValue"]),c(ue,{modelValue:$.value,"onUpdate:modelValue":l[7]||(l[7]=e=>$.value=e),title:"新建数据",width:"500px",onClose:ee},{default:f((()=>[h((n(),w(de,{class:"myform",ref_key:"addFormRef",ref:oe,model:le.value,rules:_(ae)},{default:f((()=>[c(k,{label:"人群名称",prop:"people"},{default:f((()=>[c(i,{modelValue:le.value.people,"onUpdate:modelValue":l[2]||(l[2]=e=>le.value.people=e),placeholder:"请输入人群名称"},null,8,["modelValue"])])),_:1}),c(k,{label:"选择地区",prop:"addr"},{default:f((()=>[c(D,{modelValue:le.value.addr,"onUpdate:modelValue":l[3]||(l[3]=e=>le.value.addr=e),type:"address"},null,8,["modelValue"])])),_:1}),c(k,{label:"人群描述",prop:"desc"},{default:f((()=>[c(i,{modelValue:le.value.desc,"onUpdate:modelValue":l[4]||(l[4]=e=>le.value.desc=e),placeholder:"可对人群进行简单的描述",type:"textarea",maxlength:"150","show-word-limit":"",rows:"4",resize:"none"},null,8,["modelValue"])])),_:1}),c(k,{label:"运营商",prop:"operator"},{default:f((()=>[c(F,{modelValue:le.value.operator,"onUpdate:modelValue":l[5]||(l[5]=e=>le.value.operator=e),onChange:Z},{default:f((()=>[(n(!0),v(g,null,V(N.value,(e=>(n(),w(I,{label:e.id,key:e.id},{default:f((()=>[j(b(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(k,{label:"号码段",prop:"tels"},{default:f((()=>[c(S,{modelValue:le.value.tels,"onUpdate:modelValue":l[6]||(l[6]=e=>le.value.tels=e),multiple:"",placeholder:"请选择号码段",class:"w100",disabled:0==L.value.length},{default:f((()=>[(n(!0),v(g,null,V(L.value,((e,l)=>(n(),w(R,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),m("div",Q,[c(T,{onClick:ee},{default:f((()=>[W])),_:1}),c(T,{type:"primary",onClick:re},{default:f((()=>[X])),_:1})])])),_:1},8,["model","rules"])),[[se,te.value]])])),_:1},8,["modelValue"])])}}}))));var J,L=I(Y,[["__scopeId","data-v-7b0afd36"]]);export{L as default};
