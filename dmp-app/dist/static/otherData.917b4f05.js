var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{a as o,M as u}from"./MyEmpty.2a722683.js";import{T as i}from"./TopBtns.b126c8e5.js";import{_ as n,m as p,k as c,n as m,o as y,e as v}from"./index.e622edbd.js";import{g as f,a as b,b as _,s as w}from"./findC.6332b507.js";import{_ as g}from"./MyCascader.13381325.js";import{F as h,f as V,r as k,R as j,G as x,H as O,I as C,X as P,Q as R,Y as U,a7 as H,u as M,W as S,V as T,O as z,a6 as I,P as L}from"./vue.5acda677.js";const B={class:"kzdata_page_c"},E={class:"top_search"},F={class:"fcs"},N=T(" 查询 "),D=T(" 重置 "),G={class:"mytable"},Q=["innerHTML"],W={style:{width:"100px"},class:"fcc"},X={class:"els"},Y={style:{width:"100px"},class:"fcc"},q={class:"els"};var A=n(h({setup(e){const n=p(),h=V((()=>n.state.addressHash)),A=V((()=>n.state.typeHash));k([]);const J=["","success","info","warning","danger"],K=k(0),Z=k(!1),$=k([]),ee=k({size:50,current:1,source:2}),ae=k([]);(async()=>{const e=await b();1===e.status&&(ae.value=e.body)})();const le=[{id:0},{id:1,min:18,max:23},{id:2,min:24,max:30},{id:3,min:31,max:40},{id:4,min:41,max:49},{id:5,min:50}],te=k({keyword:"",industry_id:[],address:[],age:"",education:""}),de=k(),re=()=>{de.value.resetFields()},se=()=>{ee.value.current=1,oe()},oe=async()=>{var e,o;Z.value=!0;const u=await _((i=((e,a)=>{for(var l in a||(a={}))d.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&s(e,l,a[l]);return e})({},ee.value),n={keyword:te.value.keyword,industry_id:te.value.industry_id.join(),province:te.value.address[0]||null,city:te.value.address[1]||null,district:te.value.address[2]||null,start_age:(null==(e=le.find((e=>e.id===Number(te.value.age))))?void 0:e.min)||null,end_age:(null==(o=le.find((e=>e.id===Number(te.value.age))))?void 0:o.max)||null,education:te.value.education},a(i,l(n))));var i,n;Z.value=!1,1===u.status?(K.value=u.body.total,$.value=u.body.records):v("查询失败")},ue=k([]),ie=e=>{ue.value=e.map((e=>e.id))},ne=()=>{oe()},pe=k(),ce=k(),me=V((()=>!ue.value.length)),ye=async()=>{ce.value.setLoading(!0);const e=await w({list:ue.value});ce.value.close(e.message),ue.value=[],pe.value.clearSelection()};return(e,a)=>{const l=z("el-form-item"),t=z("el-input"),d=z("el-radio"),r=z("el-radio-group"),s=z("el-button"),n=z("el-form"),p=z("el-table-column"),v=z("el-tooltip"),b=z("el-tag"),_=z("el-table"),w=I("loading");return j((x(),O("div",B,[C("div",E,[P(n,{ref_key:"formRef",ref:de,model:te.value},{default:R((()=>[C("div",F,[P(l,{label:"行业",prop:"industry_id"},{default:R((()=>[P(g,{modelValue:te.value.industry_id,"onUpdate:modelValue":a[0]||(a[0]=e=>te.value.industry_id=e),type:"type",ref:"typeCRef"},null,8,["modelValue"])])),_:1}),P(l,{label:"地区",prop:"address"},{default:R((()=>[P(g,{modelValue:te.value.address,"onUpdate:modelValue":a[1]||(a[1]=e=>te.value.address=e),type:"address",ref:"addrCRef"},null,8,["modelValue"])])),_:1}),P(l,{label:"关键字",prop:"keyword"},{default:R((()=>[P(t,{modelValue:te.value.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>te.value.keyword=e),placeholder:"请输入职业、兴趣等关键词",maxlength:"15"},null,8,["modelValue"])])),_:1})]),P(l,{label:"年龄",prop:"age"},{default:R((()=>[P(r,{modelValue:te.value.age,"onUpdate:modelValue":a[3]||(a[3]=e=>te.value.age=e)},{default:R((()=>[(x(),O(U,null,H(le,(e=>P(d,{label:e.id,key:e.id},{default:R((()=>[T(S(e.min?e.max?e.min+"岁-"+e.max+"岁":e.min+"+岁":"不限"),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),P(l,{label:"学历",prop:"education"},{default:R((()=>[P(r,{modelValue:te.value.education,"onUpdate:modelValue":a[4]||(a[4]=e=>te.value.education=e)},{default:R((()=>[(x(!0),O(U,null,H(ae.value,(e=>(x(),L(d,{label:e.value,key:e.id},{default:R((()=>[T(S(e.id?e.name:"不限"),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),C("div",null,[P(s,{type:"primary",onClick:se},{default:R((()=>[N])),_:1}),P(s,{onClick:re},{default:R((()=>[D])),_:1})])])),_:1},8,["model"])]),P(i,{total:K.value,syncbtn:"",onSync:ye,ref_key:"topBtnRef",ref:ce,"sync-api":M(f),"sync-disabled":M(me),class:"topbtns"},null,8,["total","sync-api","sync-disabled"]),C("div",G,[P(_,{data:$.value,style:{width:"100%"},height:"100%",onSelectionChange:ie,ref_key:"tableRef",ref:pe},{empty:R((()=>[P(o)])),default:R((()=>[P(p,{type:"selection",width:"50"}),P(p,{property:"name",label:"姓名",width:"70"}),P(p,{property:"sex",label:"性别",width:"60"},{default:R((e=>[C("div",null,S(0==e.row.sex?"男":"女"),1)])),_:1}),P(p,{property:"age",label:"年龄",width:"70"}),P(p,{property:"education",label:"学历",width:"130"},{default:R((e=>[T(S(ae.value.find((a=>a.id===e.row.education)).name),1)])),_:1}),P(p,{property:"mobiles",label:"联系方式",width:"120"},{default:R((e=>[C("div",{innerHTML:e.row.mobiles},null,8,Q)])),_:1}),P(p,{property:"email",label:"邮箱",width:"180"}),P(p,{property:"industry_id",label:"从事行业",width:"110"},{default:R((e=>[P(v,{effect:"dark",placement:"top"},{content:R((()=>[C("div",W,S(M(c)(e.row.industry_id,M(A))),1)])),default:R((()=>[C("div",X,S(M(c)(e.row.industry_id,M(A),"last")),1)])),_:2},1024)])),_:1}),P(p,{property:"job",label:"职业",width:"120"}),P(p,{property:"tags",label:"行为兴趣",width:"250"},{default:R((({row:e})=>[(x(!0),O(U,null,H(e.tags,((e,a)=>(x(),L(b,{key:a,class:"user_tag",type:J[a]},{default:R((()=>[T(S(e),1)])),_:2},1032,["type"])))),128))])),_:1}),P(p,{property:"address",label:"地区",width:"140"},{default:R((e=>[P(v,{effect:"dark",placement:"top"},{content:R((()=>[C("div",Y,S(M(c)(M(m)(e.row.province,e.row.city,e.row.district),M(h))),1)])),default:R((()=>[C("div",q,S(M(c)(M(m)(e.row.province,e.row.city,e.row.district),M(h))),1)])),_:2},1024)])),_:1}),P(p,{property:"source",label:"来源",width:"100"},{default:R((e=>[C("div",null,S(M(y)(e.row.source)),1)])),_:1})])),_:1},8,["data"])]),P(u,{total:K.value,size:50,modelValue:ee.value.current,"onUpdate:modelValue":a[5]||(a[5]=e=>ee.value.current=e),onChange:ne},null,8,["total","modelValue"])])),[[w,Z.value]])}}}),[["__scopeId","data-v-312053c5"]]);export{A as default};
