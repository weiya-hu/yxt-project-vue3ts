var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{f as r}from"./date.23847c74.js";import{M as d}from"./MyEmpty.67528b0b.js";import{_ as i}from"./MyPage.b41c257e.js";import{M as c}from"./MyDialog.292921fd.js";import{M as n}from"./MyUpload.fffa9d47.js";import{a as v,o as m,e as p,h as f}from"./index.85241caf.js";import{v as y,k as b,l as _}from"./myWork.547dcb69.js";import{d as w,i as g,o as k,t as V,v as h,a as C,w as j,V as M,u as x,L as O,Q as U,c as P,S,U as z,av as D,aw as N,b as E,a5 as I}from"./vue.ca737a59.js";const L=e=>(D("data-v-85b010d8"),e=e(),N(),e),A={class:"m_video"},Q={class:"fsc m_topbtn"},R=z(" 创建 "),W={class:"fcs"},q=z("同步SCRM"),B=z("同步官网"),F=z("同步DSP系统"),G={class:"mytable"},H=["src"],J={class:"fcs"},K={class:"staus"},T={key:0,class:"fcs"},X=z("删除"),Y=L((()=>h("div",{class:"line"},null,-1))),Z=z("拒绝原因"),$={key:1,class:"fcs"},ee=z("删除"),ae=L((()=>h("div",{class:"line"},null,-1))),le=z("查看"),te={class:"fcs btns fjend"},se=z("取消"),oe=z("提交"),ue=["src"],re=w((de=((e,a)=>{for(var l in a||(a={}))s.call(a,l)&&u(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&u(e,l,a[l]);return e})({},{name:"我的作品库-视频库"}),a(de,l({setup(e){const a=g(1),l=g(0),t=g([]),s=async()=>{const e=await y({size:10,current:a.value});1==e.status&&(t.value=e.body.records,l.value=e.body.total)};s();const o=()=>{s()},u=g([]),v=e=>{u.value=e},w=e=>{const a=g();switch(e){case 3:a.value={text:"已通过",className:"cdf"};break;case 4:a.value={text:"已拒绝",className:"cred"};break;default:a.value={text:"待审核",className:"cyellow"}}return a.value},z=g(""),D=g(!1),N=e=>{z.value=e,D.value=!0},L=async()=>{1==(await b({id:z.value})).status&&s(),D.value=!1},re=g(!1),de=g(""),ie=g(!1),ce=g(""),ne=g(!1),ve=g(!1),me=[".mp4"],pe=g(),fe=()=>{be.value="",pe.value.clear(),ne.value=!1,ve.value=!1},ye=()=>{ve.value=!0,pe.value.submit()},be=g(""),_e=e=>{},we=async e=>{1==(await _({thumb_url:e})).status&&(m("上传成功"),fe(),s())},ge=e=>{p(e,0),ve.value=!1},ke=e=>{ve.value?f().then((()=>{})).catch((()=>{pe.value.doAbort(),e()})):e()};return(e,s)=>{const u=E("el-button"),m=E("el-table-column"),p=E("el-link"),f=E("el-table"),y=E("el-dialog"),b=I("loading");return k(),V("div",A,[h("div",Q,[C(u,{type:"primary",size:"large",onClick:s[0]||(s[0]=e=>ne.value=!0)},{default:j((()=>[R])),_:1}),h("div",W,[C(u,{size:"large"},{default:j((()=>[q])),_:1}),C(u,{size:"large"},{default:j((()=>[B])),_:1}),C(u,{size:"large"},{default:j((()=>[F])),_:1})])]),h("div",G,[C(f,{data:t.value,style:{width:"100%"},onSelectionChange:v},{empty:j((()=>[C(d)])),default:j((()=>[C(m,{type:"selection",width:"50"}),C(m,{property:"id",label:"ID",width:"230"}),C(m,{property:"video",label:"视频"},{default:j((({row:e})=>[h("video",{src:e.video_url,alt:"",class:"firstimg"},null,8,H)])),_:1}),C(m,{property:"create_time",label:"创建日期",width:"200"},{default:j((({row:e})=>[h("div",null,M(x(r)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1}),C(m,{property:"status",label:"状态",width:"180"},{default:j((({row:e})=>[h("div",J,[h("div",{class:O(["dot",w(e.status).className])},null,2),h("div",K,M(w(e.status).text),1)])])),_:1}),C(m,{label:"操作",width:"150"},{default:j((({row:e})=>[4==e.status?(k(),V("div",T,[C(p,{type:"primary",onClick:a=>N(e.id)},{default:j((()=>[X])),_:2},1032,["onClick"]),Y,C(p,{type:"primary",onClick:a=>{ce.value=e.fail_reason,ie.value=!0}},{default:j((()=>[Z])),_:2},1032,["onClick"])])):(k(),V("div",$,[C(p,{type:"primary",onClick:a=>N(e.id)},{default:j((()=>[ee])),_:2},1032,["onClick"]),ae,C(p,{type:"primary",onClick:a=>{return l=e.video_url,de.value=l,void(re.value=!0);var l}},{default:j((()=>[le])),_:2},1032,["onClick"])]))])),_:1})])),_:1},8,["data"])]),C(i,{total:l.value,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),onChange:o},null,8,["total","modelValue"]),C(c,{modelValue:D.value,"onUpdate:modelValue":s[2]||(s[2]=e=>D.value=e),msg:"确认删除这条数据吗?",onSure:L},null,8,["modelValue"]),C(c,{modelValue:ie.value,"onUpdate:modelValue":s[3]||(s[3]=e=>ie.value=e),msg:ce.value,title:"拒绝原因",btn:1},null,8,["modelValue","msg"]),C(y,{modelValue:ne.value,"onUpdate:modelValue":s[5]||(s[5]=e=>ne.value=e),title:"上传视频",width:"380px",onClose:fe,"custom-class":"upimgs","before-close":ke},{default:j((()=>[U((k(),V("div",null,[C(n,{type:"video",modelValue:be.value,"onUpdate:modelValue":s[4]||(s[4]=e=>be.value=e),"max-size":200,onError:ge,onSuccess:we,onChange:_e,exnameList:me,msg:"视频尺寸：宽高16:9或9:16；<br/>不超过200M；<br/>支持"+me.join("、")+"格式",ref_key:"upload",ref:pe},null,8,["modelValue","msg"]),h("div",te,[C(u,{onClick:fe},{default:j((()=>[se])),_:1}),pe.value?(k(),P(u,{key:0,type:"primary",onClick:ye,disabled:!be.value},{default:j((()=>[oe])),_:1},8,["disabled"])):S("",!0)])])),[[b,ve.value]])])),_:1},8,["modelValue"]),C(y,{modelValue:re.value,"onUpdate:modelValue":s[6]||(s[6]=e=>re.value=e),title:"查看视频",fullscreen:"",onClose:s[7]||(s[7]=e=>de.value=""),"custom-class":"videobox"},{default:j((()=>[h("video",{src:de.value,controls:"",class:"show_video"},null,8,ue)])),_:1},8,["modelValue"])])}}}))));var de,ie=v(re,[["__scopeId","data-v-85b010d8"]]);export{ie as default};
