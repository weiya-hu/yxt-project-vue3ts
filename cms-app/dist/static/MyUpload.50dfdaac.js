import{a as e,j as a,h as s,d as l,f as o}from"./index.239f6d1a.js";import{d as t,i,b as u,o as d,c,w as n,v as r,t as m,a as p,u as v,V as y,L as f,U as b,S as h}from"./vue.ca737a59.js";const x={class:"upbox"},_={key:0,class:"upvideo up_lt"},k=["src"],L={class:"fcc fc"},g={class:"file_name"},V={class:"upbox"},w={class:"up_rt"},z=["innerHTML"],S={key:0,class:"up_tip dfcolor fcs"},j=b("下载模板示例"),U={key:1,class:"up_tip dfcolor"};var M=e(t({props:{modelValue:{default:""},exnameList:{default:()=>[".zip",".rar",".7z"]},downLink:null,msg:null,type:null,maxSize:{default:4}},emits:["update:modelValue","change","error","success"],setup(e,{expose:t,emit:M}){const O=e,R=i(),I=i({}),C=i(""),A=i(""),F=i(""),H=i(""),T=e=>{R.value.clearFiles(),R.value.handleStart(e[0])},D=i(),K=(e,a)=>{D.value=e;const s=e.name.lastIndexOf("."),l=e.name.substring(s);O.exnameList.indexOf(l)<0?M("change","type"):e.size&&e.size/1024/1024>O.maxSize?M("change","size"):(M("change",""),M("update:modelValue",e.name),A.value=l,"video"==O.type&&(H.value=URL.createObjectURL(e.raw)))},P=(e,a)=>{M("success",F.value)},q=(e,a,s)=>{B(),M("error",e)},B=()=>{R.value.clearFiles(),M("update:modelValue",""),URL.revokeObjectURL(H.value),H.value=""},E=()=>{};return t({submit:()=>{l({site:"video"==O.type?"cms_video":"cms_attach"}).then((e=>new Promise(((a,s)=>{1==e.status?(C.value=e.body.host,I.value={key:e.body.dir+"/"+e.body.uuid+A.value,OSSAccessKeyId:e.body.accessid,success_action_status:200,policy:e.body.policy,signature:e.body.signature,"Content-Disposition":"attachment; filename="+encodeURIComponent(O.modelValue)},a(e.body.host+"/"+e.body.dir+"/"+e.body.uuid+A.value)):s(e.message)})))).then((e=>{F.value=e,R.value.submit()})).catch((e=>{M("error",e)}))},clear:B,doAbort:()=>{R.value.abort(D.value),o("取消上传")}}),(l,o)=>{const t=u("el-icon"),i=u("el-link"),M=u("el-upload");return d(),c(M,{action:C.value,"auto-upload":!1,limit:1,multiple:!1,"show-file-list":!1,data:I.value,"on-exceed":T,"on-change":K,"on-success":P,"on-error":q,ref_key:"upload",ref:R,accept:e.exnameList.join(","),class:"my_upload"},{default:n((()=>[r("div",x,["video"==e.type&&e.modelValue?(d(),m("div",_,[r("video",{src:H.value},null,8,k)])):(d(),m("div",{key:1,class:f(["fcc up_lt",e.modelValue?"hasfile":""])},[r("div",L,[p(t,null,{default:n((()=>[e.modelValue?(d(),c(v(a),{key:0})):(d(),c(v(s),{key:1}))])),_:1}),r("div",g,y(e.modelValue||"点击上传"),1)])],2))])])),tip:n((()=>[r("div",V,[r("div",w,[r("div",{innerHTML:e.msg||"可适当描述所处的行业现状，以及公司目前采取的运营、渠道、推广等多种获客方式，以便运营人员进一步了解熟悉您的所处的行业及需求，同时也为您提供更好的客户服务。"},null,8,z),e.downLink?(d(),m("div",S,[p(i,{type:"primary",href:e.downLink,onClick:E,download:"模板.xlsx"},{default:n((()=>[j])),_:1},8,["href"]),b("（上传附件大小不超过"+y(e.maxSize)+"M）",1)])):h("",!0),e.downLink||"video"==e.type?h("",!0):(d(),m("div",U,"附件支持 "+y(e.exnameList.join(" "))+"，大小不超过"+y(e.maxSize)+"M",1))])])])),_:1},8,["action","data","accept"])}}}),[["__scopeId","data-v-568f9a50"]]);export{M};
