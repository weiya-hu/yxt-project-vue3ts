import{a as e,j as a,h as s,d as l,f as o}from"./index.eda3de22.js";import{d as t,i,b as d,o as u,c,w as n,v as r,t as m,a as p,u as v,V as y,L as f,U as b,S as h}from"./vue.ca737a59.js";const x={class:"upbox"},_={key:0,class:"upvideo up_lt"},k=["src"],L={class:"fcc fc"},g={class:"file_name"},V={class:"upbox"},w={class:"up_rt"},z=["innerHTML"],S={key:0,class:"up_tip dfcolor fcs"},j=b("下载模板示例"),M={key:1,class:"up_tip dfcolor"};var I=e(t({props:{modelValue:{default:""},exnameList:{default:()=>[".zip",".rar",".7z"]},downLink:null,msg:null,type:null,maxSize:{default:4}},emits:["update:modelValue","change","error","success"],setup(e,{expose:t,emit:I}){const O=e,U=i(),C=i({}),R=i(""),A=i(""),F=i(""),H=i(""),T=e=>{U.value.clearFiles(),U.value.handleStart(e[0])},D=i(),K=(e,a)=>{D.value=e;const s=e.name.lastIndexOf("."),l=e.name.substring(s);O.exnameList.indexOf(l)<0?I("change","type"):e.size&&e.size/1024/1024>O.maxSize?I("change","size"):(I("change",""),I("update:modelValue",e.name),A.value=l,"video"==O.type&&(H.value=URL.createObjectURL(e.raw)))},P=(e,a)=>{I("success",F.value)},q=(e,a,s)=>{B(),I("error",e)},B=()=>{U.value.clearFiles(),I("update:modelValue",""),H.value=""},E=()=>{};return t({submit:()=>{l({site:"video"==O.type?"cms_video":"cms_attach"}).then((e=>new Promise(((a,s)=>{1==e.status?(R.value=e.body.host,C.value={key:e.body.dir+"/"+e.body.uuid+A.value,OSSAccessKeyId:e.body.accessid,success_action_status:200,policy:e.body.policy,signature:e.body.signature,"Content-Disposition":"attachment; filename="+encodeURIComponent(O.modelValue)},a(e.body.host+"/"+e.body.dir+"/"+e.body.uuid+A.value)):s(e.message)})))).then((e=>{F.value=e,U.value.submit()})).catch((e=>{I("error",e)}))},clear:B,doAbort:()=>{U.value.abort(D.value),o("取消上传")}}),(l,o)=>{const t=d("el-icon"),i=d("el-link"),I=d("el-upload");return u(),c(I,{action:R.value,"auto-upload":!1,limit:1,multiple:!1,"show-file-list":!1,data:C.value,"on-exceed":T,"on-change":K,"on-success":P,"on-error":q,ref_key:"upload",ref:U,accept:e.exnameList.join(","),class:"my_upload"},{default:n((()=>[r("div",x,["video"==e.type&&e.modelValue?(u(),m("div",_,[r("video",{src:H.value},null,8,k)])):(u(),m("div",{key:1,class:f(["fcc up_lt",e.modelValue?"hasfile":""])},[r("div",L,[p(t,null,{default:n((()=>[e.modelValue?(u(),c(v(a),{key:0})):(u(),c(v(s),{key:1}))])),_:1}),r("div",g,y(e.modelValue||"点击上传"),1)])],2))])])),tip:n((()=>[r("div",V,[r("div",w,[r("div",{innerHTML:e.msg||"可适当描述所处的行业现状，以及公司目前采取的运营、渠道、推广等多种获客方式，以便运营人员进一步了解熟悉您的所处的行业及需求，同时也为您提供更好的客户服务。"},null,8,z),e.downLink?(u(),m("div",S,[p(i,{type:"primary",href:e.downLink,onClick:E,download:"模板.xlsx"},{default:n((()=>[j])),_:1},8,["href"]),b("（上传附件大小不超过"+y(e.maxSize)+"M）",1)])):h("",!0),e.downLink||"video"==e.type?h("",!0):(u(),m("div",M,"附件支持 "+y(e.exnameList.join(" "))+"，大小不超过"+y(e.maxSize)+"M",1))])])])),_:1},8,["action","data","accept"])}}}),[["__scopeId","data-v-e975eddc"]]);export{I as M};
