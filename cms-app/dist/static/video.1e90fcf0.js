var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{f as d}from"./date.23847c74.js";import{M as i}from"./MyEmpty.4bb35154.js";import{_ as r}from"./MyPage.b41c257e.js";import{M as n}from"./MyDialog.6f3f596d.js";import{M as c}from"./MyUpload.2293bbd0.js";import{T as v}from"./TopBtns.bfa79617.js";import{a as m,g as p,o as f,f as y,i as b}from"./index.eda3de22.js";import{v as _,m as w,n as V,o as k}from"./myWork.5537892c.js";import{d as C,i as g,o as h,t as j,a as x,v as M,w as O,V as U,u as P,L as S,Q as D,c as E,S as I,U as z,av as A,aw as L,b as T,a5 as B}from"./vue.ca737a59.js";const N=e=>(A("data-v-9891428c"),e=e(),L(),e),Q={class:"m_video"},W={class:"mytable"},q=["src","onClick"],F={class:"els"},G={class:"fcs"},H={key:0,class:"fcs"},J=z("修改名称"),K=N((()=>M("div",{class:"line"},null,-1))),R=z("删除"),X=N((()=>M("div",{class:"line"},null,-1))),Y=z("拒绝原因"),Z={key:1,class:"fcs"},$=z("修改名称"),ee=N((()=>M("div",{class:"line"},null,-1))),le=z("删除"),ae=N((()=>M("div",{class:"line"},null,-1))),te=z("查看"),oe={class:"fcs btns fjend"},se=z("取消"),ue=z("提交"),de={class:"flex fjend"},ie=z("确定"),re=["src"],ne=C((ce=((e,l)=>{for(var a in l||(l={}))o.call(l,a)&&u(e,a,l[a]);if(t)for(var a of t(l))s.call(l,a)&&u(e,a,l[a]);return e})({},{name:"我的作品库-视频库"}),l(ce,a({setup(e){const l=g(1),a=g(0),t=g([]),o=async()=>{const e=await _({size:10,current:l.value});1==e.status&&(t.value=e.body.records,a.value=e.body.total)};o();const s=()=>{o()},u=g([]),m=e=>{u.value=e},C=g(""),z=g(!1),A=e=>{C.value=e,z.value=!0},L=async()=>{1==(await w({id:C.value})).status&&o(),z.value=!1},N=g(!1),ne=g(""),ce=e=>{ne.value=e,N.value=!0},ve=g(!1),me=g(""),pe=g(!1),fe=g(!1),ye=[".mp4"],be=g(),_e=()=>{Ve.value="",be.value.clear(),pe.value=!1,fe.value=!1},we=()=>{fe.value=!0,be.value.submit()},Ve=g(""),ke=e=>{},Ce=async e=>{const l=Ve.value.substring(0,Ve.value.indexOf("."));1==(await V({thumb_url:e,source_name:l})).status&&(f("上传成功"),_e(),o())},ge=e=>{y(e,0),fe.value=!1},he=e=>{fe.value?b().then((()=>{be.value.doAbort(),e()})).catch((()=>{})):e()},je=g(!1),xe=g(""),Me=g(""),Oe=(e,l)=>{xe.value=e,Me.value=l,je.value=!0},Ue=async()=>{const{status:e}=await k({id:xe.value,source_name:Me.value});1==e&&(je.value=!1,o())};return(e,o)=>{const u=T("el-table-column"),f=T("el-link"),y=T("el-table"),b=T("el-button"),_=T("el-dialog"),w=T("el-input"),V=T("el-form-item"),k=T("el-form"),C=B("loading");return h(),j("div",Q,[x(v,{onAdd:o[0]||(o[0]=e=>pe.value=!0)}),M("div",W,[x(y,{data:t.value,style:{width:"100%"},onSelectionChange:m},{empty:O((()=>[x(i)])),default:O((()=>[x(u,{type:"selection",width:"50"}),x(u,{property:"id",label:"ID",width:"230"}),x(u,{property:"video",label:"视频"},{default:O((({row:e})=>[M("video",{src:e.video_url,alt:"",class:"firstimg lookhover",onClick:l=>ce(e.video_url)},null,8,q)])),_:1}),x(u,{property:"source_name",label:"视频名",width:"250"},{default:O((({row:e})=>[M("div",F,U(e.source_name),1)])),_:1}),x(u,{property:"create_time",label:"创建日期",width:"200"},{default:O((({row:e})=>[M("div",null,U(P(d)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1}),x(u,{property:"status",label:"状态",width:"180"},{default:O((({row:e})=>[M("div",G,[M("div",{class:S(["status_dot",P(p)(e.status).className])},null,2),M("div",null,U(P(p)(e.status).text),1)])])),_:1}),x(u,{label:"操作",fixed:"right",width:"240"},{default:O((({row:e})=>[4==e.status?(h(),j("div",H,[x(f,{type:"primary",onClick:l=>Oe(e.id,e.source_name)},{default:O((()=>[J])),_:2},1032,["onClick"]),K,x(f,{type:"primary",onClick:l=>A(e.id)},{default:O((()=>[R])),_:2},1032,["onClick"]),X,x(f,{type:"primary",onClick:l=>{me.value=e.fail_reason,ve.value=!0}},{default:O((()=>[Y])),_:2},1032,["onClick"])])):(h(),j("div",Z,[x(f,{type:"primary",onClick:l=>Oe(e.id,e.source_name)},{default:O((()=>[$])),_:2},1032,["onClick"]),ee,x(f,{type:"primary",onClick:l=>A(e.id)},{default:O((()=>[le])),_:2},1032,["onClick"]),ae,x(f,{type:"primary",onClick:l=>ce(e.video_url)},{default:O((()=>[te])),_:2},1032,["onClick"])]))])),_:1})])),_:1},8,["data"])]),x(r,{total:a.value,modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value=e),onChange:s},null,8,["total","modelValue"]),x(n,{modelValue:z.value,"onUpdate:modelValue":o[2]||(o[2]=e=>z.value=e),msg:"确认删除这条数据吗?",onSure:L},null,8,["modelValue"]),x(n,{modelValue:ve.value,"onUpdate:modelValue":o[3]||(o[3]=e=>ve.value=e),msg:me.value,title:"拒绝原因",btn:1},null,8,["modelValue","msg"]),x(_,{modelValue:pe.value,"onUpdate:modelValue":o[5]||(o[5]=e=>pe.value=e),title:"上传视频",width:"380px",onClose:_e,"custom-class":"upimgs","before-close":he},{default:O((()=>[D((h(),j("div",null,[x(c,{type:"video",modelValue:Ve.value,"onUpdate:modelValue":o[4]||(o[4]=e=>Ve.value=e),"max-size":200,onError:ge,onSuccess:Ce,onChange:ke,exnameList:ye,msg:"视频尺寸：宽高16:9或9:16；<br/>不超过200M；<br/>支持"+ye.join("、")+"格式",ref_key:"upload",ref:be},null,8,["modelValue","msg"]),M("div",oe,[x(b,{onClick:_e},{default:O((()=>[se])),_:1}),be.value?(h(),E(b,{key:0,type:"primary",onClick:we,disabled:!Ve.value},{default:O((()=>[ue])),_:1},8,["disabled"])):I("",!0)])])),[[C,fe.value]])])),_:1},8,["modelValue"]),x(_,{modelValue:je.value,"onUpdate:modelValue":o[7]||(o[7]=e=>je.value=e),title:"修改名称",width:"380px"},{default:O((()=>[x(k,null,{default:O((()=>[x(V,{label:"输入名称"},{default:O((()=>[x(w,{modelValue:Me.value,"onUpdate:modelValue":o[6]||(o[6]=e=>Me.value=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1})])),_:1}),M("div",de,[x(b,{type:"primary",disabled:!Me.value,onClick:Ue},{default:O((()=>[ie])),_:1},8,["disabled"])])])),_:1},8,["modelValue"]),x(_,{modelValue:N.value,"onUpdate:modelValue":o[8]||(o[8]=e=>N.value=e),title:"查看视频",fullscreen:"",onClose:o[9]||(o[9]=e=>ne.value=""),"custom-class":"videobox"},{default:O((()=>[M("video",{src:ne.value,controls:"",class:"show_video"},null,8,re)])),_:1},8,["modelValue"])])}}}))));var ce,ve=m(ne,[["__scopeId","data-v-9891428c"]]);export{ve as default};
