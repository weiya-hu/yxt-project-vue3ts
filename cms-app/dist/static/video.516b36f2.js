var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{f as r}from"./date.23847c74.js";import{M as d}from"./MyEmpty.a840fc11.js";import{_ as i}from"./MyPage.b41c257e.js";import{M as c}from"./MyDialog.7ade7cee.js";import{M as n}from"./MyUpload.1feae331.js";import{T as v}from"./TopBtns.180d3480.js";import{a as m,o as p,e as f,h as y}from"./index.117bdf98.js";import{v as b,k as _,l as w}from"./myWork.f1441544.js";import{d as k,i as V,o as h,t as g,a as j,v as C,w as x,V as M,u as O,L as U,Q as P,c as S,S as D,U as N,av as E,aw as I,b as z,a5 as A}from"./vue.ca737a59.js";const L=e=>(E("data-v-11539a9a"),e=e(),I(),e),T={class:"m_video"},B={class:"mytable"},Q=["src","onClick"],W={class:"fcs"},q={class:"staus"},F={key:0,class:"fcs"},G=N("删除"),H=L((()=>C("div",{class:"line"},null,-1))),J=N("拒绝原因"),K={key:1,class:"fcs"},R=N("删除"),X=L((()=>C("div",{class:"line"},null,-1))),Y=N("查看"),Z={class:"fcs btns fjend"},$=N("取消"),ee=N("提交"),ae=["src"],le=k((te=((e,a)=>{for(var l in a||(a={}))s.call(a,l)&&u(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&u(e,l,a[l]);return e})({},{name:"我的作品库-视频库"}),a(te,l({setup(e){const a=V(1),l=V(0),t=V([]),s=async()=>{const e=await b({size:10,current:a.value});1==e.status&&(t.value=e.body.records,l.value=e.body.total)};s();const o=()=>{s()},u=V([]),m=e=>{u.value=e},k=e=>{const a=V();switch(e){case 3:a.value={text:"已通过",className:"cdf"};break;case 4:a.value={text:"已拒绝",className:"cred"};break;default:a.value={text:"待审核",className:"cyellow"}}return a.value},N=V(""),E=V(!1),I=e=>{N.value=e,E.value=!0},L=async()=>{1==(await _({id:N.value})).status&&s(),E.value=!1},le=V(!1),te=V(""),se=e=>{te.value=e,le.value=!0},oe=V(!1),ue=V(""),re=V(!1),de=V(!1),ie=[".mp4"],ce=V(),ne=()=>{me.value="",ce.value.clear(),re.value=!1,de.value=!1},ve=()=>{de.value=!0,ce.value.submit()},me=V(""),pe=e=>{},fe=async e=>{1==(await w({thumb_url:e})).status&&(p("上传成功"),ne(),s())},ye=e=>{f(e,0),de.value=!1},be=e=>{de.value?y().then((()=>{ce.value.doAbort(),e()})).catch((()=>{})):e()};return(e,s)=>{const u=z("el-table-column"),p=z("el-link"),f=z("el-table"),y=z("el-button"),b=z("el-dialog"),_=A("loading");return h(),g("div",T,[j(v,{onAdd:s[0]||(s[0]=e=>re.value=!0)}),C("div",B,[j(f,{data:t.value,style:{width:"100%"},onSelectionChange:m},{empty:x((()=>[j(d)])),default:x((()=>[j(u,{type:"selection",width:"50"}),j(u,{property:"id",label:"ID",width:"230"}),j(u,{property:"video",label:"视频"},{default:x((({row:e})=>[C("video",{src:e.video_url,alt:"",class:"firstimg lookhover",onClick:a=>se(e.video_url)},null,8,Q)])),_:1}),j(u,{property:"create_time",label:"创建日期",width:"200"},{default:x((({row:e})=>[C("div",null,M(O(r)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1}),j(u,{property:"status",label:"状态",width:"180"},{default:x((({row:e})=>[C("div",W,[C("div",{class:U(["dot",k(e.status).className])},null,2),C("div",q,M(k(e.status).text),1)])])),_:1}),j(u,{label:"操作",width:"150"},{default:x((({row:e})=>[4==e.status?(h(),g("div",F,[j(p,{type:"primary",onClick:a=>I(e.id)},{default:x((()=>[G])),_:2},1032,["onClick"]),H,j(p,{type:"primary",onClick:a=>{ue.value=e.fail_reason,oe.value=!0}},{default:x((()=>[J])),_:2},1032,["onClick"])])):(h(),g("div",K,[j(p,{type:"primary",onClick:a=>I(e.id)},{default:x((()=>[R])),_:2},1032,["onClick"]),X,j(p,{type:"primary",onClick:a=>se(e.video_url)},{default:x((()=>[Y])),_:2},1032,["onClick"])]))])),_:1})])),_:1},8,["data"])]),j(i,{total:l.value,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),onChange:o},null,8,["total","modelValue"]),j(c,{modelValue:E.value,"onUpdate:modelValue":s[2]||(s[2]=e=>E.value=e),msg:"确认删除这条数据吗?",onSure:L},null,8,["modelValue"]),j(c,{modelValue:oe.value,"onUpdate:modelValue":s[3]||(s[3]=e=>oe.value=e),msg:ue.value,title:"拒绝原因",btn:1},null,8,["modelValue","msg"]),j(b,{modelValue:re.value,"onUpdate:modelValue":s[5]||(s[5]=e=>re.value=e),title:"上传视频",width:"380px",onClose:ne,"custom-class":"upimgs","before-close":be},{default:x((()=>[P((h(),g("div",null,[j(n,{type:"video",modelValue:me.value,"onUpdate:modelValue":s[4]||(s[4]=e=>me.value=e),"max-size":200,onError:ye,onSuccess:fe,onChange:pe,exnameList:ie,msg:"视频尺寸：宽高16:9或9:16；<br/>不超过200M；<br/>支持"+ie.join("、")+"格式",ref_key:"upload",ref:ce},null,8,["modelValue","msg"]),C("div",Z,[j(y,{onClick:ne},{default:x((()=>[$])),_:1}),ce.value?(h(),S(y,{key:0,type:"primary",onClick:ve,disabled:!me.value},{default:x((()=>[ee])),_:1},8,["disabled"])):D("",!0)])])),[[_,de.value]])])),_:1},8,["modelValue"]),j(b,{modelValue:le.value,"onUpdate:modelValue":s[6]||(s[6]=e=>le.value=e),title:"查看视频",fullscreen:"",onClose:s[7]||(s[7]=e=>te.value=""),"custom-class":"videobox"},{default:x((()=>[C("video",{src:te.value,controls:"",class:"show_video"},null,8,ae)])),_:1},8,["modelValue"])])}}}))));var te,se=m(le,[["__scopeId","data-v-11539a9a"]]);export{se as default};
